<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>它夏了夏天</title>
  
  <subtitle>生命中有一种遇见，就让它美如行云流水，然后一生去回味。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://tokyle.com/"/>
  <updated>2019-04-08T05:35:07.577Z</updated>
  <id>http://tokyle.com/</id>
  
  <author>
    <name>Kyle</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>伪·influxdb删除数据</title>
    <link href="http://tokyle.com/2019/04/08/%E4%BC%AA%C2%B7influxdb%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE/"/>
    <id>http://tokyle.com/2019/04/08/伪·influxdb删除数据/</id>
    <published>2019-04-08T05:34:15.000Z</published>
    <updated>2019-04-08T05:35:07.577Z</updated>
    
    <content type="html"><![CDATA[<p>伪 influxdb删除数据</p><a id="more"></a><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>大早上的，一大佬跟我说grafan登不上了，让帮忙看看啥情况，登录服务器一通乱看，磁盘满了，因为那台服务器还装了个influxdb，估计也就是数据写的，没空间了。</p><p>influxdb作为时序数据库的一种，是不提供类似mysql的delete操作，也就是，原则上，你删不了数据，除非删库。</p><p>但是，influxdb提供了数据保留策略<code>policies</code>，通过对<code>policies</code>操作，可以达到删除数据的效果</p><h3 id="数据保存策略（Retention-Policies）"><a href="#数据保存策略（Retention-Policies）" class="headerlink" title="数据保存策略（Retention Policies）"></a>数据保存策略（Retention Policies）</h3><p>influxdb的数据保存策略<code>policies</code>主要是用于指定数据的保留时间，超过指定时间，就会删除这部分数据。</p><h4 id="查询策略"><a href="#查询策略" class="headerlink" title="查询策略"></a>查询策略</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; show retention policies on exceptionless;</span><br><span class="line">name    duration shardGroupDuration replicaN default</span><br><span class="line">----    -------- ------------------ -------- -------</span><br><span class="line">autogen 0s       168h0m0s           1        true</span><br></pre></td></tr></table></figure><ul><li>name: 策略名称</li><li>duration： 保留时间，0s表示永久保存</li><li>shardGroupDuration：shardGroup的存储时间，shardGroup是InfluxDB的一个基本储存结构，个人理解为时间分区</li><li>replicaN：全称是REPLICATION，副本个数</li><li>default：是否是默认策略</li></ul><h4 id="新建策略"><a href="#新建策略" class="headerlink" title="新建策略"></a>新建策略</h4><p>语法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE RETENTION POLICY ON &lt;retention_policy_name&gt; </span><br><span class="line">ON &lt;database_name&gt; </span><br><span class="line">DURATION &lt;duration&gt; </span><br><span class="line">REPLICATION &lt;n&gt; [SHARD DURATION &lt;duration&gt; ] [DEFAULT]</span><br></pre></td></tr></table></figure></p><h5 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE RETENTION POLICY &quot;3_day&quot; ON &quot;exceptionless&quot; DURATION 3d REPLICATION 1 SHARD DURATION 3h DEFAULT;</span><br></pre></td></tr></table></figure><p>为库exceptionless创建了一个名称为3_day的策略，其中数据保存时间为3天，SHARDDURATION为3h。</p><h4 id="ShardGroup"><a href="#ShardGroup" class="headerlink" title="ShardGroup"></a>ShardGroup</h4><p>shardgroup是InfluxDB中一个重要的逻辑概念，它负责指定时间跨度的数据存储，这个时间跨度在创建RP时指定。如果没有指定，系统将通过RP的数据保留时间来计算：</p><table><thead><tr><th>Retention Policy‘s DURATION</th><th>Shard Group Duration</th></tr></thead><tbody><tr><td>&lt; 2days</td><td>1h</td></tr><tr><td>&gt;= 2days and &lt;= 6months</td><td>24h</td></tr><tr><td>&gt; 6months</td><td>168h</td></tr></tbody></table><p>不同shardgroup的时间跨度不会重叠。shardgroup实现了数据按时间分区，这样的设计可以：</p><ol><li>一定程度上缓解数据写入热点问题</li><li>加快数据删除效率(将数据按照时间分割成小的粒度会使得数据过期实现非常简单，InfluxDB中数据过期删除的执行粒度就是Shard Group，系统会对每一个Shard Group判断是否过期，而不是一条一条记录判断。InfluxDB没有提供删除和更新数据的接口，数据只能通过RP进行删除)</li><li>加快数据按时间维度查找的效率(实现了将数据按照时间分区的特性。将时序数据按照时间分区是时序数据库一个非常重要的特性，基本上所有时序数据查询操作都会带有时间的过滤条件，比如查询最近一小时或最近一天，数据分区可以有效根据时间维度选择部分目标分区，淘汰部分分区)</li></ol><h4 id="修改及删除策略"><a href="#修改及删除策略" class="headerlink" title="修改及删除策略"></a>修改及删除策略</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 修改策略</span><br><span class="line">alter retention policy &quot;autogen&quot; on &quot;exceptionless&quot; duration 72h0m0s default;</span><br><span class="line"></span><br><span class="line"># 删除策略</span><br><span class="line">drop retention POLICY &quot;2_hours&quot; ON &quot;exceptionless&quot;</span><br></pre></td></tr></table></figure><h3 id="后序"><a href="#后序" class="headerlink" title="后序"></a>后序</h3><p>说回大佬的问题，连接进influxdb：<code>influx -host ip:port -precision rfc3339</code>之后，查看当前库的存储策略：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; show retention policies on exceptionless;</span><br><span class="line">name    duration shardGroupDuration replicaN default</span><br><span class="line">----    -------- ------------------ -------- -------</span><br><span class="line">autogen 0s       168h0m0s           1        true</span><br></pre></td></tr></table></figure></p><p>嗯，保存时间是永久。。再新建一个7天的策略，把原策略删除即可。</p><p>以上，完~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;伪 influxdb删除数据&lt;/p&gt;
    
    </summary>
    
      <category term="Devops" scheme="http://tokyle.com/categories/Devops/"/>
    
    
      <category term="influxdb" scheme="http://tokyle.com/tags/influxdb/"/>
    
  </entry>
  
  <entry>
    <title>Linux垃圾清理</title>
    <link href="http://tokyle.com/2019/02/27/Linux%E5%9E%83%E5%9C%BE%E6%B8%85%E7%90%86/"/>
    <id>http://tokyle.com/2019/02/27/Linux垃圾清理/</id>
    <published>2019-02-28T02:00:04.000Z</published>
    <updated>2019-02-28T02:01:53.729Z</updated>
    
    <content type="html"><![CDATA[<p>linux垃圾清理</p><a id="more"></a><p>起因是阿里云上面一台很穷的机器，大早上来看了下，搭在那服务器上面的grafana直接就登不上了，登服务器看了下日志，磁盘满了，因为就50G的空间，上面还有个influxdb占了大头，在重新申请扩充磁盘空间之前，只能先看看能删啥了。</p><h3 id="Linux垃圾"><a href="#Linux垃圾" class="headerlink" title="Linux垃圾"></a>Linux垃圾</h3><p>坊间有句话：Linux不像windows，Linux没有垃圾。对这句话，只能笑笑。。</p><p>首先<code>df -h</code>看一下哪个分区满了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf633r5fhkmlfxl47zbkz log]# df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/vda1        50G   43G  28M  100% /</span><br><span class="line">devtmpfs        3.9G     0  3.9G   0% /dev</span><br><span class="line">tmpfs           3.9G     0  3.9G   0% /dev/shm</span><br><span class="line">tmpfs           3.9G  500K  3.9G   1% /run</span><br><span class="line">tmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup</span><br><span class="line">tmpfs           783M     0  783M   0% /run/user/1002</span><br></pre></td></tr></table></figure></p><p>可以看到<code>/dev/vda1</code>分区基本已经使用100%了，这个分区是挂载在<code>/</code>目录下，所以，需要清理的也就是<code>/</code>目录下的垃圾。</p><p>进根目录，一层一层的看文件大小并按文件大小倒序排列：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /</span><br><span class="line"></span><br><span class="line">du -sh * | sort -h</span><br></pre></td></tr></table></figure></p><p>找到最大的文件夹/文件，进入对应的文件夹，一层一层的筛选<br>基本上可以找到<code>/var/log</code>这个文件夹，这个文件夹中有很大的日志文件，尤其是<code>/var/log/messages</code>文件以及<code>/var/log/journal</code>文件夹，这两个都是系统操作日志的记录，尤其是<code>journal</code>文件夹，里面存的大量的日志，这台服务器的日志有4G，需要清理的就是这个文件夹了。</p><h3 id="journalctl"><a href="#journalctl" class="headerlink" title="journalctl"></a>journalctl</h3><p>linux继承unix，也有类似syslog的记录，linux有个journald的日志解决方案，说实话，我对linux底层不是非常了解，所以这个日志系统当前也没多少时间去深究，只能停留在使用上。<br>journald日志系统有个读取日志的工具：<code>journalctl</code>，这个工具应该算是经常用到的一个，经常搭建环境时候出错需要：<code>journalctl -xe</code>查看详细日志</p><p>关于<code>journalctl</code>这个工具的详细介绍这边不说，提供官方地址，不行就直接<code>--help</code></p><blockquote><p><a href="https://www.freedesktop.org/software/systemd/man/journalctl.html" target="_blank" rel="noopener">journalctl各参数详细介绍</a></p></blockquote><p>其中可以找到一个参数：<code>--vacuum-size=, --vacuum-time=, --vacuum-files=</code><br>官方解释：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Removes the oldest archived journal files until the disk space they use falls below the specified size (specified with the usual &quot;K&quot;, &quot;M&quot;, &quot;G&quot; and &quot;T&quot; suffixes), or all archived journal files contain no data older than the specified timespan (specified with the usual &quot;s&quot;, &quot;m&quot;, &quot;h&quot;, &quot;days&quot;, &quot;months&quot;, &quot;weeks&quot; and &quot;years&quot; suffixes), or no more than the specified number of separate journal files remain. Note that running --vacuum-size= has only an indirect effect on the output shown by --disk-usage, as the latter includes active journal files, while the vacuuming operation only operates on archived journal files. Similarly, --vacuum-files= might not actually reduce the number of journal files to below the specified number, as it will not remove active journal files.</span><br></pre></td></tr></table></figure></p><p>这三个参数，可以帮助我们删除journald的日志</p><p>用法：<br><code>journalctl --vacuum-size=1G</code>  指定日志文件最大占据空间为1G<br><code>journalctl --vacuum-time=1years</code> 指定日志文件保存时间为1年</p><p>更多用法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">#查看所有日志（默认情况下 ，只保存本次启动的日志）</span><br><span class="line">$ sudo journalctl</span><br><span class="line"></span><br><span class="line">#查看内核日志（不显示应用日志）</span><br><span class="line">$ sudo journalctl -k</span><br><span class="line"></span><br><span class="line">#查看系统本次启动的日志</span><br><span class="line">$ sudo journalctl -b</span><br><span class="line">$ sudo journalctl -b -0</span><br><span class="line"></span><br><span class="line">#查看上一次启动的日志（需更改设置）</span><br><span class="line">$ sudo journalctl -b -1</span><br><span class="line"></span><br><span class="line">#查看指定时间的日志</span><br><span class="line">$ sudo journalctl --since=&quot;2012-10-30 18:17:16&quot;</span><br><span class="line">$ sudo journalctl --since &quot;20 min ago&quot;</span><br><span class="line">$ sudo journalctl --since yesterday</span><br><span class="line">$ sudo journalctl --since &quot;2015-01-10&quot; --until &quot;2015-01-11 03:00&quot;</span><br><span class="line">$ sudo journalctl --since 09:00 --until &quot;1 hour ago&quot;</span><br><span class="line"></span><br><span class="line">#显示尾部的最新10行日志</span><br><span class="line">$ sudo journalctl -n</span><br><span class="line"></span><br><span class="line">#显示尾部指定行数的日志</span><br><span class="line">$ sudo journalctl -n 20</span><br><span class="line"></span><br><span class="line">#实时滚动显示最新日志</span><br><span class="line">$ sudo journalctl -f</span><br><span class="line"></span><br><span class="line">#查看指定服务的日志</span><br><span class="line">$ sudo journalctl /usr/lib/systemd/systemd</span><br><span class="line"></span><br><span class="line">#查看指定进程的日志</span><br><span class="line">$ sudo journalctl _PID=1</span><br><span class="line"></span><br><span class="line">#查看某个路径的脚本的日志</span><br><span class="line">$ sudo journalctl /usr/bin/bash</span><br><span class="line"></span><br><span class="line">#查看指定用户的日志</span><br><span class="line">$ sudo journalctl _UID=33 --since today</span><br><span class="line"></span><br><span class="line">#查看某个 Unit 的日志</span><br><span class="line">$ sudo journalctl -u nginx.service</span><br><span class="line">$ sudo journalctl -u nginx.service --since today</span><br><span class="line"></span><br><span class="line">#实时滚动显示某个 Unit 的最新日志</span><br><span class="line">$ sudo journalctl -u nginx.service -f</span><br><span class="line"></span><br><span class="line">#合并显示多个 Unit 的日志</span><br><span class="line">$ journalctl -u nginx.service -u php-fpm.service --since today</span><br><span class="line"></span><br><span class="line">#查看指定优先级（及其以上级别）的日志，共有8级</span><br><span class="line"># 0: emerg</span><br><span class="line"># 1: alert</span><br><span class="line"># 2: crit</span><br><span class="line"># 3: err</span><br><span class="line"># 4: warning</span><br><span class="line"># 5: notice</span><br><span class="line"># 6: info</span><br><span class="line"># 7: debug</span><br><span class="line">$ sudo journalctl -p err -b</span><br><span class="line"></span><br><span class="line">#日志默认分页输出，--no-pager 改为正常的标准输出</span><br><span class="line">$ sudo journalctl --no-pager</span><br><span class="line"></span><br><span class="line">#以 JSON 格式（单行）输出</span><br><span class="line">$ sudo journalctl -b -u nginx.service -o json</span><br><span class="line"></span><br><span class="line">#以 JSON 格式（多行）输出，可读性更好</span><br><span class="line">$ sudo journalctl -b -u nginx.serviceqq</span><br><span class="line"> -o json-pretty</span><br><span class="line"></span><br><span class="line">#显示日志占据的硬盘空间</span><br><span class="line">$ sudo journalctl --disk-usage</span><br><span class="line"></span><br><span class="line">#指定日志文件占据的最大空间</span><br><span class="line">$ sudo journalctl --vacuum-size=1G</span><br><span class="line"></span><br><span class="line">#指定日志文件保存多久</span><br><span class="line">$ sudo journalctl --vacuum-time=1years</span><br></pre></td></tr></table></figure></p><p>附上一篇关于<code>systemd</code>命令介绍的博客：</p><blockquote><p><a href="https://www.linuxprobe.com/systemd-command.html" target="_blank" rel="noopener">systemd命令</a></p></blockquote><p>完~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;linux垃圾清理&lt;/p&gt;
    
    </summary>
    
      <category term="计算机基础" scheme="http://tokyle.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="journalctl" scheme="http://tokyle.com/tags/journalctl/"/>
    
      <category term="systemd" scheme="http://tokyle.com/tags/systemd/"/>
    
  </entry>
  
  <entry>
    <title>Centos7安装pip3</title>
    <link href="http://tokyle.com/2019/01/29/Centos7%E5%AE%89%E8%A3%85pip3/"/>
    <id>http://tokyle.com/2019/01/29/Centos7安装pip3/</id>
    <published>2019-01-30T01:58:33.000Z</published>
    <updated>2019-01-30T01:59:22.984Z</updated>
    
    <content type="html"><![CDATA[<p>centos7安装pip3</p><a id="more"></a><p>当前基本拿到手的centos安装的可能都是python2.7，对应的pip版本也很低，很多后面的工具包都安装不了，所以，需要安装个pip3</p><blockquote><p><a href="http://tokyle.com/2018/04/20/Centos%E4%B8%8B%E5%8D%87%E7%BA%A7python2-7%E5%88%B03-6/">python2.7和python3共存</a></p></blockquote><p>安装完python3之后，就可以安装pip</p><h3 id="安装pip"><a href="#安装pip" class="headerlink" title="安装pip"></a>安装pip</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wget --no-check-certificate  https://pypi.python.org/packages/source/p/pip/pip-8.0.2.tar.gz#md5=3a73c4188f8dbad6a1e6f6d44d117eeb</span><br><span class="line"></span><br><span class="line">tar -zxvf pip-8.0.2.tar.gz</span><br><span class="line"></span><br><span class="line">mv pip-8.0.2  /usr/local/pip3</span><br><span class="line"></span><br><span class="line">cd  /usr/local/pip3</span><br><span class="line"></span><br><span class="line">python3 setup.py build</span><br><span class="line"></span><br><span class="line">python3 setup.py install</span><br></pre></td></tr></table></figure><p>测试：<code>pip3 install xmind</code></p><p>需要注意的是的，当前安装的pip3不是最新版本，需要升级：<code>pip3 install --upgrade pip</code></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;centos7安装pip3&lt;/p&gt;
    
    </summary>
    
      <category term="skill" scheme="http://tokyle.com/categories/skill/"/>
    
    
      <category term="Centos7" scheme="http://tokyle.com/tags/Centos7/"/>
    
      <category term="pip3" scheme="http://tokyle.com/tags/pip3/"/>
    
  </entry>
  
  <entry>
    <title>2019年关将至有感</title>
    <link href="http://tokyle.com/2019/01/24/2019%E5%B9%B4%E5%85%B3%E5%B0%86%E8%87%B3%E6%9C%89%E6%84%9F/"/>
    <id>http://tokyle.com/2019/01/24/2019年关将至有感/</id>
    <published>2019-01-25T00:53:07.000Z</published>
    <updated>2019-01-25T00:55:03.239Z</updated>
    
    <content type="html"><![CDATA[<p>2019农历年来临之际有感</p><a id="more"></a><p>年关将近，发发牢骚…<br>近几天“百度已死”的文章铺天盖地，随之而来的很多分析互联网的文章出现，年末了，也扯扯自己感受。最大的感触就是“中国互联网”的确是不再互联。曾经还在百度搜音乐，搜商品..而今，基本都是对应网站（网易云，淘宝）直接搜索。可能也有近几年百度搜索结果太烂的原因，然后呢，不是很关注这行的可能不怎么知道，当前国内互联网，巨头分地，彼此吃像都不怎么样，说到底都是数据，隐私，流量，具体点就是钱。</p><p>微信公众号的内容，普通搜索引擎的爬虫无法收录；<br>淘宝为代表的网购平台, 长时间的封杀搜索引擎爬虫（结果就是搜商品只能淘宝、京东站内搜索）；<br>app之间互转越来越困难（抖音转微信等）<br>加上前段时间的马桶MT，聊天宝，多闪被微信封杀…<br>巨头圈地，彼此不互联貌似已经越来越具象；相比之下，国外谷歌搜索结果仍然可以直连亚马逊…无话可说..</p><p>最后，还是扯到搜索上，当前百度基本我是放弃了，必应最近日子也不好过；最最推荐的方式，就是有能力就买台服务器，自己搭个梯子吧，万里长城永不倒啊（直接买VPN不怎么推荐，有点手段的能把你祖宗辈信息都截到）；科学上网做不到，推荐几个小众的搜索网站：</p><p>无隐私搜索（chrome有插件，地址栏直接输搜索项，实测非常干净）：<br><code>https://www.duckduckgo.com/</code></p><p>类似网站查询网站，可查用户覆盖率和用户标签，其他功能自行体会（有chrome插件）：<br><code>https://www.similarweb.com/</code></p><p>在线问答系统（类似百科）：<br><code>https://www.wolframalpha.com/</code></p><p>（以上网站可能都需要至少科学上网一次装完插件..所以，还是赶紧会科学上网现实，直接Google多方便）</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;2019农历年来临之际有感&lt;/p&gt;
    
    </summary>
    
      <category term="生活" scheme="http://tokyle.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
  </entry>
  
  <entry>
    <title>jmeter吞吐量几个插件介绍</title>
    <link href="http://tokyle.com/2019/01/18/jmeter%E5%90%9E%E5%90%90%E9%87%8F%E5%87%A0%E4%B8%AA%E6%8F%92%E4%BB%B6%E4%BB%8B%E7%BB%8D/"/>
    <id>http://tokyle.com/2019/01/18/jmeter吞吐量几个插件介绍/</id>
    <published>2019-01-18T06:50:55.000Z</published>
    <updated>2019-01-18T06:51:35.380Z</updated>
    
    <content type="html"><![CDATA[<p>几个jmeter吞吐量相关插件</p><a id="more"></a><h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><p>测试接口：获取系统时间<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET http://192.168.0.1:8080/api/v1/Other/GetServiceTime</span><br></pre></td></tr></table></figure></p><p>jmeter脚本结构：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 线程组</span><br><span class="line">-- HTTP信息头管理器</span><br><span class="line">    -- Throughput Controller 1</span><br><span class="line">    -- GetService Time 1</span><br><span class="line">    -- Throughput Controller 2</span><br><span class="line">    -- GetService Time 2</span><br><span class="line">    -- 查看结果树</span><br></pre></td></tr></table></figure></p><h3 id="吞吐量控制器（Throughput-Controller）"><a href="#吞吐量控制器（Throughput-Controller）" class="headerlink" title="吞吐量控制器（Throughput Controller）"></a>吞吐量控制器（Throughput Controller）</h3><p>这个组件，其实按照我们的理解，不应该翻译成吞吐量控制器，这个组件的作用是控制子节点执行频率，有两个控制方式：</p><ol><li>Total Executions(执行总次数):控制执行次数</li><li>Percent Executions(执行百分比)：执行设置的测试计划的总测试次数的百分比</li></ol><ul><li>测试计划总测试次数在线程组处设置，总次数=（Number of Threaders(users) * Loop Count）</li></ul><p>这两个很好理解，选择模式为总次数，设置几次，就执行几次；选模式为百分比，执行次数就是总次数的百分之n</p><p>这个组件，还有个<code>per user</code>选项</p><ul><li><p>勾选：会按照每个线程单独计算吞吐量，如线程组设置了5个线程，循环次数为2的情况，吞吐量为1时，吞吐量的子节点每个线程执行一次，总共会执行5次。</p></li><li><p>不勾选：按照全局的执行数次进行计数，如线程组设置了5个线程，循环次数为2的情况，吞吐量为1时，吞吐量的子节点仅会执行一次。</p></li></ul><h4 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h4><p>线程组：5个线程，循环次数2次（测试计划总次数为10）</p><ol><li><p>没有 Throughput Controller 这个组件，直接执行，在查看结果树种会有<strong>10</strong>条记录；</p></li><li><p>有Throughput Controller，模式选择Total Executions，Throughput设置为1，不勾选<code>Per User</code>，点击执行，查看结果树会有<strong>1</strong>条记录；（设置的throughput）</p></li><li><p>有Throughput Controller，模式选择Total Executions，Throughput设置为1，<strong>勾选</strong><code>Per User</code>，点击执行，查看结果树会有<strong>5</strong>条记录；（线程数*设置的throughput）</p></li><li><p>有Throughput Controller，模式选择Percent Executions，Throughput设置为40，不勾选<code>Per User</code>，点击执行，查看结果树会有<strong>4</strong>条记录；（设置的throughput% * 总次数）</p></li><li><p>有Throughput Controller，模式选择Percent Executions，Throughput设置为40，<strong>勾选</strong><code>Per User</code>，点击执行，查看结果树会有<strong>5</strong>条记录；（一个用户的吞吐量（1<em>循环次数）</em>设置的throurhput%，四舍五入之后，相加 ）（注意会有四舍五入，所以，当百分比设置为20%时候，一个用户的吞吐量的20%就是 1<em>2</em>20%，直接四舍五入成了0，最后在查看结果树，就看不见执行记录）</p></li></ol><h3 id="Constant-Timer"><a href="#Constant-Timer" class="headerlink" title="Constant Timer"></a>Constant Timer</h3><p>这个就可以理解为  思考时间（thinktime），单位是毫秒</p><p><strong>作用域为当前线程组</strong></p><h4 id="实验-1"><a href="#实验-1" class="headerlink" title="实验"></a>实验</h4><p>jmeter测试脚本层级：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 线程组</span><br><span class="line">-- HTTP信息头管理器</span><br><span class="line">    -- GetServiceTim1-$&#123;__time(YMDHMS,)&#125;</span><br><span class="line">    -- Constant Timer（3000 ms）</span><br><span class="line">    -- GetServiceTim2-$&#123;__time(YMDHMS,)&#125;</span><br><span class="line">    -- GetServiceTim3-$&#123;__time(YMDHMS,)&#125;</span><br><span class="line">    -- GetServiceTim4-$&#123;__time(YMDHMS,)&#125;</span><br><span class="line">    -- 查看结果树</span><br></pre></td></tr></table></figure></p><p>点击执行，在点击执行后3s，GetServiceTim1开始执行，再过3s，GetServiceTim2执行，以此类推</p><h3 id="Constant-Throughput-Timer（固定QPS）"><a href="#Constant-Throughput-Timer（固定QPS）" class="headerlink" title="Constant Throughput Timer（固定QPS）"></a>Constant Throughput Timer（固定QPS）</h3><p>这个组件就是给需要特定QPS的场景，组件里有两个菜单：<br>Target throughput(in samples per minute)：目标QPS，单位是分钟，1200/min -&gt; 20/s<br>Calculate Throughput based on：计算基准，有五种<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">This thread only ：分别控制每个线程的吞吐量，选择这种模式时，总的吞吐量为设置的 target Throughput 乘以线程的数量</span><br><span class="line"></span><br><span class="line">All active threads ： 设置的target Throughput 将分配在每个活跃线程上，每个活跃线程在上一次运行结束后等待合理的时间后再次运行。活跃线程指同一时刻同时运行的线程。</span><br><span class="line"></span><br><span class="line">All active threads in current thread group ：设置的target Throughput将分配在当前线程组的每一个活跃线程上，当测试计划中只有一个线程组时，该选项和All active threads选项的效果完全相同。</span><br><span class="line"></span><br><span class="line">All active threads （shared ）：与All active threads 的选项基本相同，唯一的区别是，每个活跃线程都会在所有活跃线程上一次运行结束后等待合理的时间后再次运行。</span><br><span class="line"></span><br><span class="line">All cative threads in current thread group （shared ）：与All active threads in current thread group 基本相同，唯一的区别是，每个活跃线程都会在所有活跃线程的上一次运行结束后等待合理的时间后再次运行。</span><br></pre></td></tr></table></figure></p><h4 id="实验-2"><a href="#实验-2" class="headerlink" title="实验"></a>实验</h4><p>线程数设置为10，循环次数：永远，持续时间90s<br>jmeter 脚本层级结构：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 线程组</span><br><span class="line">-- HTTP信息头管理器</span><br><span class="line">    -- Constant Throughput Timer</span><br><span class="line">    -- GetServiceTime接口</span><br><span class="line">    -- 查看结果树</span><br><span class="line">    -- 聚合报告</span><br><span class="line">    -- jp@gc - Transactions per Second</span><br></pre></td></tr></table></figure></p><ol><li><p>target throughput设置：1200/m（20/s），模式选择：this thread only，点击执行，当前QPS为 <code>20*10（线程数）=200/s</code></p></li><li><p>target throughput设置：1200/m（20/s），模式选择: All active threads，点击执行，当前QPS为 <code>20/s</code><br>(All active threads （shared ）和All cative threads in current thread group （shared ）没怎么实验，感觉至少没怎么用到。。。主要是懒。。)</p></li></ol><p>完~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;几个jmeter吞吐量相关插件&lt;/p&gt;
    
    </summary>
    
    
      <category term="jmeter" scheme="http://tokyle.com/tags/jmeter/"/>
    
  </entry>
  
  <entry>
    <title>Jmeter压测关联接口</title>
    <link href="http://tokyle.com/2019/01/16/Jmeter%E5%8E%8B%E6%B5%8B%E5%85%B3%E8%81%94%E6%8E%A5%E5%8F%A3/"/>
    <id>http://tokyle.com/2019/01/16/Jmeter压测关联接口/</id>
    <published>2019-01-17T04:15:43.000Z</published>
    <updated>2019-01-17T04:19:13.370Z</updated>
    
    <content type="html"><![CDATA[<p>jmeter关联接口性能测试</p><a id="more"></a><h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><p>进行接口性能测试时候，尤其是登录类接口，经常需要先进行登录，然后拿到登录返回的token，比如sessionid，来作为参数传给下一个接口作为入参</p><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>测试接口：<br>登录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">POST http://192.168.0.1:8080/api/Login</span><br><span class="line"></span><br><span class="line">POST data:</span><br><span class="line">&#123;</span><br><span class="line">    &quot;mobileId&quot;:&quot;ad9ec085&quot;,</span><br><span class="line">    &quot;loginUrl&quot;:&quot;P00019452&quot;,</span><br><span class="line">    &quot;simId&quot;:&quot;|&quot;,</span><br><span class="line">    &quot;phoneModel&quot;:&quot;vivo vivo X6SPlus D&quot;,</span><br><span class="line">    &quot;phoneSysVersion&quot;:&quot;5.1.1&quot;,</span><br><span class="line">    &quot;appVersion&quot;:&quot;4.2.0&quot;,</span><br><span class="line">    &quot;language&quot;:&quot;ZH-CN&quot;,</span><br><span class="line">    &quot;isClearGesturePwd&quot;:0,</span><br><span class="line">    &quot;companyCode&quot;:&quot;test&quot;,</span><br><span class="line">    &quot;registrationId&quot;:&quot;120c83f7601a92735ae&quot;,</span><br><span class="line">    &quot;isAutoLogin&quot;:&quot;0&quot;,</span><br><span class="line">    &quot;sign&quot;:&quot;a8a922d705c15686232d963e3ce9461aa96df4689420e5abab76535c00532417&quot;,</span><br><span class="line">    &quot;timeStamp&quot;:&quot;20181029101835&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>接口返回信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;result&quot;:true,</span><br><span class="line">    &quot;data&quot;:&#123;</span><br><span class="line">        &quot;sysPara&quot;:&#123;</span><br><span class="line">            &quot;CancelAttachmentAmount&quot;:&quot;0&quot;,</span><br><span class="line">            &quot;CustomerIsVisible&quot;:&quot;N&quot;,</span><br><span class="line">            &quot;ExceptionAttachmentAmount&quot;:&quot;0&quot;,</span><br><span class="line">            &quot;IsAllowRevoke&quot;:&quot;N&quot;,</span><br><span class="line">            &quot;IsNeedApproveComment&quot;:&quot;N&quot;,</span><br><span class="line">            &quot;IsNeedOTReason&quot;:&quot;N&quot;,</span><br><span class="line">            &quot;IsNeedRejectComment&quot;:&quot;Y&quot;,</span><br><span class="line">            &quot;IsShowOTType&quot;:&quot;1&quot;,</span><br><span class="line">            &quot;LeaveAttachmentAmount&quot;:&quot;2&quot;,</span><br><span class="line">            &quot;OTAttachmentAmount&quot;:&quot;0&quot;,</span><br><span class="line">            &quot;OTDayTypeIsVisible&quot;:&quot;N&quot;,</span><br><span class="line">            &quot;ShiftAttachmentAmount&quot;:&quot;0&quot;,</span><br><span class="line">            &quot;isNeedOTExplain&quot;:&quot;1&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;userInfo&quot;:&#123;</span><br><span class="line">            &quot;BackGroundVersion&quot;:&quot;Y1&quot;,</span><br><span class="line">            &quot;GesturePwd&quot;:&quot;&quot;,</span><br><span class="line">            &quot;IsValid&quot;:true,</span><br><span class="line">            &quot;LoginName&quot;:&quot;P00019452&quot;,</span><br><span class="line">            &quot;ModuleList&quot;:Array[9],</span><br><span class="line">            &quot;PersonID&quot;:&quot;www-2f7f-4203-23212-5cc00acbcd0a&quot;,</span><br><span class="line">            &quot;ServiceTime&quot;:&quot;11:37&quot;,</span><br><span class="line">            &quot;SessionId&quot;:&quot;19431489-f4df-4143-b254-15b2f74f449a,a13b648f-6d81-4307-8ee1-b04c5b976246&quot;,</span><br><span class="line">            &quot;TimeClassE&quot;:&quot;&quot;,</span><br><span class="line">            &quot;TimeClassS&quot;:&quot;&quot;,</span><br><span class="line">            &quot;UserID&quot;:&quot;112dcs-6d81-ewew-8ee1-b04c5b976246&quot;,</span><br><span class="line">            &quot;Uuid&quot;:&quot;darcc75332-A4E2-4FB1-AFCF-C6EB07647825&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;user&quot;:&#123;</span><br><span class="line">            &quot;BirthDay&quot;:&quot;&quot;,</span><br><span class="line">            &quot;CompanyEngName&quot;:&quot;&quot;,</span><br><span class="line">            &quot;CompanyName&quot;:&quot;&quot;,</span><br><span class="line">            &quot;DeptId&quot;:&quot;0&quot;,</span><br><span class="line">            &quot;DeptName&quot;:&quot;测试部&quot;,</span><br><span class="line">            &quot;EmpID&quot;:&quot;P00019452&quot;,</span><br><span class="line">            &quot;EmpName&quot;:&quot;虚拟主管&quot;,</span><br><span class="line">            &quot;EnglishName&quot;:&quot;&quot;,</span><br><span class="line">            &quot;Gender&quot;:&quot;&quot;,</span><br><span class="line">            &quot;HeadImgUrl&quot;:&quot;&quot;,</span><br><span class="line">            &quot;LoginName&quot;:&quot;P00019452&quot;,</span><br><span class="line">            &quot;Position&quot;:&quot;测试总经理&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>获取用户信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.0.1:8080/api/History/GetUserInfo?sessionId=7f959f6d-4b63-4d2d-8f88-025dc80e40f9,a13b648f-6d81-4307-8ee1-b04c5b976246</span><br></pre></td></tr></table></figure></p><p>其中获取用户信息接口，需要传<code>sessionId</code>字段，该字段为登录接口的返回字段</p><p>所以需要先登录，再获取sessionid，再传给获取用户信息接口</p><h4 id="jmeter实现"><a href="#jmeter实现" class="headerlink" title="jmeter实现"></a>jmeter实现</h4><p>jmeter也是正常的创建线程组，添加http请求头，添加http请求，添加响应断言，添加查看结果树和聚合报告</p><p>不同的是，在一个线程组中会有两个接口，第一个是登录，第二个是获取用户信息，并且在登录接口后需要添加一个组件：<code>JSON Extractor</code>作用就是提取登录返回的sessionid</p><p>JSON Extractor内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Name of created variables:  变量名（后面参数化的变量名称，这边是sessionid）</span><br><span class="line"></span><br><span class="line">JSON Path expressions:  json提取表达式</span><br></pre></td></tr></table></figure></p><p>根据登录接口返回的层级结构，json表达式可以写成：<code>$.data.userInfo.SessionId</code><br>需要注意的是$后有一个.，表示当前路径</p><p>JSON表达式可以实现，只需要在登录接口后添加一个查看结果树，显示模式切换成<code>JSON Path Tester</code>，右下角就有<code>JSON Path Expression</code>测试</p><p>jmeter关联接口的层级结构：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- 线程组</span><br><span class="line">  - - CSV数据文件设置</span><br><span class="line">  - - HTTP信息头管理器</span><br><span class="line">  - - 登录接口（http请求）</span><br><span class="line">    - - 查看结果树</span><br><span class="line">    - - 响应断言</span><br><span class="line">    - - JSON Extractor</span><br><span class="line">  - - 获取用户信息接口</span><br><span class="line">  - - 响应断言</span><br><span class="line">  - - 查看结果树</span><br><span class="line">  - - 聚合报告</span><br></pre></td></tr></table></figure></p><p>完~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;jmeter关联接口性能测试&lt;/p&gt;
    
    </summary>
    
      <category term="性能测试" scheme="http://tokyle.com/categories/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="jmeter" scheme="http://tokyle.com/tags/jmeter/"/>
    
  </entry>
  
  <entry>
    <title>SqlServer清理事务日志</title>
    <link href="http://tokyle.com/2019/01/13/SqlServer%E6%B8%85%E7%90%86%E4%BA%8B%E5%8A%A1%E6%97%A5%E5%BF%97/"/>
    <id>http://tokyle.com/2019/01/13/SqlServer清理事务日志/</id>
    <published>2019-01-14T01:49:19.000Z</published>
    <updated>2019-01-30T01:34:12.792Z</updated>
    
    <content type="html"><![CDATA[<p>SqlServer事务日志已满解决办法</p><a id="more"></a><h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><p>压测时候，web对接了SqlServer，时间长，SqlServer报了错，事务日志已满，无法查询</p><h3 id="事务日志"><a href="#事务日志" class="headerlink" title="事务日志"></a>事务日志</h3><p>事务日志是一个与数据库文件分开的文件。它存储对数据库进行的所有更改，并全部记录插入、更新、删除、提交、回退和数据库模式变化。事务日志还称作前滚日志或重做日志。</p><p>事务日志是备份和恢复的重要组件，也是使用 SQL Remote 或 [复制代理] 复制数据所必需的。</p><p>在缺省情况下，所有数据库都使用事务日志。事务日志的使用是可选的，但是，除非您因特殊原因而不使用，否则您应始终使用它。运行带有事务日志的数据库可提供更强的故障保护功能、更好的性能以及数据复制功能。</p><h3 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1，数据库属性-选项-恢复模式-选择简单-点击确定</span><br><span class="line"></span><br><span class="line">2，右键数据库-任务-收缩-文件-文件类型-选择日志-收缩操作-选择在释放未使用的空间前重新组织页，选择1M-点击确定</span><br><span class="line"></span><br><span class="line">3，数据库属性-选项-恢复模式-选择完整-点击确定</span><br></pre></td></tr></table></figure><p>完~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;SqlServer事务日志已满解决办法&lt;/p&gt;
    
    </summary>
    
      <category term="性能测试" scheme="http://tokyle.com/categories/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="SqlServer" scheme="http://tokyle.com/tags/SqlServer/"/>
    
  </entry>
  
  <entry>
    <title>zabbix触发器函数介绍</title>
    <link href="http://tokyle.com/2019/01/07/zabbix%E8%A7%A6%E5%8F%91%E5%99%A8%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D/"/>
    <id>http://tokyle.com/2019/01/07/zabbix触发器函数介绍/</id>
    <published>2019-01-07T07:54:52.000Z</published>
    <updated>2019-01-07T07:55:52.702Z</updated>
    
    <content type="html"><![CDATA[<p>zabbix触发器函数说明</p><a id="more"></a><blockquote><p><a href="https://www.zabbix.com/documentation/3.4/zh/manual/appendix/triggers/functions" target="_blank" rel="noopener">触发器函数官方文档</a></p></blockquote><p><strong>函数</strong></p><h3 id="abschange"><a href="#abschange" class="headerlink" title="abschange"></a>abschange</h3><p>描述：最近获取值与之前获取值差的绝对值。</p><p>参数：</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int, str, text, log</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">(最近获取值;之前获取值=abschange)</span><br><span class="line">1;5=4</span><br><span class="line">3;1=2</span><br><span class="line">0;-2.5=2.5</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">0 - 两值相等</span><br><span class="line">1 - 两值不等</span><br></pre></td></tr></table></figure></p><h3 id="avg-sec-num"><a href="#avg-sec-num" class="headerlink" title="avg (sec|#num,)"></a>avg (sec|#num,<time_shift>)</time_shift></h3><p>描述：指定评估期内一个项目的平均值</p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line"></span><br><span class="line">time_shift （可选） - 时间偏移</span><br></pre></td></tr></table></figure></p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ avg(#5) → 五个最新值的平均值</span><br><span class="line">⇒ avg(1h) → 一个小时的平均值</span><br><span class="line">⇒ avg(1h,1d) → 一天前一个小时的平均值。</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.2开始支持time_shift参数。当需要比较当前平均值和指定时间之前的平均值（由time_shift参数指定）时，它就很有用了。</span><br></pre></td></tr></table></figure></p><h3 id="band-sec-num-mask"><a href="#band-sec-num-mask" class="headerlink" title="band (sec|#num,mask,)"></a>band (sec|#num,mask,<time_shift>)</time_shift></h3><p>描述：项目值和掩码的按位与值。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sec (可省略) or #num - 最新的第N个值</span><br><span class="line">mask (必须有) - 64位无符号整数 (0 - 18446744073709551615)</span><br><span class="line">time_shift (可选) - 参照 avg()</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: int</span><br><span class="line"></span><br><span class="line">注意此处的 #num 参数和其它一些函数的作用不用 (参照 last()).</span><br><span class="line"></span><br><span class="line">尽管以二进制方式进行比较，但是所有的参数和返回值都是十进制数。 例如, 检查第三位是和4做比较而不是100。</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ band(,12)=8 or band(,12)=4 → 第三位和第四位被设置，但不是同时</span><br><span class="line">⇒ band(,20)=16 → 第三位没有被设置但是第五位被设置了。</span><br><span class="line"></span><br><span class="line">从Zabbix 2.2.0开始支持该函数。</span><br></pre></td></tr></table></figure></p><h3 id="change"><a href="#change" class="headerlink" title="change"></a>change</h3><p>描述：最近获取值与之前获取值的差。</p><p>说明：</p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">支持的值类型: float, int, str, text, log</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">(最近获取值;之前获取值=change)</span><br><span class="line">1;5=+4</span><br><span class="line">3;1=-2</span><br><span class="line">0;-2.5=-2.5</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">0 - 两值相等</span><br><span class="line">1 - 两值不等</span><br></pre></td></tr></table></figure></p><h3 id="count-sec-num"><a href="#count-sec-num" class="headerlink" title="count (sec|#num,,,)"></a>count (sec|#num,<pattern>,<operator>,<time_shift>)</time_shift></operator></pattern></h3><p>描述：指定评估期内值的个数。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line">pattern (可选) - 所需模式 (整型项目 - 精确匹配; 浮点型项目 - 误差值0.000001内)</span><br><span class="line">operator (可选)</span><br><span class="line"></span><br><span class="line">支持的 operators:</span><br><span class="line">eq - 相等</span><br><span class="line">ne - 不相等</span><br><span class="line">gt - 大于</span><br><span class="line">ge - 大于等于</span><br><span class="line">lt - 小于</span><br><span class="line">le - 小于等于</span><br><span class="line">like - 只要包含pattern (区分大小写)就被匹配</span><br><span class="line">band - 按位与</span><br><span class="line">regexp - 给定 pattern 的正则表达式，区分大小写</span><br><span class="line">iregexp - 给定 pattern 的正则表达式，不区分大小写</span><br><span class="line"></span><br><span class="line">注意:</span><br><span class="line">eq (默认), ne, gt, ge, lt, le, band, regexp, iregexp 支持整数型项目</span><br><span class="line">eq (默认), ne, gt, ge, lt, le, regexp, iregexp 支持浮点型项目</span><br><span class="line">like (默认), eq, ne, regexp, iregexp支持string, text and log 型项目</span><br><span class="line"></span><br><span class="line">time_shift (可选) - 参照 avg()</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int, str, text, log</span><br><span class="line"></span><br><span class="line">band 做第三个参数时，第二个 pattern 参数可以用两个数字表示， 以&apos;/&apos;分隔: number_to_compare_with/mask。 count() 计算项目值和掩码的按位与，再和 number_to_compare_with 比较的结果。如果按位与值等于 number_to_compare_with ，则计数。</span><br><span class="line">如果掩码值等于 number_to_compare_with, 只需要指定掩码值。</span><br><span class="line"></span><br><span class="line">regexp 或 iregexp 做为第三个参数时，第二个 pattern 参数可以是一个普通的或 global ( &apos;@&apos; 开头)的正则表达式。 避免全局表达式大小写敏感从全局表达式设置中继承。为了方便正则匹配，浮点型数值通常以四位小数方式表示。也应该注意大数值在以十进制（存储在数据库中）和二进制（zabbix server中使用）表示中的区别，可能会影响十进制的第四位小数。 </span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ count(10m) → 过去10分钟值的个数</span><br><span class="line">⇒ count(10m,12) → 过去10分钟值等于12的个数</span><br><span class="line">⇒ count(10m,12,&quot;gt&quot;) → 过去10分钟值大于12的个数</span><br><span class="line">⇒ count(#10,12,&quot;gt&quot;) → 最新10个值，它们的值大于12的个数</span><br><span class="line">⇒ count(10m,12,&quot;gt&quot;,1d) → 一天前的前十分钟值大于12的个数</span><br><span class="line">⇒ count(10m,6/7,&quot;band&quot;) → 过去10分钟值最低三个有效位是 &apos;110&apos; (十进制)的个数。</span><br><span class="line">⇒ count(10m,,,1d) → 一天前的前十分钟值的个数</span><br><span class="line"></span><br><span class="line">从Zabbix 1.6.1开始支持#num参数。</span><br><span class="line">从Zabbix 1.8.2开始支持time_shift参数和字符串运算符。</span><br><span class="line">从Zabbix 2.2.0开始支持band运算符。</span><br><span class="line">从Zabbix 3.2.0开始支持regexp, iregexp运算符。</span><br></pre></td></tr></table></figure></p><h3 id="date"><a href="#date" class="headerlink" title="date"></a>date</h3><p>描述：    当前日期，以YYYYMMDD格式表示。</p><p>说明：</p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: any</span><br><span class="line"></span><br><span class="line">返回值如: 20150731</span><br></pre></td></tr></table></figure></p><h3 id="dayofmonth"><a href="#dayofmonth" class="headerlink" title="dayofmonth"></a>dayofmonth</h3><p>描述：当前是本月的第几天，取值范围从1到31。</p><p>说明：</p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: any</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.5开始支持该函数。</span><br></pre></td></tr></table></figure></p><h3 id="dayofweek"><a href="#dayofweek" class="headerlink" title="dayofweek"></a>dayofweek</h3><p>描述：当前是本周的第几天，取值范围从1到7 (周一 - 1, 周日 - 7)。</p><p>说明：</p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: any</span><br></pre></td></tr></table></figure></p><h3 id="delta-sec-num"><a href="#delta-sec-num" class="headerlink" title="delta (sec|#num,)"></a>delta (sec|#num,<time_shift>)</time_shift></h3><p>描述：指定评估期内最大值和最小值的差(‘max()’ 减去 ‘min()’)。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line">time_shift (可选) - see avg()</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.2开始支持time_shift参数。</span><br></pre></td></tr></table></figure></p><h3 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h3><p>描述：比较最近获取值与之前获取值是否相同。</p><p>说明：</p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int, str, text, log</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">1 - 两值不等</span><br><span class="line">0 - 两值相等</span><br></pre></td></tr></table></figure></p><h3 id="forecast-sec-num-time"><a href="#forecast-sec-num-time" class="headerlink" title="forecast (sec|#num,,time,,)"></a>forecast (sec|#num,<time_shift>,time,<fit>,<mode>)</mode></fit></time_shift></h3><p>描述：项目的未来值，最大值，最小值，差值或平均值。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line">time_shift (可选) - see avg()</span><br><span class="line">time - 需要进行估计的指定时间</span><br><span class="line">fit (可选) - 用于匹配历史数据的函数</span><br><span class="line"></span><br><span class="line">支持的fits:</span><br><span class="line">linear - 线性函数</span><br><span class="line">polynomialN - n次多项式 (1 &lt;= N &lt;= 6)</span><br><span class="line">exponential - 指数函数</span><br><span class="line">logarithmic - 对数函数</span><br><span class="line">power - 幂函数</span><br><span class="line"></span><br><span class="line">注意:</span><br><span class="line">默认是linear , polynomial1 等同于 linear</span><br><span class="line"></span><br><span class="line">mode (可选) - demanded output</span><br><span class="line"></span><br><span class="line">支持的 modes:</span><br><span class="line">value - 值 (默认)</span><br><span class="line">max - 最大值</span><br><span class="line">min - 最小值</span><br><span class="line">delta - 最大值-最小值</span><br><span class="line">avg - 平均值</span><br><span class="line"></span><br><span class="line">注意:</span><br><span class="line">value 估计项目值在此刻now + time</span><br><span class="line">max, min, delta and avg 根据now 和 now + time 时间段估计的项目值确定结果</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">如果返回值大于 999999999999.9999 或者小于 -999999999999.9999, 返回值相应被设置为999999999999.9999 或 -999999999999.9999 。</span><br><span class="line"></span><br><span class="line">只有在表达式被误用时才不被支持（错误的项目类型，无效的参数），出现错误时返回-1。</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ forecast(#10,,1h) → 根据最新的十个值估计一小时后的项目值</span><br><span class="line">⇒ forecast(1h,,30m) → 根据过去一小时的值估计三十分钟后的项目值</span><br><span class="line">⇒ forecast(1h,1d,12h) → 根据一天前的一个小时值估计十二个小时后的项目值</span><br><span class="line">⇒ forecast(1h,,10m,exponential) → 根据过去一小时并按照指数函数方式估计十分钟后的项目值</span><br><span class="line">⇒ forecast(1h,,2h,polynomial3,max) → 根据过去一小时并按照三次多项式方式估计两小时的最大项目值</span><br><span class="line">⇒ forecast(#​2,,​-20m) → 根据最新的两个值估计二十分钟前的项目值 （比使用last()或prev()函数更加精确, 特别是项目很少更新的时候, 比如说, 一小时一次）</span><br><span class="line"></span><br><span class="line">从Zabbix 3.0.0开始支持该函数。</span><br><span class="line">​从Zabbix 3.0.6 和 3.2.2开始支持负的​time值。</span><br><span class="line">通过 predictive trigger functions查看扩展信息。</span><br></pre></td></tr></table></figure></p><h3 id="fuzzytime-sec"><a href="#fuzzytime-sec" class="headerlink" title="fuzzytime (sec)"></a>fuzzytime (sec)</h3><p>描述：检查项目时间戳和zabbix服务器时间相差多大。</p><p>说明：sec - 秒数</p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">0 - 如果项目时间戳和zabbix服务器时间戳之间相差超过指定的时间</span><br><span class="line">1 - 其它。</span><br><span class="line"></span><br><span class="line">常使用system.localtime来检查本地时间是否与zabbix服务器的时间相同。</span><br><span class="line">也可以使用vfs.file.time[/path/file,modify]键值检测文件是否长时间未更新。</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ fuzzytime(60)=0 → 如果时间差超过60秒，就会检测到一个问题</span><br></pre></td></tr></table></figure></p><h3 id="iregexp-pattern"><a href="#iregexp-pattern" class="headerlink" title="iregexp (pattern,)"></a>iregexp (pattern,<sec|#num>)</sec|#num></h3><p>描述：该函数和 regexp() 类似，只是不区分大小写。</p><p>说明：see regexp()</p><p>参数：支持值的类型: str, log, text</p><h3 id="last-sec-num"><a href="#last-sec-num" class="headerlink" title="last (sec|#num,)"></a>last (sec|#num,<time_shift>)</time_shift></h3><p>描述：最近的值。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sec (可省略) or #num - 最新的第N个值</span><br><span class="line">time_shift (可选) - see avg()</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int, str, text, log</span><br><span class="line"></span><br><span class="line">注意此处的 #num 参数和其它一些函数的作用不用。</span><br><span class="line">例如:</span><br><span class="line">last() 通常等同于 last(#1)</span><br><span class="line">last(#3) - 第三个最新值 (不是三个最新值)</span><br><span class="line"></span><br><span class="line">如果在history中同一秒有多个值存在，Zabbix不能保证值的精确顺序。</span><br><span class="line"></span><br><span class="line">从Zabbix 1.6.2开始支持 #num 参数。</span><br><span class="line">从Zabbix 1.8.2开始支持 time_shift 参数。</span><br></pre></td></tr></table></figure></p><h3 id="logeventid-pattern"><a href="#logeventid-pattern" class="headerlink" title="logeventid (pattern)"></a>logeventid (pattern)</h3><p>描述：检查最近日志记录的EventID是否匹配正则表达式。</p><p>说明：pattern - 使用正则表达式表示需要匹配的模式， POSIX extended 类型。</p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: log</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">0 - 不匹配</span><br><span class="line">1 - 匹配</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.5开始支持该函数</span><br></pre></td></tr></table></figure></p><h3 id="logseverity"><a href="#logseverity" class="headerlink" title="logseverity"></a>logseverity</h3><p>描述：最近日志记录的日志等级。</p><p>说明：</p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: log</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">0 - 默认等级</span><br><span class="line">N - 对应的等级 (整数，常用语Windows event logs: 1 - Information, 2 - Warning, 4 - Error, 7 - Failure Audit, 8 - Success Audit, 9 - Critical, 10 - Verbose).</span><br><span class="line">Zabbix从Windows event log Information域获取日志等级。</span><br></pre></td></tr></table></figure></p><h3 id="logsource-pattern"><a href="#logsource-pattern" class="headerlink" title="logsource (pattern)"></a>logsource (pattern)</h3><p>描述：检查最近的日志记录是否匹配参数的日志来源。</p><p>说明：pattern - string类型</p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: log</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">0 - 不匹配</span><br><span class="line">1 - 匹配</span><br><span class="line">通常用于Windows event logs. 例如, logsource(&quot;VMware Server&quot;).</span><br></pre></td></tr></table></figure></p><h3 id="max-sec-num"><a href="#max-sec-num" class="headerlink" title="max (sec|#num,)"></a>max (sec|#num,<time_shift>)</time_shift></h3><p>描述：    指定评估期内一个项目的最大值。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line">time_shift (可选) - see avg()</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.2开始支持 time_shift 参数。</span><br></pre></td></tr></table></figure></p><h3 id="min-sec-num"><a href="#min-sec-num" class="headerlink" title="min (sec|#num,)"></a>min (sec|#num,<time_shift>)</time_shift></h3><p>描述：指定评估期内一个项目的最小值。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line">time_shift (可选) - see avg(</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.2开始支持 time_shift 参数。</span><br></pre></td></tr></table></figure></p><h3 id="nodata-sec"><a href="#nodata-sec" class="headerlink" title="nodata (sec)"></a>nodata (sec)</h3><p>描述：检查是否没有接收到数据。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sec - 评估期以秒值表示。</span><br><span class="line">时间不应该少于30秒，因为timer处理器每30秒计算一次该函数。</span><br><span class="line"></span><br><span class="line">nodata(0) 不被允许.</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: any</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">1 - 指定评估期没有接收到数据</span><br><span class="line">0 - 其它</span><br><span class="line"></span><br><span class="line">注意，如果在第一个参数指定的时间内出现以下问题，该函数会报错:</span><br><span class="line">- 没有数据以及Zabbix server被重启</span><br><span class="line">- 没有数据以及修复完成</span><br><span class="line">- 没有数据以及项目被添加或重新激活</span><br><span class="line">错误显示在触发器configuration的 Info 列 .</span><br></pre></td></tr></table></figure></p><h3 id="now"><a href="#now" class="headerlink" title="now"></a>now</h3><p>描述：距离Epoch (00:00:00 UTC, January 1, 1970)时间的秒数。</p><p>说明：</p><p>参数：支持值的类型: any</p><h3 id="percentile-sec-num-percentage"><a href="#percentile-sec-num-percentage" class="headerlink" title="percentile (sec|#num,,percentage)"></a>percentile (sec|#num,<time_shift>,percentage)</time_shift></h3><p>描述：P-th 一段时间的百分值， P (percentage) 做为第三个参数。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示</span><br><span class="line">time_shift (可选) - see avg()</span><br><span class="line">percentage - 0 and 100 (包括)之间的一个浮点数，小数点后最多四位</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">从Zabbix 3.0.0开始支持该函数。</span><br></pre></td></tr></table></figure></p><h3 id="prev"><a href="#prev" class="headerlink" title="prev"></a>prev</h3><p>描述：前一个值。</p><p>说明：</p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int, str, text, log</span><br><span class="line"></span><br><span class="line">返回值和 last(#2)相同。</span><br></pre></td></tr></table></figure></p><h3 id="regexp-pattern"><a href="#regexp-pattern" class="headerlink" title="regexp (pattern,)"></a>regexp (pattern,<sec|#num>)</sec|#num></h3><p>描述：检查最近的值是否匹配正则表达式。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pattern - 正则表达式, POSIX extended 样式。</span><br><span class="line">sec or #num (可选) - 评估期以秒值或最新值个数（跟在#号后）表示。 这种情况下，可处理一个值以上。</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: str, text, log</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">1 - 找到</span><br><span class="line">0 - 其它</span><br><span class="line"></span><br><span class="line">该函数区分大小写。</span><br></pre></td></tr></table></figure></p><h3 id="str-pattern"><a href="#str-pattern" class="headerlink" title="str (pattern,)"></a>str (pattern,<sec|#num>)</sec|#num></h3><p>描述：从最新值中查找一个字符串。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pattern - string型</span><br><span class="line">sec or #num (可选) - 评估期以秒值或最新值个数（跟在#号后）表示。 这种情况下，可处理一个值以上。</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: str, text, log</span><br><span class="line"></span><br><span class="line">返回值:</span><br><span class="line">1 - 找到</span><br><span class="line">0 - 其它</span><br><span class="line"></span><br><span class="line">该函数区分大小写。</span><br></pre></td></tr></table></figure></p><h3 id="strlen-sec-num"><a href="#strlen-sec-num" class="headerlink" title="strlen (sec|#num,)"></a>strlen (sec|#num,<time_shift>)</time_shift></h3><p>描述：最新值的字符长度（而不是字节数）。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sec (可省略) or #num - 最新的第N个值</span><br><span class="line">time_shift (可选) - see avg()</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: str, text, log</span><br><span class="line"></span><br><span class="line">注意此处的 #num 参数和其它一些函数的作用不用。</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ strlen()(等同于 strlen(#1)) → 最新值的长度</span><br><span class="line">⇒ strlen(#3) → 最新的第三个值的长度</span><br><span class="line">⇒ strlen(,1d) → 一天前最新值的长度。</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.4开始支持该函数。</span><br></pre></td></tr></table></figure></p><h3 id="sum-sec-num"><a href="#sum-sec-num" class="headerlink" title="sum (sec|#num,)"></a>sum (sec|#num,<time_shift>)</time_shift></h3><p>描述：指定评估期内项目值的和。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示。</span><br><span class="line">time_shift (可选) - see avg()</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">从Zabbix 1.8.2开始支持 time_shift 参数。</span><br></pre></td></tr></table></figure></p><h3 id="time"><a href="#time" class="headerlink" title="time"></a>time</h3><p>描述：当前时间，以HHMMSS格式表示。</p><p>说明：</p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: any</span><br><span class="line"></span><br><span class="line">返回值如: 123055</span><br></pre></td></tr></table></figure></p><h3 id="timeleft-sec-num-threshold"><a href="#timeleft-sec-num-threshold" class="headerlink" title="timeleft (sec|#num,,threshold,)"></a>timeleft (sec|#num,<time_shift>,threshold,<fit>)</fit></time_shift></h3><p>描述：达到阀值需要多久时间。</p><p>说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sec or #num - 评估期以秒值或最新值个数（跟在#号后）表示。</span><br><span class="line">time_shift (可选) - see avg()</span><br><span class="line">threshold - 阀值</span><br><span class="line">fit (可选) - see forecast()</span><br></pre></td></tr></table></figure></p><p>参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">支持值的类型: float, int</span><br><span class="line"></span><br><span class="line">如果返回值大于 999999999999.9999, 则被设置为999999999999.9999.</span><br><span class="line"></span><br><span class="line">如果达不到阀值则将返回值设置为999999999999.9999。</span><br><span class="line"></span><br><span class="line">只有在表达式被误用时才不被支持（错误的项目类型，无效的参数），出现错误时返回-1。</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">⇒ timeleft(#10,,0) → 根据最新的十个值估计项目值达到0需要的时间</span><br><span class="line">⇒ timeleft(1h,,100) → 根据过去一小时的值估计项目值达到100需要的时间</span><br><span class="line">⇒ timeleft(1h,1d,0) → 根据一天前的一个小时值估计项目值达到0需要的时间</span><br><span class="line">⇒ timeleft(1h,,200,polynomial2) → 根据过去一小时并按照二次多项式方式估计项目值达到200需要的时间</span><br><span class="line"></span><br><span class="line">从Zabbix 3.0.0开始支持该函数。</span><br><span class="line">从Zabbix 3.0.6 和 3.2.2开始支持Unit symbols 的 ​threshold 参数。</span><br><span class="line">通过 predictive trigger functions查看扩展信息。</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;zabbix触发器函数说明&lt;/p&gt;
    
    </summary>
    
      <category term="skill" scheme="http://tokyle.com/categories/skill/"/>
    
    
      <category term="zabbix3.4" scheme="http://tokyle.com/tags/zabbix3-4/"/>
    
  </entry>
  
  <entry>
    <title>zabbix监控磁盘使用率</title>
    <link href="http://tokyle.com/2018/12/29/zabbix%E7%9B%91%E6%8E%A7%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E7%8E%87/"/>
    <id>http://tokyle.com/2018/12/29/zabbix监控磁盘使用率/</id>
    <published>2018-12-29T08:38:48.000Z</published>
    <updated>2018-12-29T08:54:51.910Z</updated>
    
    <content type="html"><![CDATA[<p>zabbix各种键值</p><a id="more"></a><p>做grafana对接zabbix展示磁盘指定分区当前使用百分比时候，找到了一篇总结了zabbix各种键值的博客，搬运来做记录</p><h3 id="监控磁盘"><a href="#监控磁盘" class="headerlink" title="监控磁盘"></a>监控磁盘</h3><p>zabbix监控linux不用分区磁盘使用量百分比方式：<br>配置-模板-Template OS Linux-自动发现规则-Mounted filesystem discovery-监控项原型，添加两个监控项，used以及pused（百分比）</p><p>used<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">名称：Used disk space on $1</span><br><span class="line"></span><br><span class="line">类型：zabbix客户端</span><br><span class="line"></span><br><span class="line">键值：“vfs.fs.size[/elasticsearch,used]”</span><br><span class="line"></span><br><span class="line">信息类型：数字（无正负）</span><br><span class="line"></span><br><span class="line">单位：B</span><br></pre></td></tr></table></figure></p><p>pused<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">名称：Used disk space on $1 (percentage)</span><br><span class="line"></span><br><span class="line">类型：zabbix客户端</span><br><span class="line"></span><br><span class="line">键值：“vfs.fs.size[/elasticsearch,pused]”</span><br><span class="line"></span><br><span class="line">信息类型：浮点型</span><br><span class="line"></span><br><span class="line">单位：%</span><br></pre></td></tr></table></figure></p><p>然后将图加进去：<code>图形原型</code>,”Disk space usage /elasticsearch”，选择<code>添加原型</code>，选择”Template OS Linux: Used disk space on /elasticsearch”保存，完成。</p><h3 id="各键值"><a href="#各键值" class="headerlink" title="各键值"></a>各键值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br></pre></td><td class="code"><pre><span class="line">以下表格是zabbix agent所支持的所有key列表，添加一项监控的时候，首先想到的应该是zabbix agent是否已经有相关的key存在，而不是自己去写脚本来获取key。</span><br><span class="line"></span><br><span class="line">agent.hostname</span><br><span class="line">返回被监控端名称(字符串)</span><br><span class="line"></span><br><span class="line">agent.ping</span><br><span class="line">检测被监控端是否存活(1:运行中 其他:未运行)-使用函数 nodata()检测客户端是否正在运行</span><br><span class="line"></span><br><span class="line">agent.version</span><br><span class="line">zabbix agent版本字符串</span><br><span class="line"></span><br><span class="line">kernel.maxfiles</span><br><span class="line">系统支持最大的open files整数</span><br><span class="line"></span><br><span class="line">kernel.maxproc</span><br><span class="line">系统支持最大的进程数量整数</span><br><span class="line"></span><br><span class="line">log[file,&lt;regexp&gt;,&lt;encoding&gt;,&lt;maxlines&gt;,&lt;mode&gt;,&lt;output&gt;]</span><br><span class="line">监控日志文件</span><br><span class="line">file - 文件详细路径</span><br><span class="line">regexp - 正则</span><br><span class="line">encoding - 编码</span><br><span class="line">maxlines - zabbix agent向server或者proxy发送最大的行数。</span><br><span class="line">  这个参数覆盖配置文件zabbxi_agentd.conf中的’MaxLinesPerSecond’</span><br><span class="line">mode - 可选值:all (默认), skip (跳过处理老数据).mode参数从2.0版本开始支持</span><br><span class="line">output - 可选项，输出格式模板.</span><br><span class="line">示例: log[/var/log/syslog] log[/var/log/syslog,error] log[/home/zabbix/logs/logfile,,,100]</span><br><span class="line"></span><br><span class="line">logrt[file_pattern,&lt;regexp&gt;,&lt;encoding&gt;,&lt;maxlines&gt;,&lt;mode&gt;,&lt;output&gt;]</span><br><span class="line">Monitoring of log file with log rotation support.</span><br><span class="line">file_pattern - 文件绝对路径</span><br><span class="line"></span><br><span class="line">net.dns[&lt;ip&gt;,zone,&lt;type&gt;,&lt;timeout&gt;,&lt;count&gt;]</span><br><span class="line">检测DNS服务是否开启0 – DNS挂了  1 - DNS运行中</span><br><span class="line">ip - DNS服务器的ip地址(留空表示使用本地DNS, ignored onWindows)</span><br><span class="line">zone - 需要测试的域名</span><br><span class="line">type - 记录类型 (默认为 SOA),type可选值:  ANY, A, NS, CNAME, MB, MG, MR, PTR, MD, MF, MX, SOA, NULL, WKS (除了windows), HINFO, MINFO, TXT, SRV SRV</span><br><span class="line">timeout (ignored on Windows) – 超时时间(默认1秒)</span><br><span class="line">count (ignored on Windows) – 重试次数 (默认值2)</span><br><span class="line">示例key: net.dns[8.8.8.8,zabbix.com,MX,2,1]</span><br><span class="line"></span><br><span class="line">net.dns.record[&lt;ip&gt;,zone,&lt;type&gt;,&lt;timeout&gt;,&lt;count&gt;]</span><br><span class="line">执行一个DNS查询获取DNS查询数据.</span><br><span class="line">ip - DNS服务器的ip地址(留空表示使用本地DNS, ignored on Windows)</span><br><span class="line">zone - 需要测试的域名</span><br><span class="line">type - 记录类型 (默认SOA,可选值同net.dns)</span><br><span class="line">timeout (ignored on Windows) – 超时时间(默认1秒)</span><br><span class="line">count (ignored on Windows) – 重试次数 (默认值2)</span><br><span class="line">示例key: net.dns.record[8.8.8.8,ttlsa.com,MX,2,1]</span><br><span class="line"></span><br><span class="line">net.if.collisions[if]</span><br><span class="line">Out-of-window collision.Number of collisions. Integer.if - 网卡</span><br><span class="line"></span><br><span class="line">net.if.discovery</span><br><span class="line">列出网卡.通常用于低级别的discovery.JSON对象</span><br><span class="line"></span><br><span class="line">net.if.in[if,&lt;mode&gt;]</span><br><span class="line">网卡入口流量整数.</span><br><span class="line">if - 网卡名称</span><br><span class="line">mode - 可用值: bytes - 字节数 (默认)</span><br><span class="line">packets - 包数量</span><br><span class="line">errors - 错误数量</span><br><span class="line">dropped - 丢包数量</span><br><span class="line">示例keys: net.if.in[eth0,errors] net.if.in[eth0]</span><br><span class="line"></span><br><span class="line">net.if.out[if,&lt;mode&gt;]</span><br><span class="line">网卡出口流量（参数参见net.if.in）</span><br><span class="line"></span><br><span class="line">net.if.total[if,&lt;mode&gt;]</span><br><span class="line">网卡进/出流量的总和（参数参见net.if.in）</span><br><span class="line"></span><br><span class="line">net.tcp.listen[port]</span><br><span class="line">检测端口是否开启0 – （not listen） 1 –  in LISTEN stateport</span><br><span class="line">示例: net.tcp.listen[80]</span><br><span class="line"></span><br><span class="line">net.tcp.port[&lt;ip&gt;,port]</span><br><span class="line">是否可以连接到指定的TCP端口0 – cannot connect 1 – can connect</span><br><span class="line">   ip - IP地址(默认是 127.0.0.1)</span><br><span class="line">   port - 端口</span><br><span class="line">范例: net.tcp.port[,80] 检测web服务器端口是否运行中</span><br><span class="line"></span><br><span class="line">net.tcp.service[service,&lt;ip&gt;,&lt;port&gt;]</span><br><span class="line">检测服务是否开启，并且端口可用0 – 服务挂了 1 – 服务运行中</span><br><span class="line">    service - 如下:ssh, ntp, ldap, smtp, ftp, http, pop, nntp,imap, tcp, https, telnet</span><br><span class="line">    ip - IP地址 (默认127.0.0.1)</span><br><span class="line">    port - 端口 (默认情况为标准端口号)</span><br><span class="line">示例key: net.tcp.service[ftp,,45]</span><br><span class="line"></span><br><span class="line">net.tcp.service.perf[service,&lt;ip&gt;,&lt;port&gt;]</span><br><span class="line">检测服务器性能0 – 服务挂了; seconds – 链接到服务器端口消耗的时间</span><br><span class="line">service - 如下:ssh, ntp, ldap, smtp, ftp, http, pop, nntp,imap, tcp, https, telnet</span><br><span class="line">ip - IP地址 (默认127.0.0.1)</span><br><span class="line">port - 端口 (默认情况为标准端口号)</span><br><span class="line">示例key: net.tcp.service.perf[ssh]</span><br><span class="line"></span><br><span class="line">         net.udp.listen[port]</span><br><span class="line"></span><br><span class="line">proc.mem[&lt;name&gt;,&lt;user&gt;,&lt;mode&gt;,&lt;cmdline&gt;]</span><br><span class="line">用户进程消耗的内存内存使用量 (字节单位).</span><br><span class="line">name - 进程名 (默认值 “all processes”)</span><br><span class="line">user - 用户名 (默认值“all users”)</span><br><span class="line">mode - 可选值: avg, max, min, sum (默认)</span><br><span class="line">cmdline - 命令行过滤(正则表达时)</span><br><span class="line">示例keys: proc.mem[,root] – root的进程消耗了多少内存</span><br><span class="line">    proc.mem[zabbix_server,zabbix] – zabbix用户运行的zabbix_server使用了多少内存</span><br><span class="line">    proc.mem[,oracle,max,oracleZABBIX]</span><br><span class="line"></span><br><span class="line">proc.num[&lt;name&gt;,&lt;user&gt;,&lt;state&gt;,&lt;cmdline&gt;]</span><br><span class="line">某用户某些状态的进程的数量进程数量</span><br><span class="line">name - 进程名称 (默认“all processes”)</span><br><span class="line">user - 用户名 (默认 “all users”)</span><br><span class="line">state - 可用值: all (默认), run,sleep, zomb</span><br><span class="line">cmdline - 命令行过滤(正则表达时)</span><br><span class="line">示例keys: proc.num[,mysql] – MySQL用户运行的进程数量</span><br><span class="line">proc.num[apache2,www-data] – www-data运行了多少个apache2进程</span><br><span class="line">proc.num[,oracle,sleep,oracleZABBIX]</span><br><span class="line">备注：Windows系统只支持name和user两个参数</span><br><span class="line"></span><br><span class="line">sensor[device,sensor,&lt;mode&gt;]</span><br><span class="line">读取硬件传感器</span><br><span class="line">device - 设备名称</span><br><span class="line">sensor - 传感器名称</span><br><span class="line">mode - 可选值:avg, max, min</span><br><span class="line">示例key: sensor[w83781d-i2c-0-2d,temp1] Prior to Zabbix 1.8.4, the sensor[temp1] format was used. On Linux 2.6+, 读取/sys/class/hwmon. On OpenBSD, 读取hw.sensors MIB.示例keys: sensor[cpu0,temp0] – CPU0的温度 sensor[cpu[0-2]$,temp,avg] – cpu平均温度Zabbix 1.8.4开始支持OpenBSD</span><br><span class="line"></span><br><span class="line">system.boottime</span><br><span class="line">系统启动的时间戳整数.unix时间戳</span><br><span class="line"></span><br><span class="line">system.cpu.intr</span><br><span class="line">设备中断整数</span><br><span class="line"></span><br><span class="line">system.cpu.load[&lt;cpu&gt;,&lt;mode&gt;]</span><br><span class="line">CPU负载浮点数</span><br><span class="line">cpu - 可用值: all (默认), percpu (所有在线cpu的负载)</span><br><span class="line">mode - 可用值:avg1 (1分钟 默认值), avg5(5分钟平均), avg15 (15分钟平均值)</span><br><span class="line">范例key: system.cpu.load[,avg5]</span><br><span class="line"></span><br><span class="line">system.cpu.num[&lt;type&gt;]</span><br><span class="line">CPU数量处理器个数type - 可用值: online (默认值), max范例: system.cpu.num</span><br><span class="line"></span><br><span class="line">system.cpu.switches</span><br><span class="line">上下文交换交换次数老命名方式: system[switches]</span><br><span class="line"></span><br><span class="line">system.cpu.util[&lt;cpu&gt;,&lt;type&gt;,&lt;mode&gt;]</span><br><span class="line">CPU利用率百分比</span><br><span class="line">cpu - cpu数量 (默认是所有cpu)</span><br><span class="line">type - 可用值: idle, nice, user (默认), system (windows系统默认值）, iowait, interrupt, softirq,steal</span><br><span class="line">mode - 可用值: avg1 (一分钟平均，默认值), avg5(5分钟平均, avg15 (15分钟平均值)</span><br><span class="line">范例key: system.cpu.util[0,user,avg5]</span><br><span class="line"></span><br><span class="line">system.hostname[&lt;type&gt;]</span><br><span class="line">返回主机名字符串</span><br><span class="line">type (仅用于windows系统) – 可用值: netbios(默认) or host</span><br><span class="line"></span><br><span class="line">system.hw.chassis[&lt;info&gt;]</span><br><span class="line">返回机架信息字符串</span><br><span class="line">info - full (默认), model, serial, type 或vendor</span><br><span class="line">例如: system.hw.chassis</span><br><span class="line">Hewlett-Packard HP Pro 3010 Small Form Factor PC CZXXXXXXXX Desktop]</span><br><span class="line">备注：要root权限，因为这些信息是从内存中读取的。</span><br><span class="line"></span><br><span class="line">system.hw.cpu[&lt;cpu&gt;,&lt;info&gt;]</span><br><span class="line">返回CPU信息字符/数字</span><br><span class="line">cpu - cpu数量或者all (默认)</span><br><span class="line">info - full (默认), curfreq, maxfreq, model 或者vendor</span><br><span class="line">例如: system.hw.cpu[0,vendor] AuthenticAMD 从/proc/cpuinfo、/sys/devices/system/cpu/[cpunum]/cpufreq/cpuinfo_max_freq获取信息. 如果指定了CPU数量和 curfreq或者maxfreq, 将会返回数值(Hz).</span><br><span class="line"></span><br><span class="line">system.hw.devices[&lt;type&gt;]</span><br><span class="line">列出PCI或者USB文本值</span><br><span class="line">type - pci (默认) or usb</span><br><span class="line">范例: system.hw.devices[pci] 00:00.0 Host bridge: Advanced Micro Devices [AMD] RS780 Host Bridge [..] 返回lspci或者lsusb (不带参数)</span><br><span class="line"></span><br><span class="line">system.hw.macaddr[&lt;interface&gt;,&lt;format&gt;]</span><br><span class="line">列出MAC地址字符串</span><br><span class="line">interface - all (默认) 或者正则表达式</span><br><span class="line">format - full (默认) 、short</span><br><span class="line">范例: system.hw.macaddr[&quot;eth0$&quot;,full] [eth0] 00:11:22:33:44:55 列出指定接口mac地址 如果format指定为short，MAC地址相同的将会被忽略掉</span><br><span class="line"></span><br><span class="line">system.localtime[&lt;type&gt;]</span><br><span class="line">系统时间.数字或者字符串</span><br><span class="line"></span><br><span class="line">system.run[command,&lt;mode&gt;]</span><br><span class="line">在制定的主机上运行命令文本</span><br><span class="line">command - 命令</span><br><span class="line">mode - wait (默认值, 执行超时时间), nowait (不等待)最大可用返回512KB数据，包含空白数据。 命令输出数据必须是文本</span><br><span class="line">例如: system.run[ls -l /] – 列出/的文件和目录.</span><br><span class="line">Note: 启用这个方法, agent配置文件必须配置 EnableRemoteCommands=1选项</span><br><span class="line"></span><br><span class="line">system.stat[resource,&lt;type&gt;]</span><br><span class="line">虚拟内存状态数字ent</span><br><span class="line"></span><br><span class="line">system.sw.arch</span><br><span class="line">返回软件信息字符串</span><br><span class="line">范例: system.sw.arch i686</span><br><span class="line"></span><br><span class="line">system.sw.os[&lt;info&gt;]</span><br><span class="line">返回系统信息字符串</span><br><span class="line">info - full (default), short ,name</span><br><span class="line">范例: system.sw.os[short] Ubuntu 2.6.35-28.50-generic 2.6.35.11</span><br><span class="line">信息来自如下文件：</span><br><span class="line">/proc/version [short]</span><br><span class="line">/proc/version_signature [name]</span><br><span class="line">/etc/issue.net</span><br><span class="line"></span><br><span class="line">system.sw.packages[&lt;package&gt;,&lt;manager&gt;,&lt;format&gt;]</span><br><span class="line">已安装软件列表文本值</span><br><span class="line">package - all (默认)或者正则表达式</span><br><span class="line">manager - all (默认) or a package manager</span><br><span class="line">format - full (默认) ，short</span><br><span class="line">范例: system.sw.packages[mini,dpkg,short]</span><br><span class="line"></span><br><span class="line">system.swap.in[&lt;device&gt;,&lt;type&gt;]</span><br><span class="line">交换分区IN（磁盘交换到内存）数字</span><br><span class="line">device - 交换分区设备 (默认all)</span><br><span class="line">type - 可选值: count (swapins数量), sectors(sectors swapped in), pages (pages swapped in).</span><br><span class="line">示例key: system.swap.in[,pages]</span><br><span class="line">数据采集自: Linux 2.4: /proc/swaps, /proc/partitions, /proc/stat</span><br><span class="line">            Linux 2.6: /proc/swaps, /proc/diskstats, /proc/vmstat</span><br><span class="line"></span><br><span class="line">system.swap.out[&lt;device&gt;,&lt;type&gt;]</span><br><span class="line">Swap out (f内存到磁盘) .数字</span><br><span class="line">device - swap设备 (默认all)</span><br><span class="line">type - count (number of swapouts), sectors(sectors swapped out), pages (pages swapped out). 示</span><br><span class="line">例key: system.swap.out[,pages]</span><br><span class="line">数据采集自: Linux 2.4: /proc/swaps, /proc/partitions, /proc/stat</span><br><span class="line">            Linux 2.6: /proc/swaps, /proc/diskstats, /proc/vmstat</span><br><span class="line"></span><br><span class="line">system.swap.size[&lt;device&gt;,&lt;type&gt;]</span><br><span class="line">交换分区大小字节或者百分比</span><br><span class="line">device - 交换分区 (默认值 all)</span><br><span class="line">type - free (free swap space, default), pfree (free swap space, in percent), pused (used swap space, in percent), total (total swap space), used (used swap space)</span><br><span class="line">示例 system.swap.size[,pfree] – 空闲swap百分比</span><br><span class="line"></span><br><span class="line">system.uname</span><br><span class="line">返回主机相信信息.字符串</span><br><span class="line"></span><br><span class="line">system.uptime</span><br><span class="line">系统运行时长(秒)多少秒使用s/uptime来获取</span><br><span class="line"></span><br><span class="line">system.users.num</span><br><span class="line">登陆用户数量多少用户agent使用who命令获取</span><br><span class="line"></span><br><span class="line">vfs.dev.read[&lt;device&gt;,&lt;type&gt;,&lt;mode&gt;]</span><br><span class="line">磁盘读取状态整数，浮点数（如果type为如下）</span><br><span class="line">device - 磁盘设备 (默认值 “all”)  </span><br><span class="line">type - 可选值:sectors, operations, bytes, sps, ops, bps(必须指定, 不同操作系统下不同).  sps, ops, bps stand for: sectors, operations, bytes per second, respectively</span><br><span class="line">mode - 可选值: avg1, avg5, avg15.  </span><br><span class="line">备注: 只有type为sps, ops, bps的时候，第三个参数才被支持。</span><br><span class="line">不同操作系统的TYPE参数： FreeBSD – bps Linux – sps OpenBSD – operations Solaris – bytes</span><br><span class="line">示例key: vfs.dev.read[,operations]</span><br><span class="line"></span><br><span class="line">vfs.dev.write[&lt;device&gt;,&lt;type&gt;,&lt;mode&gt;]</span><br><span class="line">磁盘写入状态整数，</span><br><span class="line">device - 磁盘设备 (默认 all)  </span><br><span class="line">type - sectors, operations, bytes, sps, ops, bps</span><br><span class="line">mode - one of avg1 (default),avg5 , avg15.</span><br><span class="line">example: vfs.dev.write[,operations] Old naming: io</span><br><span class="line"></span><br><span class="line">vfs.file.cksum[file]</span><br><span class="line">计算文件校验 UNIX cksum.</span><br><span class="line">file - 文件完整路径</span><br><span class="line"></span><br><span class="line">vfs.file.contents[file,&lt;encoding&gt;]</span><br><span class="line">获取文本内容若为空，只返回 LF/CR characters.</span><br><span class="line">file - 文件完整路径</span><br><span class="line">例如: vfs.file.contents[/etc/passwd] 文件不可以超过64KB.  </span><br><span class="line"></span><br><span class="line">vfs.file.exists[file]</span><br><span class="line">检测文件是否存在1 – 存在 0 – 不存在</span><br><span class="line">    file - 文件完整路径</span><br><span class="line"></span><br><span class="line">vfs.file.md5sum[file]</span><br><span class="line">文件MD5校验码文件MD5哈希值</span><br><span class="line">file - 完整路径</span><br><span class="line"></span><br><span class="line">vfs.file.regexp[file,regexp,&lt;encoding&gt;,&lt;start line&gt;,&lt;end line&gt;,&lt;output&gt;]</span><br><span class="line">文件中搜索字符串包含字符串的行，或者为空</span><br><span class="line">file - 文件完整路径</span><br><span class="line">regexp - GNU正则表达式</span><br><span class="line">encoding - 编码</span><br><span class="line">start line - 从哪一行开始，默认第一行</span><br><span class="line">end line - 从哪一行结束，默认最后一行</span><br><span class="line">如: vfs.file.regexp[/etc/passwd,zabbix]</span><br><span class="line">    vfs.file.regexp[/path/to/some/file,”([0-9]+)$”,,3,5,\1]</span><br><span class="line">    vfs.file.regexp[/etc/passwd,^zabbix:.:([0-9]+),,,,\1]</span><br><span class="line"></span><br><span class="line">vfs.file.regmatch[file,regexp,&lt;encoding&gt;,&lt;start line&gt;,&lt;end line&gt;]</span><br><span class="line">文件中搜索字符串0 – 未找到 1 – 找到</span><br><span class="line">file - 文件完整路径</span><br><span class="line">regexp - GNU 正则表达式</span><br><span class="line">encoding - 编码</span><br><span class="line">start line - 哪行开始，默认第一行</span><br><span class="line">end line - 哪行结束，默认最后一行</span><br><span class="line">例如: vfs.file.regmatch[/var/log/app.log,error]</span><br><span class="line"></span><br><span class="line">vfs.file.size[file]</span><br><span class="line">文件大小字节fzabbix必须有可读此文件的权限</span><br><span class="line"></span><br><span class="line">vfs.file.time[file,&lt;mode&gt;]</span><br><span class="line">文件时间信息Unix 时间戳.</span><br><span class="line">mode -  modify (默认, 修改时间), access – 最后访问时间, change – 最后改变时间</span><br><span class="line">例如: vfs.file.time[/etc/passwd,modify] 备注：文件大小有限制</span><br><span class="line"></span><br><span class="line">vfs.fs.discovery</span><br><span class="line">列出挂载的文件系统 用于lld.JSON对象</span><br><span class="line"></span><br><span class="line">vfs.fs.inode[fs,&lt;mode&gt;]</span><br><span class="line">inodes数量数字</span><br><span class="line">fs - 文件系统</span><br><span class="line">mode - total (默认), free, used, pfree (空闲百分比), pused (使用百分比)</span><br><span class="line">例如: vfs.fs.inode[/,pfree]</span><br><span class="line"></span><br><span class="line">vfs.fs.size[fs,&lt;mode&gt;]</span><br><span class="line">磁盘空间，返回本地文件系统的使用量字节</span><br><span class="line">fs - 文件系统</span><br><span class="line">mode -  total (默认), free, used, pfree (空闲百分比), pused (使用百分比).</span><br><span class="line">例如: vfs.fs.size[/tmp,free]</span><br><span class="line"></span><br><span class="line">vm.memory.size[&lt;mode&gt;]</span><br><span class="line">内存大小字节或百分比</span><br><span class="line">mode - total (默认), active, anon, buffers, cached, exec, file, free, inactive, pinned, shared, wired, used, pused, available</span><br><span class="line">监控项vm.memory.size[] 允许三种类型的参数：</span><br><span class="line">第一类：包含total - 总内存</span><br><span class="line">第二类： 系统指定内存类型:active, anon, buffers, cached, exec, file, free, inactive,pinned, shared, wired. 第三类：用户级别，一共使用了多少内存，还有多少内存可用: used, pused, available,pavailable.</span><br><span class="line"></span><br><span class="line">web.page.get[host,&lt;path&gt;,&lt;port&gt;]</span><br><span class="line">获取网页内容网页源代码</span><br><span class="line">host - 主机名/域名</span><br><span class="line">path - 文件地址，默认/</span><br><span class="line">port - 端口，默认80返回空字符串表示失败. 例如: web.page.get[</span><br><span class="line"></span><br><span class="line">web.page.perf[host,&lt;path&gt;,&lt;port&gt;]</span><br><span class="line">获取完全加载网页消耗的时长秒，返回0表示失败</span><br><span class="line">host - 主机名/域名</span><br><span class="line">path - html地址，默认是/</span><br><span class="line">port - 端口,默认80</span><br><span class="line"></span><br><span class="line">web.page.regexp[host,&lt;path&gt;,&lt;port&gt;,&lt;regexp&gt;,&lt;length&gt;,&lt;output&gt;]</span><br><span class="line">在网页中搜索字符串  失败则返回空字符 (不匹配).</span><br><span class="line">host - 主机名</span><br><span class="line">path - html文件路径 (默认值 /)</span><br><span class="line">port - 端口 (默认80)</span><br><span class="line">regexp - GNU正则表达式</span><br><span class="line">length - 返回的最大的字符串数量</span><br><span class="line">output - 输出格式模板可选项.</span><br></pre></td></tr></table></figure><h3 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h3><blockquote><p><a href="https://blog.csdn.net/chuang3344/article/details/74081682" target="_blank" rel="noopener">参考博客</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;zabbix各种键值&lt;/p&gt;
    
    </summary>
    
      <category term="skill" scheme="http://tokyle.com/categories/skill/"/>
    
    
      <category term="zabbix3.4" scheme="http://tokyle.com/tags/zabbix3-4/"/>
    
  </entry>
  
  <entry>
    <title>MySQL启用弱口令</title>
    <link href="http://tokyle.com/2018/12/25/MySQL%E5%90%AF%E7%94%A8%E5%BC%B1%E5%8F%A3%E4%BB%A4/"/>
    <id>http://tokyle.com/2018/12/25/MySQL启用弱口令/</id>
    <published>2018-12-25T07:07:03.000Z</published>
    <updated>2018-12-25T07:08:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL启动弱口令</p><p>有的时候，有点懒，测试环境就想数据库密码简单点，不用什么大小写，特殊字符各种组合</p><a id="more"></a><p>root用户登录<br><code>mysql -uroot -p</code></p><p>查看密码策略：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &apos;validate_password%&apos;;</span><br></pre></td></tr></table></figure></p><p>输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &quot;validate_password%&quot;;</span><br><span class="line">+--------------------------------------+--------+</span><br><span class="line">| Variable_name                        | Value  |</span><br><span class="line">+--------------------------------------+--------+</span><br><span class="line">| validate_password_check_user_name    | OFF    |</span><br><span class="line">| validate_password_dictionary_file    |        |</span><br><span class="line">| validate_password_length             | 8      |</span><br><span class="line">| validate_password_mixed_case_count   | 1      |</span><br><span class="line">| validate_password_number_count       | 1      |</span><br><span class="line">| validate_password_policy             | MEDIUM |</span><br><span class="line">| validate_password_special_char_count | 1      |</span><br><span class="line">+--------------------------------------+--------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p><p>主要修改两个即可：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global validate_password_policy=0;</span><br></pre></td></tr></table></figure></p><p>值含义：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 or LOW Length</span><br><span class="line">1 or MEDIUMLength; numeric, lowercase/uppercase, and special characters</span><br><span class="line">2 or STRONGLength; numeric, lowercase/uppercase, and special characters; dictionary file</span><br></pre></td></tr></table></figure></p><p>另一个：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global validate_password_length=6;</span><br></pre></td></tr></table></figure></p><p>这个值有最小值限制：<code>validate_password_number_count + validate_password_special_char_count + (2 * validate_password_mixed_case_count)</code><br>所以默认的validate_password_length最小值是4</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL启动弱口令&lt;/p&gt;
&lt;p&gt;有的时候，有点懒，测试环境就想数据库密码简单点，不用什么大小写，特殊字符各种组合&lt;/p&gt;
    
    </summary>
    
      <category term="计算机基础" scheme="http://tokyle.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="mysql" scheme="http://tokyle.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Linux几个变量</title>
    <link href="http://tokyle.com/2018/12/24/Linux%E5%87%A0%E4%B8%AA%E5%8F%98%E9%87%8F/"/>
    <id>http://tokyle.com/2018/12/24/Linux几个变量/</id>
    <published>2018-12-24T06:52:46.000Z</published>
    <updated>2018-12-24T06:54:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>linux shell中部分变量的含义</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$0：脚本名</span><br><span class="line"></span><br><span class="line">$1：传给脚本的第一个参数</span><br><span class="line"></span><br><span class="line">$2：传给脚本的第二个参数</span><br><span class="line"></span><br><span class="line">$$：脚本运行的PID</span><br><span class="line"></span><br><span class="line">$@：传给脚本的所有参数列表（list形式）</span><br><span class="line"></span><br><span class="line">$*：传给脚本的所有参数列表（字符串形式）</span><br><span class="line"></span><br><span class="line">$#：传给脚本的参数个数</span><br><span class="line"></span><br><span class="line">$?：上个已执行命令的退出状态码，成功为0</span><br></pre></td></tr></table></figure><p>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># test linux variables</span><br><span class="line"># 20181224 by kyle</span><br><span class="line"></span><br><span class="line"># 使用basename获取脚本名，避免输出脚本名时候带上命令:./test1.sh</span><br><span class="line">name=$(basename $0)</span><br><span class="line"></span><br><span class="line">echo </span><br><span class="line">echo &quot;number of variables is：$#&quot;</span><br><span class="line">echo &quot;the first variable is: $1&quot;</span><br><span class="line">echo &quot;the second is: $2&quot;</span><br><span class="line">echo &quot;the scrip&apos;s name is: $name&quot;</span><br><span class="line">echo &quot;the script&apos;s PID is: $$&quot;</span><br><span class="line">echo &quot;the parameters are: $@&quot;</span><br><span class="line">echo &quot;the parameter list is: $*&quot;</span><br><span class="line">echo &quot;show script stat: $?&quot;</span><br><span class="line">echo</span><br></pre></td></tr></table></figure></p><p>执行结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mountTest]# ./VariablesTest.sh </span><br><span class="line"></span><br><span class="line">number of variables is：0</span><br><span class="line">the first variable is: </span><br><span class="line">the second is: </span><br><span class="line">the scrip&apos;s name is: VariablesTest.sh</span><br><span class="line">the script&apos;s PID is: 4829</span><br><span class="line">the parameters are: </span><br><span class="line">the parameter list is: </span><br><span class="line">show script stat: 0</span><br></pre></td></tr></table></figure></p><p><strong>比较“$@”和“$*”</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># compare $@ with $*</span><br><span class="line"># 20181224 by kyle</span><br><span class="line"></span><br><span class="line">echo </span><br><span class="line">echo &quot;followed by \$*&quot;</span><br><span class="line">count=1</span><br><span class="line">#</span><br><span class="line">for param in &quot;$*&quot;</span><br><span class="line">do</span><br><span class="line">  echo &quot;\$* Parameter #$count = $param&quot;</span><br><span class="line">  count=$[ $count + 1 ]</span><br><span class="line">done</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">echo </span><br><span class="line">echo &quot;Here is \$@&quot;</span><br><span class="line">count=1</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">for param in &quot;$@&quot;</span><br><span class="line">do</span><br><span class="line">  echo &quot;\$@ Parameter #$count = $param&quot;</span><br><span class="line">  count=$[ $count + 1 ]</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p><p>执行结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mountTest]# ./ShellTest.sh 1 2 3 4 5 </span><br><span class="line"></span><br><span class="line">followed by $*</span><br><span class="line">$* Parameter #1 = 1 2 3 4 5</span><br><span class="line"></span><br><span class="line">Here is $@</span><br><span class="line">$@ Parameter #1 = 1</span><br><span class="line">$@ Parameter #2 = 2</span><br><span class="line">$@ Parameter #3 = 3</span><br><span class="line">$@ Parameter #4 = 4</span><br><span class="line">$@ Parameter #5 = 5</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;linux shell中部分变量的含义&lt;/p&gt;
    
    </summary>
    
      <category term="计算机基础" scheme="http://tokyle.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Centos7" scheme="http://tokyle.com/tags/Centos7/"/>
    
  </entry>
  
  <entry>
    <title>zabbix监控磁盘IO</title>
    <link href="http://tokyle.com/2018/12/21/zabbix%E7%9B%91%E6%8E%A7%E7%A3%81%E7%9B%98IO/"/>
    <id>http://tokyle.com/2018/12/21/zabbix监控磁盘IO/</id>
    <published>2018-12-21T07:53:45.000Z</published>
    <updated>2019-02-27T09:40:35.812Z</updated>
    
    <content type="html"><![CDATA[<p>zabbix监控Linux磁盘IO</p><a id="more"></a><h3 id="前置准备"><a href="#前置准备" class="headerlink" title="前置准备"></a>前置准备</h3><p>首先是查询磁盘类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost script]# fdisk -l</span><br><span class="line"></span><br><span class="line">Disk /dev/vda: 214.7 GB, 214748364800 bytes, 419430400 sectors</span><br></pre></td></tr></table></figure></p><p>服务器上，基本是在vda盘上进行的IO，所以本次就监控vda就可以了<br>或者直接<code>iostat -dxk 2</code>看一下效果，哪个设备是需要进行监控的，直接grep即可</p><p>附linux硬件设备概览(/dev目录下)：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ide硬盘：/dev/hd[a-d]</span><br><span class="line"></span><br><span class="line">SCSI/SATA/USB硬盘：/dev/sd[a-p]</span><br><span class="line"></span><br><span class="line">u盘：/dev/sd[a-p]</span><br><span class="line"></span><br><span class="line">软驱：/dev/fd[0-1]</span><br><span class="line"></span><br><span class="line">打印机：25针：/dev/lp[0-2]；USB: /dev/usb/lp[0-15]</span><br><span class="line"></span><br><span class="line">鼠标：usb: /dev/usb/mouse[0-15]；ps2: /dev/psaux</span><br><span class="line"></span><br><span class="line">当前cd rom/dvd rom：/dev/cdrom</span><br><span class="line"></span><br><span class="line">当前鼠标：/dev/mouse</span><br></pre></td></tr></table></figure></p><h3 id="获取item值"><a href="#获取item值" class="headerlink" title="获取item值"></a>获取item值</h3><p>使用zabbix监控磁盘IO，只需要在服务器装一个zabbix_agent就，配置完监控脚本即可，这边也就不多说怎么装，怎么配置了，直接上脚本：</p><p><code>userparameter_mysql.conf</code>(/etc/zabbix/zabbix_agentd.d)添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UserParameter=disk.status[*],/etc/zabbix/script/disk-status.sdisk-status.sh $1</span><br></pre></td></tr></table></figure></p><p>相应的，在<code>/etc/zabbix/script</code>文件下，创建磁盘信息获取脚本<code>disk-status.sh</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim disk-status.sh</span><br></pre></td></tr></table></figure></p><p>内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line"># 参数是否正确</span><br><span class="line">if [ $# -ne &quot;1&quot; ];then</span><br><span class="line">    echo &quot;arg error!&quot; </span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line"></span><br><span class="line">    rrqm)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda|tail -1 |awk &apos;&#123;print $2&#125;&apos;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    wrqm)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &apos;&#123;print $3&#125;&apos;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    rps)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &apos;&#123;print $4&#125;&apos;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    wps)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &apos;&#123;print $5&#125;&apos;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    rKBps)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &apos;&#123;print $6&#125;&apos;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    wKBps)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &apos;&#123;print $7&#125;&apos;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    avgrq-sz)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &apos;&#123;print $8&#125;&apos;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    avgqu-sz)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &apos;&#123;print $9&#125;&apos;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    await)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &apos;&#123;print $10&#125;&apos;</span><br><span class="line">        ;;</span><br><span class="line">    svctm)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &apos;&#123;print $13&#125;&apos;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    util)</span><br><span class="line">        iostat -dxk 1 2|grep -w vda |tail -1 |awk &apos;&#123;print $14&#125;&apos;</span><br><span class="line">        ;;</span><br><span class="line"></span><br><span class="line">    *)</span><br><span class="line">        echo &quot;Usage:$0(rrqm|wrqm|rps|wps|rKBps|wKBps|avgqu-sz|avgrq-sz|await|svctm|util)&quot;</span><br><span class="line">        ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><p>配置完成，重启zabbix_agent：<code>systemctl restart zabbix-agent</code></p><p>验证：<br>使用zabbix_get来验证：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost script]# zabbix_get -s 192.168.0.110 -k disk.status[util]</span><br><span class="line">3.77</span><br></pre></td></tr></table></figure></p><p>util%当前是3.77%，表明zabbix_agent监控配置成功。</p><h3 id="zabbix-web配置"><a href="#zabbix-web配置" class="headerlink" title="zabbix web配置"></a>zabbix web配置</h3><p>在zabbix web界面，配置-&gt; 模板，创建模板，Disk IO<br>在创建的模板中，选择监控项，点击创建监控项，以<code>await</code>为例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">名称：await IO等待时间</span><br><span class="line">类型：zabbix客户端</span><br><span class="line">键值：disk.status[await]</span><br><span class="line">信息类型：浮点数</span><br><span class="line">应用集：Disk IO(自建)</span><br></pre></td></tr></table></figure></p><p>保存即可</p><h3 id="Grafana展示"><a href="#Grafana展示" class="headerlink" title="Grafana展示"></a>Grafana展示</h3><p>zabbix自己的监控图，说实话，有点别扭，可以截止grafana做展示。<br>配置datasource：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name: Zabbix test</span><br><span class="line">Type：Zabbix</span><br><span class="line">URL： http://IP/zabbix/api_jsonrpc.php(IP为zabbix server机器的IP)</span><br><span class="line">Access：Browser</span><br></pre></td></tr></table></figure></p><p>配置Zabbix API details  用户名/密码。是否使用直连数据库的数据，有配置zabbix的数据量的话可以选，不然不选也行；是否启用告警，选启用好了。</p><p>监控的dashboard，创建很简单，也可以直接找做好的导入即可。</p><p>其实挺简单，dashboard设置里面：<br>General，就你dashboard的名字，描述，tag简单的信息；<br>Variables，配置变量，这样既不用写死一个host了：<br>$group<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Name:group</span><br><span class="line">Type:Query</span><br><span class="line">Data source: zabbix test</span><br><span class="line">Refresh On Dashboard Load</span><br><span class="line">Query:*</span><br><span class="line">Multi-value和include all option勾上</span><br></pre></td></tr></table></figure></p><p>一个变量就结束了<br>第二个变量$host:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Name:host</span><br><span class="line">Type:Query</span><br><span class="line">Data source: zabbix test</span><br><span class="line">Refresh On Dashboard Load</span><br><span class="line">Query:$group.*</span><br><span class="line">Multi-value和include all option勾上</span><br></pre></td></tr></table></figure></p><p>保存，这样dashboard的设置就完成了。</p><h4 id="绘图"><a href="#绘图" class="headerlink" title="绘图"></a>绘图</h4><p>进入dashboard，点击<code>Add graph</code>新增图形<br>选择Graph，主要就是设置<code>Metrics</code>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Data source:zabbix test</span><br><span class="line">Query Mode:Metrics</span><br><span class="line">Group: $group</span><br><span class="line">Host: $host</span><br><span class="line">Application: Disk io</span><br><span class="line">item: 选择想展示项即可</span><br></pre></td></tr></table></figure></p><p>完~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;zabbix监控Linux磁盘IO&lt;/p&gt;
    
    </summary>
    
      <category term="Devops" scheme="http://tokyle.com/categories/Devops/"/>
    
    
      <category term="zabbix3.4" scheme="http://tokyle.com/tags/zabbix3-4/"/>
    
      <category term="IO" scheme="http://tokyle.com/tags/IO/"/>
    
  </entry>
  
  <entry>
    <title>Linux磁盘IO监控工具-iostat</title>
    <link href="http://tokyle.com/2018/12/21/Linux%E7%A3%81%E7%9B%98IO%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7-iostat/"/>
    <id>http://tokyle.com/2018/12/21/Linux磁盘IO监控工具-iostat/</id>
    <published>2018-12-21T05:46:34.000Z</published>
    <updated>2018-12-21T05:47:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>Linux磁盘IO监控工具-iostat</p><p>因为使用zabbix监控linux磁盘IO的需求，又折腾了会iostat</p><a id="more"></a><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>iostat安装，直接用<code>yum install iostat</code>这是肯定会报错的，包不存在；iostat是包含在<code>sysstat</code>工具包中的一个工具，使用安装也就是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install sysstat</span><br></pre></td></tr></table></figure></p><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>直接iostat输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yum.repos.d]# iostat</span><br><span class="line">Linux 3.10.0-862.11.6.el7.x86_64 (localhost.localdomain) 12/21/2018 _x86_64_(4 CPU)</span><br><span class="line"></span><br><span class="line">avg-cpu:  %user   %nice %system %iowait  %steal   %idle</span><br><span class="line">           0.20    0.00    0.19    0.40    0.00   99.20</span><br><span class="line"></span><br><span class="line">Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn</span><br><span class="line">sda               6.00         0.56       118.51    1200547  254018670</span><br><span class="line">scd0              0.00         0.00         0.00       1028          0</span><br><span class="line">dm-0              6.00         0.38       118.46     822151  253921784</span><br><span class="line">dm-1              0.00         0.00         0.00       2228          0</span><br><span class="line">dm-2              0.01         0.16         0.04     348695      9471</span><br></pre></td></tr></table></figure></p><p>可以看见系统的基本信息，hostname，CPU数目，系统位数，以及：<br>一些CPU的信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">%user：用户程序占用CPU时间百分比</span><br><span class="line"></span><br><span class="line">%system：系统进程占CPU时间百分比</span><br><span class="line"></span><br><span class="line">%nice：切换优先级的进程占CPU时间百分比</span><br><span class="line"></span><br><span class="line">%iowait：CPU等待输入输出完成时间的百分比</span><br><span class="line"></span><br><span class="line">%steal：管理程序(hypervisor)为另一个虚拟进程提供服务而等待虚拟CPU的百分比</span><br></pre></td></tr></table></figure></p><p>说实话，我是不太理解%steal…有个解释：<code>Steal time is the percentage of time a virtual CPU waits for a real CPU while the hypervisor is servicing another virtual processor</code>，差不多意思是你的虚拟机（VM）会与虚拟环境的宿主机上的多个虚拟机实例共享物理资源。其中之一共享的就是CPU时间切片。如果你的VM的物理机虚拟比是1/4， 那么它的CPU使用率不会限制于25%的CPU时间切片－它能够使用超过它设置的虚拟比。</p><p>通常我们会关注的部分：%iowait的值过高，表示硬盘存在I/O瓶颈，%idle值高，表示CPU较空闲，如果%idle值高但系统响应慢时，有可能是CPU等待分配内存，此时应加大内存容量。%idle值如果持续低于10，那么系统的CPU处理能力相对较低，表明系统中最需要解决的资源是CPU</p><p>磁盘属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tps: 该设备每秒的传输次数（Indicate the number of transfers per second that were issued to the device.）。“一次传输”意思是“一次I/O请求”。多个逻辑请求可能会被合并为“一次I/O请求”</span><br><span class="line"></span><br><span class="line">kB_read/s：每秒从设备（drive expressed）读取的数据量</span><br><span class="line"></span><br><span class="line">kB_wrtn/s：每秒向设备（drive expressed）写入的数据量</span><br><span class="line"></span><br><span class="line">kB_read：读取的总数据量</span><br><span class="line"></span><br><span class="line">kB_wrtn：写入的总数量数据量</span><br></pre></td></tr></table></figure></p><h3 id="iostat语法"><a href="#iostat语法" class="headerlink" title="iostat语法"></a>iostat语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yum.repos.d]# iostat --help</span><br><span class="line">Usage: iostat [ options ] [ &lt;interval&gt; [ &lt;count&gt; ] ]</span><br><span class="line">Options are:</span><br><span class="line">[ -c ] [ -d ] [ -h ] [ -k | -m ] [ -N ] [ -t ] [ -V ] [ -x ] [ -y ] [ -z ]</span><br><span class="line">[ -j &#123; ID | LABEL | PATH | UUID | ... &#125; ]</span><br><span class="line">[ [ -T ] -g &lt;group_name&gt; ] [ -p [ &lt;device&gt; [,...] | ALL ] ]</span><br><span class="line">[ &lt;device&gt; [...] | ALL ]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-c    只显示CPU利用率</span><br><span class="line">-d    只显示磁盘利用率</span><br><span class="line">-p    可以报告出每块磁盘的每个分区的使用情况</span><br><span class="line">-k    以 KB/秒 为单位显示磁盘利用率报告</span><br><span class="line">-x    显示详细信息</span><br><span class="line">-n    显示NFS（network filesystem）报告</span><br></pre></td></tr></table></figure><h3 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yum.repos.d]# iostat -d -k -x 2</span><br><span class="line">Linux 3.10.0-862.11.6.el7.x86_64 (localhost.localdomain) 12/21/2018 _x86_64_(4 CPU)</span><br><span class="line"></span><br><span class="line">Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</span><br><span class="line">sda               0.00     0.01    0.02    5.98     0.56   118.53    39.70     0.12   20.63    5.10   20.69   6.29   3.77</span><br><span class="line">scd0              0.00     0.00    0.00    0.00     0.00     0.00   114.22     0.00   37.06   37.06    0.00  36.56   0.00</span><br><span class="line">dm-0              0.00     0.00    0.01    5.99     0.38   118.48    39.59     0.12   20.72    6.26   20.76   6.28   3.77</span><br><span class="line">dm-1              0.00     0.00    0.00    0.00     0.00     0.00    47.40     0.00    8.22    8.22    0.00   7.71   0.00</span><br><span class="line">dm-2              0.00     0.00    0.01    0.00     0.16     0.04    50.37     0.00   55.11    3.29  178.62   2.30   0.00</span><br></pre></td></tr></table></figure><p>参数含义：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">rrqm/s： 每秒进行 merge 的读操作数目.即 delta(rmerge)/s</span><br><span class="line">wrqm/s： 每秒进行 merge 的写操作数目.即 delta(wmerge)/s</span><br><span class="line">r/s： 每秒完成的读 I/O 设备次数.即 delta(rio)/s</span><br><span class="line">w/s： 每秒完成的写 I/O 设备次数.即 delta(wio)/s</span><br><span class="line">rsec/s： 每秒读扇区数.即 delta(rsect)/s</span><br><span class="line">wsec/s： 每秒写扇区数.即 delta(wsect)/s</span><br><span class="line">rkB/s：  每秒读K字节数.是 rsect/s 的一半,因为每扇区大小为512字节.(需要计算)</span><br><span class="line">wkB/s：  每秒写K字节数.是 wsect/s 的一半.(需要计算)</span><br><span class="line">avgrq-sz：平均每次设备I/O操作的数据大小 (扇区).delta(rsect+wsect)/delta(rio+wio)</span><br><span class="line">avgqu-sz：平均I/O队列长度.即 delta(aveq)/s/1000 (因为aveq的单位为毫秒).</span><br><span class="line">await：   平均每次设备I/O操作的等待时间 (毫秒).即 delta(ruse+wuse)/delta(rio+wio)</span><br><span class="line">svctm：   平均每次设备I/O操作的服务时间 (毫秒).即 delta(use)/delta(rio+wio)</span><br><span class="line">%util：  在 I/O 请求发送到设备期间，占用 CPU 时间的百分比。用于体现设备的带宽利用率。</span><br></pre></td></tr></table></figure></p><p>当%util接近100%时，设备宽带已满</p><h3 id="参考blog"><a href="#参考blog" class="headerlink" title="参考blog"></a>参考blog</h3><p><a href="https://blog.csdn.net/m0_37814112/article/details/80661481" target="_blank" rel="noopener">iostat 监视I/O子系统</a></p><p><a href="https://blog.csdn.net/sunansheng/article/details/51942281" target="_blank" rel="noopener">Linux磁盘I/O性能监控之iostat详解</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Linux磁盘IO监控工具-iostat&lt;/p&gt;
&lt;p&gt;因为使用zabbix监控linux磁盘IO的需求，又折腾了会iostat&lt;/p&gt;
    
    </summary>
    
      <category term="性能测试" scheme="http://tokyle.com/categories/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="Centos7" scheme="http://tokyle.com/tags/Centos7/"/>
    
      <category term="iostat" scheme="http://tokyle.com/tags/iostat/"/>
    
  </entry>
  
  <entry>
    <title>loadrunner压测exchange邮箱</title>
    <link href="http://tokyle.com/2018/12/14/loadrunner%E5%8E%8B%E6%B5%8Bexchange%E9%82%AE%E7%AE%B1/"/>
    <id>http://tokyle.com/2018/12/14/loadrunner压测exchange邮箱/</id>
    <published>2018-12-14T08:32:04.000Z</published>
    <updated>2018-12-14T08:33:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>loadrunner压测exchange邮箱服务</p><p>神需求，折腾半天</p><a id="more"></a><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>boss有个需求，公司自建邮箱，用的是<code>exchange 2016</code>，为了评估当前硬件配置是否足以支撑500+人的收发，需要做性能测试；刚开始接到这个需求时候，觉得不是很难，网上一堆邮箱压测的例子，jmeter有<code>SMTP Sampler</code>、<code>Mail reader Sampler</code>支持smtp，pop3邮箱各种情况，附件都是随便加；就是用loadrunner写脚本也不复杂。</p><p>万万没想到，需求是邮箱服务使用<code>exchange</code>不开pop3和imap，smtp也没有、、、</p><h3 id="OWA"><a href="#OWA" class="headerlink" title="OWA"></a>OWA</h3><p>没办法，jmeter基本是废了，只能用loadrunner了，刚开始想的是loadrunner通过录制outlook客户端来完成脚本，然后，华丽的失败了，压根行不通，outlook直接崩了。。。想到第二种方法，直接用exchange的owa，也就是邮箱的web端录、写脚本。</p><p>这个，最后是实现了，需要说一下的是，OWA是真的坑啊，每个请求，回放时候基本都需要从上一个请求关联cookie，再手动加进去，加了三十个，简直要疯了，以下为最终LR脚本：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br></pre></td><td class="code"><pre><span class="line">Action()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">web_set_sockets_option(&quot;SSL_VERSION&quot;, &quot;2&amp;3&quot;);</span><br><span class="line"></span><br><span class="line">/*Possible OAUTH authorization was detected. It is recommended to correlate the authorization parameters.*/</span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_auto_header(&quot;DNT&quot;,</span><br><span class="line">&quot;1&quot;);</span><br><span class="line"></span><br><span class="line">web_url(&quot;owa&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t1.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;logon.aspx&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/auth/logon.aspx?replaceCurrent=1&amp;url=https%3a%2f%2femail.emailtest.cn%2fowa&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t2.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=15.1.1531/themes/resources/segoeui-regular.eot&quot;, &quot;Referer=https://email.emailtest.cn/owa/auth/logon.aspx?replaceCurrent=1&amp;url=https%3a%2f%2femail.emailtest.cn%2fowa&quot;, ENDITEM, </span><br><span class="line">&quot;Url=15.1.1531/themes/resources/segoeui-semilight.eot&quot;, &quot;Referer=https://email.emailtest.cn/owa/auth/logon.aspx?replaceCurrent=1&amp;url=https%3a%2f%2femail.emailtest.cn%2fowa&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">lr_start_transaction(&quot;login&quot;);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_1&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_submit_form(&quot;auth.owa&quot;, </span><br><span class="line">&quot;Snapshot=t3.inf&quot;, </span><br><span class="line">ITEMDATA, </span><br><span class="line">&quot;Name=username&quot;, &quot;Value=test4@emailtest.cn&quot;, ENDITEM, </span><br><span class="line">&quot;Name=password&quot;, &quot;Value=Test@123&quot;, ENDITEM, </span><br><span class="line">&quot;Name=passwordText&quot;, &quot;Value=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;sessiondata.ashx&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/sessiondata.ashx?appcacheclient=0&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/x-javascript&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t5.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/boot.worldwide.mouse.strings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/boot.owaframe.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/images/0/sprite1.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/globalize/globalize.culture.zh-cn.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=ping.owa?UA=0&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_1&#125;&quot;);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line"></span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_2&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;ev.owa2&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/ev.owa2?ns=PendingRequest&amp;ev=FinishNotificationRequest&amp;UA=0&amp;Fn=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t6.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=text/plain;charset=UTF-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*增加head*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_2&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetFavorites&quot;);</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_3&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">web_custom_request(&quot;service.svc&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetFavorites&amp;EP=1&amp;ID=-1&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t7.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_3&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetFolderMruConfiguration&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_2&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetFolderMruConfiguration&amp;EP=1&amp;ID=-2&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t8.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_4&quot;,</span><br><span class="line">&quot;LB=X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_3&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetOtherMailboxConfiguration&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_3&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetOtherMailboxConfiguration&amp;EP=1&amp;ID=-3&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t9.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/themes/base/images/0/headerbgmaing2.gif&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/themes/base/images/0/headerbgmaing2.png&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;plt1.ashx&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/plt1.ashx?cId=C696115C3ECB481BADFEEBB71DC3DA12&amp;msg=success;200&amp;caTy=0&amp;tg=&amp;MDB=86f42157-91d9-4366-ac62-de53d1dee6e1&amp;nId=0000000000000000&amp;MBX=0df790ce-6185-4b88-af3c-41a33f8b8ce1&amp;sdCoId=C696115C3ECB481BADFEEBB71DC3DA12_1544675566286&amp;sds=200&amp;fe=EXCHANGE001&amp;be=EXCHANGE001&amp;cbe=exchange001.emailtest.cn&amp;dag=DAG&amp;cver=15.1.1531.3&amp;sdver=15.1.1531.3&amp;rpo=0&amp;off=0&amp;pal=0&amp;rfe=0&amp;te=0&amp;PLT=uES,506,uEE,506,reds,23,redE,157,fS,157,dLS,0,dLE,0,cS,0,cE,0,reqS,2,resS,50,resE,345,domL,50&quot;</span><br><span class="line">&quot;,domCLES,1668,domCLEE,1668,domC,1675,lES,1676,lEE,1676,sdR,1482,pEab,1453,pE,1662,rSt,1707,now,2637,nowNoTim,2248,rStNoTim,1318&amp;nowTS=1544675568534&amp;navtp=0&amp;rdct=2&amp;tcd=339&amp;lbv=undefined&amp;icv=undefined&amp;iacr=undefined&amp;lcver=undefined&amp;accu=undefined&amp;acth=undefined&amp;acdc=undefined&amp;lhn=undefined&amp;chn=email.emailtest.cn&amp;acs=1&amp;mf=nf&amp;fc=undefined&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=1&quot;, </span><br><span class="line">&quot;RecContentType=image/gif&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t10.inf&quot;, </span><br><span class="line">&quot;EncType=text/plain;charset=UTF-8&quot;, </span><br><span class="line">&quot;Body=&amp;bt=BootStrap.1,tim=st,-1544675564025,end,-1544675563980&amp;bt=OwaStart.2,tim=st,-1544675563964&amp;bt=ProcessUserConfig.6,tim=st,-1544675563924&amp;bt=MMVMInit.7,tim=st,-1544675563879,end,-1544675563723&amp;bt=MLVMInit.20,tim=st,-1544675563766,end,-1544675563739&amp;bt=FoldersInit.43,tim=st,-1544675563739,end,-1544675563726&amp;bt=VMFactory.48,tim=st,-1544675563679,end,-1544675563096&amp;bt=OWAShellActF.51,tim=st,-1544675563679,end,-1544675563651&amp;bt=OWAShellAct.53,tim=st,-1544675563650,end,-1544675563096&amp;bt=PMVActF.55&quot;</span><br><span class="line">&quot;,tim=st,-1544675563644,end,-1544675563553&amp;bt=PMVAct.56,tim=st,-1544675563553,end,-1544675563100&amp;bt=MMVActF.58,tim=st,-1544675563536,end,-1544675563448&amp;bt=MMVAct.59,tim=st,-1544675563448,end,-1544675563109&amp;bt=MLVActF.61,tim=st,-1544675563322,end,-1544675563290&amp;bt=MLVAct.62,tim=st,-1544675563290,end,-1544675563257&amp;Res=boot.owaframe.0.mouse.js,tim=st,504,fS,3,dLS,0,dLE,0,cS,0,cE,0,reqS,0,resS,87,resE,535,pE,994&amp;Res=boot.owaframe.1.mouse.js,tim=st,506,fS,34,dLS,0,dLE,0,cS,0,cE,0,reqS,0,resS,81,resE,&quot;</span><br><span class="line">&quot;501,pE,1311&amp;Res=boot.owaframe.2.mouse.js,tim=st,529,fS,12,dLS,8,dLE,8,cS,8,cE,514,reqS,514,resS,632,resE,874,pE,1366&amp;Res=boot.owaframe.3.mouse.js,tim=st,537,fS,4,dLS,0,dLE,0,cS,0,cE,385,reqS,385,resS,454,resE,840,pE,1453&amp;Res=sprite1.mouse.png,tim=st,539,fS,2,dLS,0,dLE,0,cS,0,cE,498,reqS,498,resS,582,resE,621&amp;Res=sessiondata.ashx,tim=st,550,fS,145,dLS,0,dLE,0,cS,0,cE,930,reqS,930,resS,930,resE,935&amp;Res=office365icons.eot,tim=st,736,fS,5,dLS,0,dLE,0,cS,0,cE,0,reqS,287,resS,343,resE,634&amp;Res=&quot;</span><br><span class="line">&quot;boot.worldwide.mouse.strings.localized.min.js,tim=st,1617,fS,2,dLS,0,dLE,0,cS,0,cE,0,reqS,0,resS,56,resE,81,pE,1613&amp;Res=sprite1.mouse.css,tim=st,1620,fS,3,dLS,0,dLE,0,cS,0,cE,0,reqS,0,resS,53,resE,58&amp;Res=boot.owaframe.mouse.css,tim=st,1623,fS,2,dLS,0,dLE,0,cS,0,cE,0,reqS,0,resS,50,resE,107&amp;Res=globalize.culture.zh-cn.js,tim=st,1772,fS,2,dLS,0,dLE,0,cS,0,cE,0,reqS,0,resS,36,resE,38,pE,1658&amp;refUrl=https%3A%2F%2Femail.emailtest.cn%2Fowa%2F&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*增加消息头*/</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_4&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;ev.owa2_2&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/ev.owa2?ns=PendingRequest&amp;ev=FinishNotificationRequest&amp;UA=0&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t11.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=text/plain;charset=UTF-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line"></span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_5&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_4&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_4&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=SubscribeToNotification&amp;UA=0&amp;ID=-4&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t12.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">&quot;Body=&#123;\&quot;request\&quot;:&#123;\&quot;__type\&quot;:\&quot;NotificationSubscribeJsonRequest:#Exchange\&quot;,\&quot;Header\&quot;:&#123;\&quot;__type\&quot;:\&quot;JsonRequestHeaders:#Exchange\&quot;,\&quot;RequestServerVersion\&quot;:\&quot;Exchange2013\&quot;,\&quot;TimeZoneContext\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneContext:#Exchange\&quot;,\&quot;TimeZoneDefinition\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneDefinitionType:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;China Standard Time\&quot;&#125;&#125;&#125;&#125;,\&quot;subscriptionData\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SubscriptionData:#Exchange\&quot;,\&quot;SubscriptionId\&quot;:\&quot;HierarchyNotification\&quot;,\&quot;Parameters\&quot;:&#123;\&quot;__type\&quot;:\&quot;&quot;</span><br><span class="line">&quot;SubscriptionParameters:#Exchange\&quot;,\&quot;NotificationType\&quot;:\&quot;HierarchyNotification\&quot;,\&quot;subscriptionIdSuffix\&quot;:\&quot;\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SubscriptionData:#Exchange\&quot;,\&quot;SubscriptionId\&quot;:\&quot;RowNotificationAAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v/jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEMAAA=_true_ConversationLastDeliveryOrRenewTime_Descending_ConversationLastDeliveryTime_Descending_All_renew\&quot;,\&quot;Parameters\&quot;:&#123;\&quot;__type\&quot;:\&quot;SubscriptionParameters:#Exchange\&quot;,\&quot;NotificationType\&quot;&quot;</span><br><span class="line">&quot;:\&quot;RowNotification\&quot;,\&quot;FolderId\&quot;:\&quot;AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v/jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEMAAA=\&quot;,\&quot;IsConversation\&quot;:true,\&quot;SortBy\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SortResults:#Exchange\&quot;,\&quot;Order\&quot;:\&quot;Descending\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;ConversationLastDeliveryOrRenewTime\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SortResults:#Exchange\&quot;,\&quot;Order\&quot;:\&quot;Descending\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;&quot;</span><br><span class="line">&quot;ConversationLastDeliveryTime\&quot;&#125;&#125;],\&quot;Filter\&quot;:\&quot;All\&quot;,\&quot;CategoryFilter\&quot;:null,\&quot;FocusedViewFilter\&quot;:-1,\&quot;ConversationShapeName\&quot;:null,\&quot;subscriptionIdSuffix\&quot;:\&quot;renew\&quot;,\&quot;GroupBy\&quot;:null,\&quot;ChannelId\&quot;:null&#125;&#125;]&#125;&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/jquery.owa.bundle.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.boot.deferred.jquery.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.boot.deferred.webservices.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.boot.deferred.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.core.controls.extended.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.coredeferredstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.nonboot.webservices.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.owa.boot.deferredstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">lr_end_transaction(&quot;login&quot;,LR_AUTO);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line"></span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_6&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_5&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22ValidateAggregatedConfigurationRequest%3A%23Exchange%22%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;ValidateAggregatedConfiguration&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_5&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=ValidateAggregatedConfiguration&amp;EP=1&amp;ID=-5&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t13.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.controls.extended.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.boot.deferred.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.boot.deferred.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;appCacheManifestHandler.ashx&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t14.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line"></span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_7&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_5&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetUserVoiceData&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_6&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetUserVoiceData&amp;EP=1&amp;ID=-6&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t15.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=manifests/appCacheManifestHandler.ashx?owamanifest=1&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.pcstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line"></span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_8&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_7&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22NotificationSubscribeJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D%2C%22subscriptionData%22%3A%5B%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22OwaVersionChangeNotification%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22OwaVersionChangeNotification%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%5D%7D&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_7&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=SubscribeToNotification&amp;EP=1&amp;UA=0&amp;ID=-7&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t16.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;owa_2&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, </span><br><span class="line">&quot;Snapshot=t17.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=/owa/prem/15.1.1531.3/scripts/microsoft.owa.prefetch.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=/owa/prem/15.1.1531.3/scripts/microsoft.owa.common.compose.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=/owa/prem/15.1.1531.3/scripts/microsoft.owa.people.core.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;owa_3&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, </span><br><span class="line">&quot;Snapshot=t18.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line"></span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_9&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_8&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetOwaNonBootUserConfiguration&quot;);</span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%7D&quot;);</span><br><span class="line">web_custom_request(&quot;service.svc_8&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetOwaNonBootUserConfiguration&amp;EP=1&amp;ID=-8&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t19.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.calendar.surface.core.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.meetingmsgstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.calendar.surface.v2.desktop.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.calendar.surface.core.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.calsurfacestrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.calendar.webservices.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/calendarsurface.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.calendar.controls.core.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.calendar.controls.v2.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.calcorestrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=1x1.gif&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.application.textboys.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.core.personacontrol.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;owa_4&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/?layout=mouse&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, </span><br><span class="line">&quot;Snapshot=t20.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.livepersonacard.strings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.personacontrol.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;owa_5&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/?realm=emailtest.cn&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, </span><br><span class="line">&quot;Snapshot=t21.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;emailtest.cn&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/emailtest.cn&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, </span><br><span class="line">&quot;Snapshot=t22.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.core.mecard.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/images/0/nbsprite1.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.mail.common.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.core.findpeople.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;emailtest.cn_2&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/emailtest.cn/&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, </span><br><span class="line">&quot;Snapshot=t23.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/0/microsoft.owa.core.controls.editorbase.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.nonbootstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.commonstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.core.mecard.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;appCacheManifestHandler.ashx_2&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, </span><br><span class="line">&quot;Snapshot=t24.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/bg_gradient.png&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/calendarcolumnerroroverlay.png&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.core.findpeople.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.mail.common.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.core.controls.editorbase.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/dotsrepeater.gif&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/favicon.ico&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/0/microsoft.owa.core.recipientwell.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.core.findpeople.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.core.recipientwell.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/folderpane_bg.png&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/inlineimageplaceholder.png&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/loading_blackbg.gif&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.core.recipientwell.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/loading_whitebg.gif&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/0/microsoft.owa.core.attachments.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/0/o365shellg2coreowa.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.core.attachments.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/zh-hans/microsoft.o365.shellg2.strings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/olk_logo_white_cropped.png&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/owa_brand.png&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/pulse.png&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/0/microsoft.owa.lightning.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/0/microsoft.owa.calendar.controls.v2.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/striperepeater.gif&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/zh-hans/microsoft.owa.lightning.strings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/thinking16_blue.gif&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.lightning.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/thinking16_grey.gif&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/thinking16_white.gif&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/0/microsoft.owa.triageshared.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/0/microsoft.owa.mail.compose.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/0/microsoft.owa.application.readingpane.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/thinking24.gif&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.moderngroups.calendar.shared.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.application.readingpane.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.core.edgepromotion.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.options.strings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/thinking32_blue.gif&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/0/microsoft.owa.calendar.core.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.calendar.core.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.mail.compose.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/thinking32_grey.gif&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.triageshared.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/images/0/thinking32_white.gif&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/fonts/office365icons.eot&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/fonts/office365icons.svg&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.triageshared.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.application.readingpane.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.mail.compose.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/0/microsoft.owa.calendar.addroom.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.calarstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/resources/styles/fonts/office365icons.ttf&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.calendar.addroom.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=../prem/15.1.1531.3/scripts/microsoft.owa.core.popout.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_10&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_9&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetMailboxMessageConfiguration&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_9&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetMailboxMessageConfiguration&amp;EP=1&amp;ID=-9&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t25.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_11&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_10&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetMailboxJunkEmailConfiguration&quot;);</span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_10&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetMailboxJunkEmailConfiguration&amp;EP=1&amp;ID=-10&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t26.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.locationcommon.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.calendar.locationwell.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/fonts/office365icons.woff&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.callwstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.calendar.locationwell.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.calendar.locationwell.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/fonts/segoeui-light.eot&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/fonts/segoeui-light.ttf&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/fonts/segoeui-light.woff&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.nonboot.controls.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.core.controls.emojiresources.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/images/0/thinking32_grey.gif&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/images/0/nbsprite1.mouse.png&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_12&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_11&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;FindPeople&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_11&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=FindPeople&amp;ID=-11&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t27.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">&quot;Body=&#123;\&quot;__type\&quot;:\&quot;FindPeopleJsonRequest:#Exchange\&quot;,\&quot;Header\&quot;:&#123;\&quot;__type\&quot;:\&quot;JsonRequestHeaders:#Exchange\&quot;,\&quot;RequestServerVersion\&quot;:\&quot;Exchange2013\&quot;,\&quot;TimeZoneContext\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneContext:#Exchange\&quot;,\&quot;TimeZoneDefinition\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneDefinitionType:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;China Standard Time\&quot;&#125;&#125;&#125;,\&quot;Body\&quot;:&#123;\&quot;__type\&quot;:\&quot;FindPeopleRequest:#Exchange\&quot;,\&quot;IndexedPageItemView\&quot;:&#123;\&quot;__type\&quot;:\&quot;IndexedPageView:#Exchange\&quot;,\&quot;BasePoint\&quot;:\&quot;Beginning\&quot;,\&quot;Offset\&quot;:0,\&quot;MaxEntriesReturned\&quot;&quot;</span><br><span class="line">&quot;:1000&#125;,\&quot;QueryString\&quot;:null,\&quot;AggregationRestriction\&quot;:&#123;\&quot;__type\&quot;:\&quot;RestrictionType:#Exchange\&quot;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Or:#Exchange\&quot;,\&quot;Items\&quot;:[&#123;\&quot;__type\&quot;:\&quot;Exists:#Exchange\&quot;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;PersonaEmailAddress\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;IsEqualTo:#Exchange\&quot;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;PersonaType\&quot;&#125;,\&quot;FieldURIOrConstant\&quot;:&#123;\&quot;__type\&quot;:\&quot;FieldURIOrConstantType:#Exchange\&quot;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Constant:#Exchange\&quot;,\&quot;Value&quot;</span><br><span class="line">&quot;\&quot;:\&quot;DistributionList\&quot;&#125;&#125;&#125;]&#125;&#125;,\&quot;ParentFolderId\&quot;:&#123;\&quot;__type\&quot;:\&quot;TargetFolderId:#Exchange\&quot;,\&quot;BaseFolderId\&quot;:&#123;\&quot;__type\&quot;:\&quot;FolderId:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v/jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAABH4AAA=\&quot;&#125;&#125;,\&quot;PersonaShape\&quot;:&#123;\&quot;__type\&quot;:\&quot;PersonaResponseShape:#Exchange\&quot;,\&quot;BaseShape\&quot;:\&quot;Default\&quot;,\&quot;AdditionalProperties\&quot;:[&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;PersonaAlias\&quot;&#125;,&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;&quot;</span><br><span class="line">&quot;FieldURI\&quot;:\&quot;PersonaRelevanceScore\&quot;&#125;]&#125;,\&quot;SortOrder\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SortResults:#Exchange\&quot;,\&quot;Order\&quot;:\&quot;Ascending\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;PersonaRelevanceScore\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SortResults:#Exchange\&quot;,\&quot;Order\&quot;:\&quot;Ascending\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;PersonaDisplayNameFirstLast\&quot;&#125;&#125;],\&quot;ShouldResolveOneOffEmailAddress\&quot;:false,\&quot;SearchPeopleSuggestionIndex\&quot;:false&#125;&#125;&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_13&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_12&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetComplianceConfiguration&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_12&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetComplianceConfiguration&amp;EP=1&amp;ID=-12&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t28.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/fonts/segoeui-regular.eot&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/images/0/ewsprite1.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.attachments.extendedattachmentwell.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.infotips.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/fonts/segoeui-regular.ttf&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.extstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/fonts/segoeui-regular.woff&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.owa.core.editor.emoji.strings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.readingpaneshared.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.people.personcard.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_14&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_13&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;FindPeople&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22FindPeopleJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22FindPeopleRequest%3A%23Exchange%22%2C%22IndexedPageItemView%22%3A%7B%22__type%22%3A%22IndexedPageView%3A%23Exchange%22%2C%22BasePoint%22%3A%22Beginning%22%2C%22Offset%22%3A0%2C%22MaxEntriesReturned%22%3A1000%7D%2C%22QueryString%22%3Anull%2C%22ParentFolderId%22%3A%7B%22__type%22%3A%22TargetFolderId%3A%23Exchange%22%2C%22BaseFolderId%22%3A%7B%22__type%22%3A%22FolderId%3A%23Exchange%22%2C%22Id%22%3A%22AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEkAAA%3D%22%7D%7D%2C%22PersonaShape%22%3A%7B%22__type%22%3A%22PersonaResponseShape%3A%23Exchange%22%2C%22BaseShape%22%3A%22Default%22%2C%22AdditionalProperties%22%3A%5B%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22PersonaAlias%22%7D%2C%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22PersonaRelevanceScore%22%7D%5D%7D%2C%22SortOrder%22%3A%5B%7B%22__type%22%3A%22SortResults%3A%23Exchange%22%2C%22Order%22%3A%22Ascending%22%2C%22Path%22%3A%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22PersonaRelevanceScore%22%7D%7D%2C%7B%22__type%22%3A%22SortResults%3A%23Exchange%22%2C%22Order%22%3A%22Ascending%22%2C%22Path%22%3A%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22PersonaDisplayNameFirstLast%22%7D%7D%5D%2C%22ShouldResolveOneOffEmailAddress%22%3Afalse%2C%22SearchPeopleSuggestionIndex%22%3Afalse%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_13&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=FindPeople&amp;EP=1&amp;ID=-13&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t29.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/fonts/segoeui-semibold.eot&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/fonts/segoeui-semibold.ttf&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.linkpreview.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.infotips.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/suiteextensions.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.readingpaneshared.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.nonboot.controls.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/fonts/segoeui-semibold.woff&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.moderngroups.search.shared.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.personcardstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/suiteextensionscontrols.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.controls.emojiresources.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.people.personcard.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.attachments.extendedattachmentwell.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/fonts/segoeui-semilight.eot&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/owa.clientnext.common.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.calendar.meetingforms.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.core.instantsearch.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.calmfstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.instantsearch.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/fonts/segoeui-semilight.ttf&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/owa.clientnext.application.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.calendar.meetingforms.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.attachments.extendedattachmentwell.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.instantsearch.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.personacardfacade.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/fonts/segoeui-semilight.woff&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;projection.aspx&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/projection.aspx&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, </span><br><span class="line">&quot;Snapshot=t30.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.search.suggestions.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.search.suggestions.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=manifests/appCacheManifestHandler.ashx?owamanifest=1&quot;, &quot;Referer=https://email.emailtest.cn/owa/manifests/appCacheManifestHandler.ashx?manifest=0&amp;layout=mouse&amp;UA=0&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.nav.strings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.navigation.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/o365shellg2plusowa.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.o365.shellg2.settingstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.clientnext.framework.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.models.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/locale/zh-hans/owa-calendar-strings.json&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/locale/zh-hans/owa-groups-strings.json&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.extensibilitynext.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/adal.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/msrcrypto-aes.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/owa.clientnext.extensibility.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/msrcrypto-aes-fix.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.o365.suiteserviceproxycommon.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/locale/zh-hans/owa-extensibility-strings.json&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.o365.suiteserviceproxy.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/osfruntime.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.suiteapinotifications.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.o365.suiteapi.owa.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.extensibilitynext.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">//&quot;Url=service.svc/s/GetPersonaPhoto?email=test3%40emailtest.cn&amp;personId=AAQkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAQANSG92XBk%2F5Kh1qWIYKw8%2Bw%3D&amp;UA=0&amp;adObjectId=65f786d4-93c1-4afe-875a-962182b0f3ec&amp;size=HR96x96&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.o365.suiteapiskypeintegration.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.extensibility.common.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.o365.shellg2.owa.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.o365.shellg2.owa.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.shellplusg2.o365.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.extendedmaillistview.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_15&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_14&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetExtensibilityContext&quot;);</span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22GetExtensibilityContextParameters%3A%23Exchange%22%2C%22FormFactor%22%3A3%2C%22ClientLanguage%22%3A%22zh-CN%22%2C%22IncludeDisabledExtensions%22%3Afalse%2C%22ApiVersionSupported%22%3A%221.5%22%2C%22ClientOverrideVersion%22%3A%221.1%22%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_14&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetExtensibilityContext&amp;EP=1&amp;ID=-14&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t31.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/meidp.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.extendedmaillistview.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/cardmetadata.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.extendedmaillistview.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.core.im.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_16&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_15&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetReminders&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22GetRemindersJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22GetRemindersRequest%3A%23Exchange%22%2C%22EndTime%22%3A%222018-12-23T12%3A32%3A56%22%2C%22MaxItems%22%3A0%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_15&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetReminders&amp;EP=1&amp;ID=-15&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t32.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.lyncintegration.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_17&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_16&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetDaysUntilPasswordExpiration&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_16&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetDaysUntilPasswordExpiration&amp;ID=-16&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t33.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">&quot;Body=&#123;&#125;&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.im.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.immanager.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=service.svc/s/GetPersonaPhoto?email=test4%40emailtest.cn&amp;UA=0&amp;size=HR96x96&amp;sc=1544675576580&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_18&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_17&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22NotificationSubscribeJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D%2C%22subscriptionData%22%3A%5B%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22ReminderNotification%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22ReminderNotification%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%2C%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22NewMailNotification%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22NewMailNotification%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%2C%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22SuiteNotification%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22SuiteNotification%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%5D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_17&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=SubscribeToNotification&amp;EP=1&amp;UA=0&amp;ID=-17&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t34.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_19&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_18&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetAllowedOptions&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22GetAllowedOptionsRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_18&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetAllowedOptions&amp;EP=1&amp;ID=-18&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t35.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_20&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_19&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetCalendarView&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22GetCalendarViewJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22GetCalendarViewRequest%3A%23Exchange%22%2C%22CalendarId%22%3A%7B%22__type%22%3A%22TargetFolderId%3A%23Exchange%22%2C%22BaseFolderId%22%3A%7B%22__type%22%3A%22FolderId%3A%23Exchange%22%2C%22Id%22%3A%22AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAENAAA%3D%22%2C%22ChangeKey%22%3A%22AgAAAA%3D%3D%22%7D%7D%2C%22RangeStart%22%3A%222018-11-26T00%3A00%3A00.001%22%2C%22RangeEnd%22%3A%222019-01-07T00%3A00%3A00.000%22%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_19&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetCalendarView&amp;EP=1&amp;ID=-19&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t36.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_21&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_20&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetCalendarFolders&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_20&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetCalendarFolders&amp;EP=1&amp;ID=-20&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t37.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_22&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_21&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22NotificationSubscribeJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D%2C%22subscriptionData%22%3A%5B%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22CalendarItemNotificationAAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAENAAA%3D%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22CalendarItemNotification%22%2C%22FolderId%22%3A%22AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAENAAA%3D%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%5D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line">web_custom_request(&quot;service.svc_21&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=SubscribeToNotification&amp;EP=1&amp;UA=0&amp;ID=-21&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t38.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_23&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_22&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22FindItemJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2016%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22FindItemRequest%3A%23Exchange%22%2C%22ItemShape%22%3A%7B%22__type%22%3A%22ItemResponseShape%3A%23Exchange%22%2C%22BaseShape%22%3A%22IdOnly%22%7D%2C%22ParentFolderIds%22%3A%5B%7B%22__type%22%3A%22DistinguishedFolderId%3A%23Exchange%22%2C%22Id%22%3A%22deleteditems%22%7D%5D%2C%22Traversal%22%3A%22Shallow%22%2C%22Paging%22%3A%7B%22__type%22%3A%22IndexedPageView%3A%23Exchange%22%2C%22BasePoint%22%3A%22Beginning%22%2C%22Offset%22%3A0%2C%22MaxEntriesReturned%22%3A25%7D%2C%22ViewFilter%22%3A%22All%22%2C%22IsWarmUpSearch%22%3Afalse%2C%22FocusedViewFilter%22%3A-1%2C%22Grouping%22%3Anull%2C%22ShapeName%22%3A%22MailListItem%22%2C%22SortOrder%22%3A%5B%7B%22__type%22%3A%22SortResults%3A%23Exchange%22%2C%22Order%22%3A%22Descending%22%2C%22Path%22%3A%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22DateTimeReceived%22%7D%7D%5D%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;FindItem&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_22&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=FindItem&amp;EP=1&amp;ID=-22&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t39.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_24&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_23&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22FindItemJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2016%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22FindItemRequest%3A%23Exchange%22%2C%22ItemShape%22%3A%7B%22__type%22%3A%22ItemResponseShape%3A%23Exchange%22%2C%22BaseShape%22%3A%22IdOnly%22%7D%2C%22ParentFolderIds%22%3A%5B%7B%22__type%22%3A%22DistinguishedFolderId%3A%23Exchange%22%2C%22Id%22%3A%22drafts%22%7D%5D%2C%22Traversal%22%3A%22Shallow%22%2C%22Paging%22%3A%7B%22__type%22%3A%22IndexedPageView%3A%23Exchange%22%2C%22BasePoint%22%3A%22Beginning%22%2C%22Offset%22%3A0%2C%22MaxEntriesReturned%22%3A25%7D%2C%22ViewFilter%22%3A%22All%22%2C%22IsWarmUpSearch%22%3Afalse%2C%22FocusedViewFilter%22%3A-1%2C%22Grouping%22%3Anull%2C%22ShapeName%22%3A%22MailListItem%22%2C%22SortOrder%22%3A%5B%7B%22__type%22%3A%22SortResults%3A%23Exchange%22%2C%22Order%22%3A%22Descending%22%2C%22Path%22%3A%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22DateTimeCreated%22%7D%7D%5D%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;FindItem&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_23&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=FindItem&amp;EP=1&amp;ID=-23&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t40.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">//web_url(&quot;ev.owa2_3&quot;, </span><br><span class="line">//&quot;URL=https://email.emailtest.cn/owa/ev.owa2?ns=PendingRequest&amp;ev=PendingNotificationRequest&amp;UA=0&amp;cid=234c1b94-bba1-4bde-a1d5-8752f83d7308&amp;ecnsq=1&amp;X-OWA-CANARY=Luc7D0HRhkGsUCsuUrQc73Dpsw-0YNYI-bN4sOFPtzkQoWYsmsQdVMyJSEX-XlmtFRT3CGTjYEI.&quot;, </span><br><span class="line">//&quot;Resource=0&quot;, </span><br><span class="line">//&quot;RecContentType=text/html&quot;, </span><br><span class="line">//&quot;Referer=&quot;, </span><br><span class="line">//&quot;Snapshot=t41.inf&quot;, </span><br><span class="line">//&quot;Mode=HTML&quot;, </span><br><span class="line">//LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_25&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_24&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_24&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=SubscribeToNotification&amp;UA=0&amp;ID=-24&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t42.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">&quot;Body=&#123;\&quot;request\&quot;:&#123;\&quot;__type\&quot;:\&quot;NotificationSubscribeJsonRequest:#Exchange\&quot;,\&quot;Header\&quot;:&#123;\&quot;__type\&quot;:\&quot;JsonRequestHeaders:#Exchange\&quot;,\&quot;RequestServerVersion\&quot;:\&quot;Exchange2013\&quot;,\&quot;TimeZoneContext\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneContext:#Exchange\&quot;,\&quot;TimeZoneDefinition\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneDefinitionType:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;China Standard Time\&quot;&#125;&#125;&#125;&#125;,\&quot;subscriptionData\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SubscriptionData:#Exchange\&quot;,\&quot;SubscriptionId\&quot;:\&quot;&quot;</span><br><span class="line">&quot;RowNotificationAAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v/jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEKAAA=_false_DateTimeReceived_Descending_All\&quot;,\&quot;Parameters\&quot;:&#123;\&quot;__type\&quot;:\&quot;SubscriptionParameters:#Exchange\&quot;,\&quot;NotificationType\&quot;:\&quot;RowNotification\&quot;,\&quot;FolderId\&quot;:\&quot;AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v/jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEKAAA=\&quot;,\&quot;IsConversation\&quot;:false,\&quot;SortBy\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SortResults:#Exchange\&quot;,\&quot;Order&quot;</span><br><span class="line">&quot;\&quot;:\&quot;Descending\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;DateTimeReceived\&quot;&#125;&#125;],\&quot;Filter\&quot;:\&quot;All\&quot;,\&quot;CategoryFilter\&quot;:null,\&quot;FocusedViewFilter\&quot;:-1,\&quot;ConversationShapeName\&quot;:null,\&quot;subscriptionIdSuffix\&quot;:null,\&quot;GroupBy\&quot;:null,\&quot;ChannelId\&quot;:\&quot;234c1b94-bba1-4bde-a1d5-8752f83d7308\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SubscriptionData:#Exchange\&quot;,\&quot;SubscriptionId\&quot;:\&quot;RowNotificationAAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v/&quot;</span><br><span class="line">&quot;jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEPAAA=_false_DateTimeCreated_Descending_All\&quot;,\&quot;Parameters\&quot;:&#123;\&quot;__type\&quot;:\&quot;SubscriptionParameters:#Exchange\&quot;,\&quot;NotificationType\&quot;:\&quot;RowNotification\&quot;,\&quot;FolderId\&quot;:\&quot;AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v/jzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEPAAA=\&quot;,\&quot;IsConversation\&quot;:false,\&quot;SortBy\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SortResults:#Exchange\&quot;,\&quot;Order\&quot;:\&quot;Descending\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;&quot;</span><br><span class="line">&quot;DateTimeCreated\&quot;&#125;&#125;],\&quot;Filter\&quot;:\&quot;All\&quot;,\&quot;CategoryFilter\&quot;:null,\&quot;FocusedViewFilter\&quot;:-1,\&quot;ConversationShapeName\&quot;:null,\&quot;subscriptionIdSuffix\&quot;:null,\&quot;GroupBy\&quot;:null,\&quot;ChannelId\&quot;:\&quot;234c1b94-bba1-4bde-a1d5-8752f83d7308\&quot;&#125;&#125;]&#125;&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_26&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_25&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22FindConversationJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22V2016_02_03%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22FindConversationRequest%3A%23Exchange%22%2C%22ParentFolderId%22%3A%7B%22__type%22%3A%22TargetFolderId%3A%23Exchange%22%2C%22BaseFolderId%22%3A%7B%22__type%22%3A%22DistinguishedFolderId%3A%23Exchange%22%2C%22Id%22%3A%22sentitems%22%7D%7D%2C%22ConversationShape%22%3A%7B%22__type%22%3A%22ConversationResponseShape%3A%23Exchange%22%2C%22BaseShape%22%3A%22IdOnly%22%7D%2C%22ShapeName%22%3A%22ConversationSentItemsListView%22%2C%22Paging%22%3A%7B%22__type%22%3A%22IndexedPageView%3A%23Exchange%22%2C%22BasePoint%22%3A%22Beginning%22%2C%22Offset%22%3A0%2C%22MaxEntriesReturned%22%3A25%7D%2C%22ViewFilter%22%3A%22All%22%2C%22FocusedViewFilter%22%3A-1%2C%22SortOrder%22%3A%5B%7B%22__type%22%3A%22SortResults%3A%23Exchange%22%2C%22Order%22%3A%22Descending%22%2C%22Path%22%3A%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22ConversationLastDeliveryTime%22%7D%7D%5D%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;FindConversation&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_25&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=FindConversation&amp;EP=1&amp;ID=-25&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t43.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_27&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_26&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22NotificationSubscribeJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D%2C%22subscriptionData%22%3A%5B%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22RowNotificationAAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEJAAA%3D_true_ConversationLastDeliveryTime_Descending_All%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22RowNotification%22%2C%22FolderId%22%3A%22AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEJAAA%3D%22%2C%22IsConversation%22%3Atrue%2C%22SortBy%22%3A%5B%7B%22__type%22%3A%22SortResults%3A%23Exchange%22%2C%22Order%22%3A%22Descending%22%2C%22Path%22%3A%7B%22__type%22%3A%22PropertyUri%3A%23Exchange%22%2C%22FieldURI%22%3A%22ConversationLastDeliveryTime%22%7D%7D%5D%2C%22Filter%22%3A%22All%22%2C%22CategoryFilter%22%3Anull%2C%22FocusedViewFilter%22%3A-1%2C%22ConversationShapeName%22%3Anull%2C%22subscriptionIdSuffix%22%3Anull%2C%22GroupBy%22%3Anull%2C%22ChannelId%22%3A%22234c1b94-bba1-4bde-a1d5-8752f83d7308%22%7D%7D%5D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_26&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=SubscribeToNotification&amp;EP=1&amp;UA=0&amp;ID=-26&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t44.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=service.svc/s/GetPersonaPhoto?email=test3%40emailtest.cn&amp;UA=0&amp;size=HR96x96&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_28&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_27&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22GetMailTipsJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22V2016_11_07%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22GetMailTipsRequest%3A%23Exchange%22%2C%22SendingAs%22%3A%7B%22__type%22%3A%22EmailAddress%3A%23Exchange%22%2C%22EmailAddress%22%3A%22Test4%40emailtest.cn%22%2C%22Name%22%3A%22Test4%22%7D%2C%22Recipients%22%3A%5B%7B%22__type%22%3A%22EmailAddress%3A%23Exchange%22%2C%22EmailAddress%22%3A%22test3%40emailtest.cn%22%2C%22Name%22%3A%22test3%40emailtest.cn%22%7D%5D%2C%22MailTipsRequested%22%3A1%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetMailTips&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_27&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetMailTips&amp;EP=1&amp;ID=-27&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t45.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=https://static2.sharepointonline.com/files/fabric/assets/icons/fabricmdl2icons.woff&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=https://appsforoffice.microsoft.com/lib/1/hosted/en-us/outlook_strings.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=https://appsforoffice.microsoft.com/lib/1/hosted/outlook-web-16.01.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=https://appsforoffice.microsoft.com/lib/1/hosted/en-us/office_strings.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=https://appsforoffice.microsoft.com/lib/1/hosted/office.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_29&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_28&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22CreateItemJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22V2015_10_15%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22CreateItemRequest%3A%23Exchange%22%2C%22Items%22%3A%5B%7B%22__type%22%3A%22Message%3A%23Exchange%22%2C%22Subject%22%3A%22Attchment%20pert%22%2C%22Body%22%3A%7B%22__type%22%3A%22BodyContentType%3A%23Exchange%22%2C%22BodyType%22%3A%22HTML%22%2C%22Value%22%3A%22%3Chtml%3E%3Chead%3E%3Cmeta%20http-equiv%3D%5C%22Content-Type%5C%22%20content%3D%5C%22text%2Fhtml%3B%20charset%3DUTF-8%5C%22%3E%3Cstyle%20type%3D%5C%22text%2Fcss%5C%22%20style%3D%5C%22display%3Anone%3B%5C%22%3E%3C!--%20P%20%7Bmargin-top%3A0%3Bmargin-bottom%3A0%3B%7D%20--%3E%3C%2Fstyle%3E%3C%2Fhead%3E%3Cbody%20dir%3D%5C%22ltr%5C%22%3E%3Cdiv%20id%3D%5C%22divtagdefaultwrapper%5C%22%20style%3D%5C%22font-size%3A12pt%3Bcolor%3A%23000000%3Bfont-family%3ACalibri%2CHelvetica%2Csans-serif%3B%5C%22%20dir%3D%5C%22ltr%5C%22%3E%3Cp%3Eperfor%3Cbr%3E%3C%2Fp%3E%3C%2Fdiv%3E%3C%2Fbody%3E%3C%2Fhtml%3E%22%2C%22DataUriCount%22%3A0%2C%22CustomDataUriCount%22%3A0%7D%2C%22Importance%22%3A%22Normal%22%2C%22From%22%3Anull%2C%22ToRecipients%22%3A%5B%7B%22__type%22%3A%22EmailAddress%3A%23Exchange%22%2C%22MailboxType%22%3A%22OneOff%22%2C%22RoutingType%22%3A%22SMTP%22%2C%22EmailAddress%22%3A%22test3%40emailtest.cn%22%2C%22Name%22%3A%22%22%7D%5D%2C%22CcRecipients%22%3A%5B%5D%2C%22BccRecipients%22%3A%5B%5D%2C%22Sensitivity%22%3A%22Normal%22%2C%22IsDeliveryReceiptRequested%22%3Afalse%2C%22IsReadReceiptRequested%22%3Afalse%7D%5D%2C%22ClientSupportsIrm%22%3Atrue%2C%22OutboundCharset%22%3A%22AutoDetect%22%2C%22MessageDisposition%22%3A%22SaveOnly%22%2C%22ComposeOperation%22%3A%22newMail%22%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;CreateItem&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_28&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=CreateItem&amp;EP=1&amp;ID=-28&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t46.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/images/0/thinking16_grey.gif&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_30&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_29&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;CreateAttachmentFromLocalFile&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_29&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=CreateAttachmentFromLocalFile&amp;ID=-29&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t47.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">body_variable_1, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">lr_think_time(10);</span><br><span class="line"></span><br><span class="line">lr_start_transaction(&quot;post&quot;);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_31&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_30&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;UpdateItem&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_30&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=UpdateItem&amp;ID=-30&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t48.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">&quot;Body=&#123;\&quot;__type\&quot;:\&quot;UpdateItemJsonRequest:#Exchange\&quot;,\&quot;Header\&quot;:&#123;\&quot;__type\&quot;:\&quot;JsonRequestHeaders:#Exchange\&quot;,\&quot;RequestServerVersion\&quot;:\&quot;Exchange2015\&quot;,\&quot;TimeZoneContext\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneContext:#Exchange\&quot;,\&quot;TimeZoneDefinition\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneDefinitionType:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;China Standard Time\&quot;&#125;&#125;&#125;,\&quot;Body\&quot;:&#123;\&quot;__type\&quot;:\&quot;UpdateItemRequest:#Exchange\&quot;,\&quot;ItemChanges\&quot;:[&#123;\&quot;__type\&quot;:\&quot;ItemChange:#Exchange\&quot;,\&quot;Updates\&quot;:[&#123;\&quot;__type\&quot;:\&quot;DeleteItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;&quot;</span><br><span class="line">&quot;:\&quot;ExtendedPropertyUri:#Exchange\&quot;,\&quot;PropertyId\&quot;:35356,\&quot;DistinguishedPropertySetId\&quot;:\&quot;Sharing\&quot;,\&quot;PropertyType\&quot;:\&quot;CLSID\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;DeleteItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;From\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;CcRecipients\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;CcRecipients\&quot;:[]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri&quot;</span><br><span class="line">&quot;:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;BccRecipients\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;BccRecipients\&quot;:[]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;ToRecipients\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;ToRecipients\&quot;:[&#123;\&quot;__type\&quot;:\&quot;EmailAddress:#Exchange\&quot;,\&quot;MailboxType\&quot;:\&quot;OneOff\&quot;,\&quot;RoutingType\&quot;:\&quot;SMTP\&quot;,\&quot;EmailAddress\&quot;:\&quot;test3@emailtest.cn\&quot;,\&quot;Name\&quot;:\&quot;\&quot;&#125;]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;&quot;</span><br><span class="line">&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;IsReadReceiptRequested\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;IsReadReceiptRequested\&quot;:false&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;IsDeliveryReceiptRequested\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;IsDeliveryReceiptRequested\&quot;:false&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Subject\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message&quot;</span><br><span class="line">&quot;:#Exchange\&quot;,\&quot;Subject\&quot;:\&quot;Attchment pert\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Importance\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Importance\&quot;:\&quot;Normal\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Body\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Body\&quot;:&#123;\&quot;__type\&quot;:\&quot;BodyContentType:#Exchange\&quot;,\&quot;BodyType\&quot;:\&quot;HTML\&quot;,\&quot;Value\&quot;:\&quot;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=\\\&quot;&quot;</span><br><span class="line">&quot;Content-Type\\\&quot; content=\\\&quot;text/html; charset=UTF-8\\\&quot;&gt;&lt;style type=\\\&quot;text/css\\\&quot; style=\\\&quot;display:none;\\\&quot;&gt;&lt;!-- P &#123;margin-top:0;margin-bottom:0;&#125; --&gt;&lt;/style&gt;&lt;/head&gt;&lt;body dir=\\\&quot;ltr\\\&quot;&gt;&lt;div id=\\\&quot;divtagdefaultwrapper\\\&quot; style=\\\&quot;font-size:12pt;color:#000000;font-family:Calibri,Helvetica,sans-serif;\\\&quot; dir=\\\&quot;ltr\\\&quot;&gt;&lt;p&gt;performance Exchange &lt;br&gt;&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\&quot;,\&quot;DataUriCount\&quot;:0,\&quot;CustomDataUriCount\&quot;:0&#125;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;&quot;</span><br><span class="line">&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Sensitivity\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Sensitivity\&quot;:\&quot;Normal\&quot;&#125;&#125;],\&quot;ItemId\&quot;:&#123;\&quot;__type\&quot;:\&quot;ItemId:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQBGAAAAAABu95v/jzADTIfi8X89MXTNBwCecFqQtFpNQYRSIDhkk5BMAAAAAAEPAACecFqQtFpNQYRSIDhkk5BMAAAAAB+MAAA=\&quot;,\&quot;ChangeKey\&quot;:\&quot;CQAAABYAAACecFqQtFpNQYRSIDhkk5BMAAAAACLe\&quot;&#125;&#125;],\&quot;ConflictResolution\&quot;:\&quot;AlwaysOverwrite\&quot;,\&quot;ClientSupportsIrm\&quot;:true,\&quot;&quot;</span><br><span class="line">&quot;SendCalendarInvitationsOrCancellations\&quot;:\&quot;SendToNone\&quot;,\&quot;MessageDisposition\&quot;:\&quot;SaveOnly\&quot;,\&quot;SuppressReadReceipts\&quot;:false,\&quot;ComposeOperation\&quot;:\&quot;newMail\&quot;,\&quot;OutboundCharset\&quot;:\&quot;AutoDetect\&quot;,\&quot;PromoteInlineAttachments\&quot;:false,\&quot;SendOnNotFoundError\&quot;:true&#125;&#125;&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_32&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_31&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;UpdateItem&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_31&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=UpdateItem&amp;ID=-31&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t49.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">&quot;Body=&#123;\&quot;__type\&quot;:\&quot;UpdateItemJsonRequest:#Exchange\&quot;,\&quot;Header\&quot;:&#123;\&quot;__type\&quot;:\&quot;JsonRequestHeaders:#Exchange\&quot;,\&quot;RequestServerVersion\&quot;:\&quot;Exchange2015\&quot;,\&quot;TimeZoneContext\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneContext:#Exchange\&quot;,\&quot;TimeZoneDefinition\&quot;:&#123;\&quot;__type\&quot;:\&quot;TimeZoneDefinitionType:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;China Standard Time\&quot;&#125;&#125;&#125;,\&quot;Body\&quot;:&#123;\&quot;__type\&quot;:\&quot;UpdateItemRequest:#Exchange\&quot;,\&quot;ItemChanges\&quot;:[&#123;\&quot;__type\&quot;:\&quot;ItemChange:#Exchange\&quot;,\&quot;Updates\&quot;:[&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;&quot;</span><br><span class="line">&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;DocLinks\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;DocLinks\&quot;:[]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;DeleteItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;ExtendedPropertyUri:#Exchange\&quot;,\&quot;PropertyId\&quot;:35356,\&quot;DistinguishedPropertySetId\&quot;:\&quot;Sharing\&quot;,\&quot;PropertyType\&quot;:\&quot;CLSID\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;DeleteItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;From\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,&quot;</span><br><span class="line">&quot;\&quot;FieldURI\&quot;:\&quot;CcRecipients\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;CcRecipients\&quot;:[]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;BccRecipients\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;BccRecipients\&quot;:[]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;ToRecipients\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;ToRecipients\&quot;:[&#123;\&quot;__type\&quot;:\&quot;EmailAddress:#Exchange\&quot;,\&quot;&quot;</span><br><span class="line">&quot;MailboxType\&quot;:\&quot;OneOff\&quot;,\&quot;RoutingType\&quot;:\&quot;SMTP\&quot;,\&quot;EmailAddress\&quot;:\&quot;test3@emailtest.cn\&quot;,\&quot;Name\&quot;:\&quot;\&quot;&#125;]&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;IsReadReceiptRequested\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;IsReadReceiptRequested\&quot;:false&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;IsDeliveryReceiptRequested\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;&quot;</span><br><span class="line">&quot;IsDeliveryReceiptRequested\&quot;:false&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Subject\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Subject\&quot;:\&quot;Attchment pert\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Importance\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Importance\&quot;:\&quot;Normal\&quot;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;&quot;</span><br><span class="line">&quot;FieldURI\&quot;:\&quot;Body\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Body\&quot;:&#123;\&quot;__type\&quot;:\&quot;BodyContentType:#Exchange\&quot;,\&quot;BodyType\&quot;:\&quot;HTML\&quot;,\&quot;Value\&quot;:\&quot;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=\\\&quot;Content-Type\\\&quot; content=\\\&quot;text/html; charset=UTF-8\\\&quot;&gt;&lt;style type=\\\&quot;text/css\\\&quot; style=\\\&quot;display:none;\\\&quot;&gt;&lt;!-- P &#123;margin-top:0;margin-bottom:0;&#125; --&gt;&lt;/style&gt;&lt;/head&gt;&lt;body dir=\\\&quot;ltr\\\&quot;&gt;&lt;div id=\\\&quot;divtagdefaultwrapper\\\&quot; style=\\\&quot;font-size:12pt;color:#000000;font-family:Calibri,Helvetica,sans-serif;\\\&quot; dir=&quot;</span><br><span class="line">&quot;\\\&quot;ltr\\\&quot;&gt;&lt;p&gt;performance Exchange &lt;br&gt;&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\&quot;,\&quot;DataUriCount\&quot;:0,\&quot;CustomDataUriCount\&quot;:0&#125;&#125;&#125;,&#123;\&quot;__type\&quot;:\&quot;SetItemField:#Exchange\&quot;,\&quot;Path\&quot;:&#123;\&quot;__type\&quot;:\&quot;PropertyUri:#Exchange\&quot;,\&quot;FieldURI\&quot;:\&quot;Sensitivity\&quot;&#125;,\&quot;Item\&quot;:&#123;\&quot;__type\&quot;:\&quot;Message:#Exchange\&quot;,\&quot;Sensitivity\&quot;:\&quot;Normal\&quot;&#125;&#125;],\&quot;ItemId\&quot;:&#123;\&quot;__type\&quot;:\&quot;ItemId:#Exchange\&quot;,\&quot;Id\&quot;:\&quot;AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQBGAAAAAABu95v/jzADTIfi8X89MXTNBwCecFqQtFpNQYRSIDhkk5BMAAAAAAEPAACecFqQtFpNQYRSIDhkk5BMAAAAAB&quot;</span><br><span class="line">&quot;+MAAA=\&quot;,\&quot;ChangeKey\&quot;:\&quot;CQAAABYAAACecFqQtFpNQYRSIDhkk5BMAAAAACLf\&quot;&#125;&#125;],\&quot;ConflictResolution\&quot;:\&quot;AlwaysOverwrite\&quot;,\&quot;ClientSupportsIrm\&quot;:true,\&quot;SendCalendarInvitationsOrCancellations\&quot;:\&quot;SendToNone\&quot;,\&quot;MessageDisposition\&quot;:\&quot;SendAndSaveCopy\&quot;,\&quot;SuppressReadReceipts\&quot;:false,\&quot;ComposeOperation\&quot;:\&quot;newMail\&quot;,\&quot;OutboundCharset\&quot;:\&quot;AutoDetect\&quot;,\&quot;PromoteInlineAttachments\&quot;:false,\&quot;SendOnNotFoundError\&quot;:true&#125;&#125;&quot;, </span><br><span class="line">EXTRARES, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.people.contactmanagement.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.people.photoupload.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.people.composepersonacard.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.bootcommonstrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.strings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.people.composepersonacard.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.people.composepersonacard.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/images/0/mmsprite1.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/meetingmessage.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.calendar.meetingmessage.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.options.core.models.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.people.webservices.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/microsoft.owa.core.peoplehub.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.peoplehub.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.peoplehub.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.storage.framework.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.storage.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.offline.boot.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.sync.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.moderngroups.shared.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/resources/styles/0/nonboot.mouse.css&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/zh-hans/microsoft.exchange.clients.owa2.client.oobestrings.localized.min.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.viewmodels.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.views.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.core.views.mouse.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.application.viewmodels.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">&quot;Url=prem/15.1.1531.3/scripts/microsoft.owa.application.views.js&quot;, &quot;Referer=&quot;, ENDITEM, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">lr_end_transaction(&quot;post&quot;,LR_AUTO);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_33&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_32&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;ConnectedAccountsNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_32&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=ConnectedAccountsNotification&amp;ID=-32&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t50.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">&quot;Body=&#123;\&quot;isOWALogon\&quot;:true&#125;&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_34&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_33&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;GetReminders&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22__type%22%3A%22GetRemindersJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%2C%22Body%22%3A%7B%22__type%22%3A%22GetRemindersRequest%3A%23Exchange%22%2C%22EndTime%22%3A%222018-12-23T12%3A33%3A56%22%7D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_33&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=GetReminders&amp;EP=1&amp;ID=-33&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t51.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_35&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_34&#125;&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22NotificationSubscribeJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D%2C%22subscriptionData%22%3A%5B%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22SuiteNotification%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22SuiteNotification%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%5D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_34&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=SubscribeToNotification&amp;EP=1&amp;UA=0&amp;ID=-34&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t52.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*关联cookie*/</span><br><span class="line">web_reg_save_param(&quot;X-OWA-CANARY_36&quot;,</span><br><span class="line">&quot;LB=Set-Cookie: X-OWA-CANARY=&quot;,</span><br><span class="line">&quot;RB=;&quot;,</span><br><span class="line">LAST);</span><br><span class="line">/*添加请求头*/</span><br><span class="line">web_add_header(&quot;X-OWA-CANARY&quot;,</span><br><span class="line">&quot;&#123;X-OWA-CANARY_35&#125;&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;Action&quot;,</span><br><span class="line">&quot;SubscribeToNotification&quot;);</span><br><span class="line"></span><br><span class="line">web_add_header(&quot;X-OWA-UrlPostData&quot;,</span><br><span class="line">&quot;%7B%22request%22%3A%7B%22__type%22%3A%22NotificationSubscribeJsonRequest%3A%23Exchange%22%2C%22Header%22%3A%7B%22__type%22%3A%22JsonRequestHeaders%3A%23Exchange%22%2C%22RequestServerVersion%22%3A%22Exchange2013%22%2C%22TimeZoneContext%22%3A%7B%22__type%22%3A%22TimeZoneContext%3A%23Exchange%22%2C%22TimeZoneDefinition%22%3A%7B%22__type%22%3A%22TimeZoneDefinitionType%3A%23Exchange%22%2C%22Id%22%3A%22China%20Standard%20Time%22%7D%7D%7D%7D%2C%22subscriptionData%22%3A%5B%7B%22__type%22%3A%22SubscriptionData%3A%23Exchange%22%2C%22SubscriptionId%22%3A%22RowNotificationAAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEBAAA%3D%22%2C%22Parameters%22%3A%7B%22__type%22%3A%22SubscriptionParameters%3A%23Exchange%22%2C%22NotificationType%22%3A%22RowNotification%22%2C%22FolderId%22%3A%22AAMkADBkZjc5MGNlLTYxODUtNGI4OC1hZjNjLTQxYTMzZjhiOGNlMQAuAAAAAABu95v%2FjzADTIfi8X89MXTNAQCecFqQtFpNQYRSIDhkk5BMAAAAAAEBAAA%3D%22%2C%22subscriptionIdSuffix%22%3A%22%22%7D%7D%5D%7D&quot;);</span><br><span class="line"></span><br><span class="line">web_custom_request(&quot;service.svc_35&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/service.svc?action=SubscribeToNotification&amp;EP=1&amp;UA=0&amp;ID=-35&amp;AC=1&quot;, </span><br><span class="line">&quot;Method=POST&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=application/json&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t53.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">&quot;EncType=application/json; charset=utf-8&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;logoff.owa&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/logoff.owa&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t54.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">web_url(&quot;logon.aspx_2&quot;, </span><br><span class="line">&quot;URL=https://email.emailtest.cn/owa/auth/logon.aspx?replaceCurrent=1&amp;url=https%3a%2f%2femail.emailtest.cn%2fowa&quot;, </span><br><span class="line">&quot;Resource=0&quot;, </span><br><span class="line">&quot;RecContentType=text/html&quot;, </span><br><span class="line">&quot;Referer=&quot;, </span><br><span class="line">&quot;Snapshot=t55.inf&quot;, </span><br><span class="line">&quot;Mode=HTML&quot;, </span><br><span class="line">LAST);</span><br><span class="line"></span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>最终，OWA实现了脚本发邮件，但是并发跑场景时候，问题就来了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X-OWA-Error Microsoft.Exchange.Data.Directory.SystemConfiguration.OverBudgetException...</span><br></pre></td></tr></table></figure></p><p>然后接口就500了，微软官网看了下，貌似是OWA的问题，用outlook客户端就没这个问题，所以，基本OWA的方式也就是废了，并发根本上不去，20左右就挂了，结果没法出。</p><h3 id="JetStress"><a href="#JetStress" class="headerlink" title="JetStress"></a>JetStress</h3><p>然后又搜了什么exchange的官方压测工具，有两个，一个是Jetstress，另一个是Exchange Load Generator，由于基本没资料，Jetstress还好试一点，走到加载数据库才挂：加载动态链接库失败。。另一个就比较坑，基本是走不下去，第一步就挂了。</p><h3 id="MAPI"><a href="#MAPI" class="headerlink" title="MAPI"></a>MAPI</h3><p>实在没办法，就想到了换协议，在loadrunner中自己写脚本。也是找到了exchange的协议，MAPI，脚本也不难写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Actions()</span><br><span class="line">&#123;</span><br><span class="line">mapi_logon(&quot;Logon&quot;,</span><br><span class="line">&quot;ProfileName=John Smith&quot;,</span><br><span class="line">&quot;ProfilePass=Tiger&quot;,</span><br><span class="line">LAST);</span><br><span class="line">//Send a Sticky Note message</span><br><span class="line">mapi_send_mail(&quot;SendMail&quot;,</span><br><span class="line">&quot;To=user1@techno.merc-int.com&quot;,</span><br><span class="line">&quot;Cc=user0002t@techno.merc-int.com&quot;,</span><br><span class="line">&quot;Subject=&lt;GROUP&gt;:&lt;VUID&gt; @ &lt;DATE&gt;&quot;,</span><br><span class="line">&quot;Type=Ipm.StickyNote&quot;,</span><br><span class="line">&quot;Body=Please update your profile today.&quot;,</span><br><span class="line">LAST);</span><br><span class="line">mapi_logout();</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>还有其他的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">//Send a simple mail message</span><br><span class="line">    mapi_send_mail(&quot;SendMail&quot;,</span><br><span class="line">            &quot;To=user0001t@techno.merc-int.com&quot;,</span><br><span class="line">            &quot;Subject=&lt;GROUP&gt;:&lt;VUID&gt; @ &lt;DATE&gt;&quot;,</span><br><span class="line">            &quot;Body=Test Message! Please ignore.&quot;,</span><br><span class="line">            LAST );</span><br><span class="line">            </span><br><span class="line">//Send a Sticky Note message</span><br><span class="line">    mapi_send_mail(&quot;SendMail&quot;,</span><br><span class="line">            &quot;To=user1@techno.merc-int.com,user2@techno.merc-int.com&quot;,</span><br><span class="line">            &quot;Cc=user0002t@techno.merc-int.com&quot;,</span><br><span class="line">            &quot;Bcc=user0003t@techno.merc-int.com&quot;,</span><br><span class="line">            &quot;Subject=&lt;GROUP&gt;:&lt;VUID&gt; @ &lt;DATE&gt;&quot;,</span><br><span class="line">            &quot;Type=IPM.StickyNote&quot;,</span><br><span class="line">            &quot;Body=Please update your profile today.&quot;,</span><br><span class="line">            LAST );</span><br><span class="line">            </span><br><span class="line">//Send mail with Attachments</span><br><span class="line">    mapi_send_mail(&quot;SendMail&quot;,</span><br><span class="line">            &quot;To=user0001t@techno.merc-int.com&quot;,</span><br><span class="line">            &quot;Subject=Attach Test @ &lt;DATE&gt;&quot;,</span><br><span class="line">            &quot;Body=Test Message!&quot;,</span><br><span class="line">            &quot;ATTACHMENTS&quot;,</span><br><span class="line">                &quot;File=E:\\QA\\for_dcom\\vbj_readme.txt&quot;, &quot;ENDITEM&quot;,</span><br><span class="line">                &quot;File=E:\\QA\\for_dcom\\vbj_readme.txt&quot;, &quot;ENDITEM&quot;,</span><br><span class="line">            LAST );</span><br><span class="line">            </span><br><span class="line">//Send mail with Attachment within body</span><br><span class="line">    mapi_send_mail(&quot;Mail1&quot;,</span><br><span class="line">        &quot;To=user0001t@techno.merc-int.com&quot;,</span><br><span class="line">        &quot;Subject=This is a my subject &quot;,</span><br><span class="line">        &quot;Body=This is a sample mail. This is the outfile.&quot;,</span><br><span class="line">        &quot;Type=IPM.StickyNote&quot;,</span><br><span class="line">        &quot;ATTACHMENTS&quot;,</span><br><span class="line">        &quot;Name=AutoExec.bat&quot;, &quot;File=c:\\autoexec.bat&quot;, &quot;Position=5&quot;, &quot;ENDITEM&quot;,</span><br><span class="line">        &quot;Name=Outfile.txt&quot;, &quot;File=c:\\tmp\\outfile.txt&quot;, &quot;Position=30&quot;, &quot;ENDITEM&quot;,</span><br><span class="line">        LAST );</span><br></pre></td></tr></table></figure></p><p>脚本是不难，运行脚本坑就来了。</p><h4 id="坑一"><a href="#坑一" class="headerlink" title="坑一"></a>坑一</h4><p>首先，用loadrunner创建脚本时候，默认是:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Actions()</span><br><span class="line">&#123;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>然后补全脚本，运行时候，就开始了：<code>Error: C interpreter run time error:  Error -- Unresolved symbol : Action.</code></p><p>这个稍微好解决一点，把<code>Actions()</code>改成<code>Action()</code>就没这个报错了</p><h4 id="坑二"><a href="#坑二" class="headerlink" title="坑二"></a>坑二</h4><p>上面一步改完之后运行脚本，直接弹出了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">没有默认的邮件客户端，或者当前的邮件客户端无法实现该邮件请求。请运行Microsoft Outlook并将其设为默认邮件客户端</span><br></pre></td></tr></table></figure></p><p>这么个神坑问题。然后，第一步，装了个outlook，然后修改成默认邮件客户端，运行，继续报错；然后修改注册表，把outlook的内容删掉，运行安装程序，点修复，继续报错；然后卸载outlook重装，继续报错。。。</p><p>基本是奔溃状态，翻墙，各种搜<code>MAPI loadrunner</code>，<code>MAPI there is no default mail client</code>… stackoverfolw都翻烂了，绝望。。。最后是在某个名字都没记住的网站上，找到一个关于无法打卡.msg文件的回答，才试试看的，回答是建议把outlook换成32位版本，不能用64位，不然第三方调不通。。。</p><blockquote><p><a href="https://support.microsoft.com/zh-cn/help/3189902/can-t-preview-msg-files-in-windows-file-explorer-with-64-bit-outlook" target="_blank" rel="noopener">微软官方support回答</a></p></blockquote><p>最终，重装了整个office到32位版本，这个报错解决！</p><h4 id="坑三"><a href="#坑三" class="headerlink" title="坑三"></a>坑三</h4><p><code>Fail to logon for test@test.cn （rc=3）</code>报了个这个错，这个错看起来也就是登录失败，登录信息无效。。<br>然后就是各种试密码，各种试用户名/密码组合，域账号各种试，发现都没用。。</p><p>然后就想着，直接删账号重登outlook走一遍得了，这次outlook的账号配置文件，学乖了，名字用了test1，之前随便输了个，后面的账号和用户名密码也是很正常的，这次，登上了！！！脚本正常了！！！具体解决的原理实在没精力去研究了，只是将邮件的配置文件的名称和之后登录的用户名统一了，配置文件位置：<br><code>控制面板-用户账户-邮件-配置文件</code></p><h4 id="坑四"><a href="#坑四" class="headerlink" title="坑四"></a>坑四</h4><p>这个，不太知道怎么解决了，每次用脚本发邮件，用<code>mapi_send()</code>函数时候，系统就会弹窗<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">有一个程序正试图访问存储在outlook中的电子邮件地址信息。如果。。。</span><br></pre></td></tr></table></figure></p><p>按照帮助里面说的，已经将信任设置里面设成了不通知，还是每次都通知，也不知道解决了，难道是我的outlook没激活？不让我保存设置?搞不懂，反正，这个exchange的性能测试，是头非常疼</p><p>完！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;loadrunner压测exchange邮箱服务&lt;/p&gt;
&lt;p&gt;神需求，折腾半天&lt;/p&gt;
    
    </summary>
    
      <category term="性能测试" scheme="http://tokyle.com/categories/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="loadrunner" scheme="http://tokyle.com/tags/loadrunner/"/>
    
      <category term="exchange" scheme="http://tokyle.com/tags/exchange/"/>
    
  </entry>
  
  <entry>
    <title>Linux小工具推荐</title>
    <link href="http://tokyle.com/2018/12/05/Linux%E5%B0%8F%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90/"/>
    <id>http://tokyle.com/2018/12/05/Linux小工具推荐/</id>
    <published>2018-12-05T05:54:28.000Z</published>
    <updated>2018-12-05T05:56:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>Linux实用小工具推荐</p><p>偶然发现几个挺有意思的小工具，推荐下<br><a id="more"></a></p><h3 id="htop"><a href="#htop" class="headerlink" title="htop"></a>htop</h3><p>首先是top的替代品，个人感觉比top好用，界面更好看，支持键盘方向键左右移动，支持一键增减任务优先级（nice%）</p><p>安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install epel-release</span><br><span class="line">yum -y install htop</span><br></pre></td></tr></table></figure></p><p>和top一样用，直接<code>htop</code>即可</p><h3 id="mycli"><a href="#mycli" class="headerlink" title="mycli"></a>mycli</h3><p>一个可以在控制台里面进行SQL联想的客户端工具，界面也更好看，比普通在控制台敲SQL爽多了</p><p>效果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql root@localhost:accrual_minth&gt; show databases; </span><br><span class="line">                                            databases         </span><br><span class="line">                                            create database   </span><br><span class="line">                                            procedure status</span><br></pre></td></tr></table></figure></p><p>安装：<br>首先是服务器上要有python，如果是python3更好，装了pip最好；python2.7也行，下面演示python2.7安装<br><strong>安装gcc，更新yum</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y update &amp;&amp; yum -y install gcc</span><br></pre></td></tr></table></figure></p><p><strong>安装pip</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://bootstrap.pypa.io/get-pip.py</span><br><span class="line"></span><br><span class="line">python get-pip.py &amp;&amp; yum -y install python-devel</span><br></pre></td></tr></table></figure></p><p><strong>安装mycli</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mycli</span><br></pre></td></tr></table></figure></p><p>可能会有报错：<br><code>Cannot uninstall &#39;configobj&#39;. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall</code></p><p>那就把安装命令替换成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --ignore-installed mycli</span><br></pre></td></tr></table></figure></p><p>使用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mycli -uroot</span><br></pre></td></tr></table></figure></p><h3 id="thefuck"><a href="#thefuck" class="headerlink" title="thefuck"></a>thefuck</h3><p>这个工具，个人觉得是最有意思，简直就是在抒发敲命令的人的心声。想一下，当你敲一个命令，然后提示你<code>xxx command not found</code>是不是很想骂街，然后，国外的某团队就做了个这玩意，当你敲错命令时候，敲个<code>fuck</code>自动帮你纠正命令</p><p>效果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yun install aaa</span><br><span class="line">-bash: yun: command not found</span><br><span class="line">[root@localhost ~]# fuck</span><br><span class="line">​​​​​​​​​​yum install aaa [enter/↑/↓/ctrl+c]</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirrors.aliyun.com</span><br><span class="line"> * epel: mirrors.tuna.tsinghua.edu.cn</span><br><span class="line"> * extras: mirrors.aliyun.com</span><br><span class="line"> * updates: mirrors.aliyun.com</span><br></pre></td></tr></table></figure></p><p>上述实例，原来敲的是<code>yun install</code>很明显是手残敲错了，然后敲个<code>fuck</code>，自动纠正成了<code>yum install</code>直接回车就可以执行了</p><p>安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install thefuck</span><br></pre></td></tr></table></figure></p><p>配置：<br><strong>编辑bashrc配置文件</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line"></span><br><span class="line">vim .bashrc</span><br><span class="line"></span><br><span class="line">#在文件尾加入一行给thefuck重命名为fuck</span><br><span class="line">eval &quot;$(thefuck --alias fuck)&quot;</span><br></pre></td></tr></table></figure></p><p>隐藏文件，可以<code>ls -al</code>看见</p><p><strong>文件生效</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure></p><p>完成~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Linux实用小工具推荐&lt;/p&gt;
&lt;p&gt;偶然发现几个挺有意思的小工具，推荐下&lt;br&gt;
    
    </summary>
    
      <category term="skill" scheme="http://tokyle.com/categories/skill/"/>
    
    
      <category term="Linux" scheme="http://tokyle.com/tags/Linux/"/>
    
      <category term="centos7" scheme="http://tokyle.com/tags/centos7/"/>
    
  </entry>
  
  <entry>
    <title>Nginx简单配置</title>
    <link href="http://tokyle.com/2018/11/20/Nginx%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE/"/>
    <id>http://tokyle.com/2018/11/20/Nginx简单配置/</id>
    <published>2018-11-20T07:33:53.000Z</published>
    <updated>2018-11-20T07:35:30.000Z</updated>
    
    <content type="html"><![CDATA[<p>nginx简单配置及简单说明</p><a id="more"></a><p>nginx安装就不说了，直接上配置文件，改改就可以了：</p><h3 id="nginx-conf"><a href="#nginx-conf" class="headerlink" title="nginx.conf"></a>nginx.conf</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">user  nginx;</span><br><span class="line">worker_processes  8;</span><br><span class="line">worker_cpu_affinity 00000001 00000010 00000100 00001000 00010000 00100000 01000000 10000000;</span><br><span class="line">worker_rlimit_nofile 2000000;</span><br><span class="line">error_log   /var/log/nginx/error.log;</span><br><span class="line">#error_log  logs/error.log  notice;</span><br><span class="line">#error_log  logs/error.log  info;</span><br><span class="line"></span><br><span class="line">#pid        logs/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  2000000;</span><br><span class="line">    use epoll;</span><br><span class="line">    multi_accept on;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$http_x_forwarded_for &apos;                       </span><br><span class="line">                      &apos;$upstream_addr &apos;                        </span><br><span class="line">                      &apos;ups_resp_time: $upstream_response_time &apos;                        </span><br><span class="line">                      &apos;request_time: $request_time&apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line">    client_max_body_size 5000m;</span><br><span class="line">    client_body_buffer_size 512k;</span><br><span class="line">    proxy_connect_timeout 3000;</span><br><span class="line">    proxy_send_timeout 3000;</span><br><span class="line">    proxy_read_timeout 3000;</span><br><span class="line">    proxy_buffer_size 512k;</span><br><span class="line">    proxy_buffers 8 512k;</span><br><span class="line">    proxy_busy_buffers_size 512k;</span><br><span class="line">    proxy_temp_file_write_size 512k;</span><br><span class="line">    proxy_next_upstream error timeout invalid_header http_500 http_503 http_404;</span><br><span class="line">    proxy_max_temp_file_size 128m;</span><br><span class="line">    fastcgi_read_timeout 3000;</span><br><span class="line">    fastcgi_buffers 8 5125;</span><br><span class="line">    send_timeout 3000;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_disable none;</span><br><span class="line">    keepalive_timeout   120;</span><br><span class="line">    keepalive_requests  65535;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line">    </span><br><span class="line">    charset             utf-8;</span><br><span class="line">    server_names_hash_bucket_size 128;</span><br><span class="line">    client_header_buffer_size 32k;</span><br><span class="line">    large_client_header_buffers 4 32k;</span><br><span class="line">    reset_timedout_connection on; </span><br><span class="line"></span><br><span class="line">    gzip  on;</span><br><span class="line">    gzip_min_length 1k;</span><br><span class="line">    gzip_buffers 4 16k;</span><br><span class="line">    gzip_comp_level 2;</span><br><span class="line">    gzip_types text/plain application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png application/json;</span><br><span class="line">    gzip_vary off;</span><br><span class="line">    gzip_disable &quot;MSIE [1-6]\.&quot;;  </span><br><span class="line">    </span><br><span class="line">    include       conf.d/*.conf;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="APP-conf"><a href="#APP-conf" class="headerlink" title="APP.conf"></a>APP.conf</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">upstream apitest&#123;</span><br><span class="line">       # ip_hash;</span><br><span class="line">#    least_conn;</span><br><span class="line">        server 192.168.0.1:8080;</span><br><span class="line">        server 192.168.0.2:8080;</span><br><span class="line">        server 192.168.0.3:8080;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        #location / &#123;</span><br><span class="line">        #    root   html;</span><br><span class="line">        #    index  index.html index.htm;</span><br><span class="line">        #     proxy_pass http://apitest;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">location ^~ /api/ &#123;</span><br><span class="line">            proxy_http_version 1.1;</span><br><span class="line">            proxy_set_header Host $host;</span><br><span class="line">           proxy_set_header  Connection  &quot;&quot;;</span><br><span class="line">            #proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">            #proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">            #proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_pass http://apitest/api/;</span><br><span class="line">            proxy_redirect off;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ^~ /auth/ &#123;</span><br><span class="line">            proxy_http_version 1.1;</span><br><span class="line">            proxy_set_header  Connection  &quot;&quot;;</span><br><span class="line">            proxy_set_header Host $host;</span><br><span class="line">            proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">            proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_pass http://apitest/auth/;</span><br><span class="line">            proxy_redirect off;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the static page /50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    proxy_pass   http://127.0.0.1;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    root           html;</span><br><span class="line">        #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        #    fastcgi_index  index.php;</span><br><span class="line">        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">        #    include        fastcgi_params;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # deny access to .htaccess files, if Apache&apos;s document root</span><br><span class="line">        # concurs with nginx&apos;s one</span><br><span class="line">        #</span><br><span class="line">        #location ~ /\.ht &#123;</span><br><span class="line">        #    deny  all;</span><br><span class="line">        #&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="简单说明"><a href="#简单说明" class="headerlink" title="简单说明"></a>简单说明</h3><h4 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h4><p>配置负载均衡，只要就是使用了节点<code>upstream</code>，参考格式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#配置多台服务器（这里只在一台服务器上的不同端口）</span><br><span class="line"> upstream mysvr &#123;   </span><br><span class="line">　　　　#权重比设置为1  ： 3  意思为  用户请求四次服务器，平均访问8082端口3次，8081端口一次，以此达到服务器均衡的作用（高并发）  </span><br><span class="line">      server 127.0.0.1:8081 weight=1;</span><br><span class="line">      server 127.0.0.1:8082 weight=3; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h4><p>反向代理只要就是用来将请求发送给其他主机的ap服务器，简单来说就是，nginx收到请求后，将请求转发给对应的ap服务器。例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /apitest/ &#123;</span><br><span class="line">            proxy_pass http://192.168.0.1:8080;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p><p>当请求收到以<code>apitest/</code>开头的请求，就会转发到<code>http://192.168.0.1:8080</code>；所以如果有个请求是<code>http://192.168.3.2/apitest/getusername</code>，通过nginx就会转到<code>http://192.168.0.1:8080/apitest/getusername</code>达到转发的效果，配合之前的负载均衡，就可以实现请求一个ip的接口，转到<code>upstream</code>中定义的多个ip的接口。</p><h5 id="proxy-pass末尾“-”问题"><a href="#proxy-pass末尾“-”问题" class="headerlink" title="proxy_pass末尾“/”问题"></a>proxy_pass末尾“/”问题</h5><p>在nginx配置proxy_pass代理转发时，如果proxy_pass后面的URL加了<code>/</code>，表示绝对根路径；如果没有<code>/</code>，表示相对路径，把匹配的路径部分也代理走。</p><p>假设都访问<em><a href="http://192.168.2.1:8082/apitest/login.html" target="_blank" rel="noopener">http://192.168.2.1:8082/apitest/login.html</a></em></p><p><em>第一种</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /apitest/ &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>代理到URL: <code>http://127.0.0.1/apitest/login.html</code></p><p><em>第二种</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /apitest/ &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>第二种相对于第一种，proxy_pass后面的url少了<code>/</code>，代理到URL:<code>http://127.0.0.1/apitest/login.html</code></p><p><em>第三种</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /apitest/ &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1/aaa/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>第三种相对于第一种，proxy_pass后面的url加了一层<code>aaa/</code>，代理到URL:<code>http://127.0.0.1/aaa/login.html</code></p><p><em>第四种</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /apitest/ &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1/aaa;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>第四种相对于第一种，proxy_pass后面的url加了一层<code>aaa</code>，代理到URL:<code>http://127.0.0.1/aaalogin.html</code></p><p>完~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;nginx简单配置及简单说明&lt;/p&gt;
    
    </summary>
    
      <category term="性能测试" scheme="http://tokyle.com/categories/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="Centos7" scheme="http://tokyle.com/tags/Centos7/"/>
    
      <category term="Nginx" scheme="http://tokyle.com/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>一次精疲力尽的压测</title>
    <link href="http://tokyle.com/2018/11/19/%E4%B8%80%E6%AC%A1%E7%B2%BE%E7%96%B2%E5%8A%9B%E5%B0%BD%E7%9A%84%E5%8E%8B%E6%B5%8B/"/>
    <id>http://tokyle.com/2018/11/19/一次精疲力尽的压测/</id>
    <published>2018-11-19T06:03:11.000Z</published>
    <updated>2018-11-19T06:04:48.000Z</updated>
    
    <content type="html"><![CDATA[<p>记一次精疲力尽的无语压测经历</p><a id="more"></a><p>平台改版，需要新的登录，平台组挑选了red hat开源的keycloak，一个针对现代应用程序和服务的开源身份和访问管理解决方案。</p><p>压测主要是进行了接口的压测。<br>正常流程，脚本编写，执行，监控服务器资源，报告。</p><p>但是，这个神奇的接口，每次都是线程到300时候，有一瞬间QPS到达峰值，然后瞬间下降，之后持续一个很稳定的值一直下去，并且伴随着一堆的<code>socket timeout</code>报错。</p><p>于是乎，正常的，重测，看CPU<br><code>top</code>，<code>vmstat</code>，<code>uptime</code>没啥用，CPU根本没什么反应，三台AP都是50%左右</p><p>看内存<br><code>free -m</code>也没啥用，一堆限制内存</p><p>看磁盘<br><code>iostat -dxk 2</code>没怎么写。。</p><p>看网络：<br>看连接<br><code>netstat -an | grep 端口 | wc -l</code>貌似也正常的很。。</p><p>没办法，继续看内存，定位JVM问题：<br><code>jstat PID &gt; 1.log</code>导出dump文件，看一下，有很多block的，暂时不用优化<br><code>jmap -dump:live,format=b,file=dump.hprof PID</code>生成堆栈的完整文件，没啥用。。。<br><code>jmap -heap PID</code>看当前堆内存使用情况，GC正常，没用。。</p><p>然后开始怀疑是自己压测工具的问题，做了jmeter分布式，每台压力机起100个线程，也没什么用。</p><p>最后快绝望了，抱着试试看的心态，切到内网地址，那个到峰值之后降下来的情况终于没了（之所以开始不用内网地址测试，是因为之后上正式环境，提供出去的是外网地址，所以测试中，肯定是用外网地址来模拟）。找到了是内外网的区别之后，找运维同事看了网络的区别，得出的结果是外网地址限制了流量。。。阿里云ECS服务器，限制了外网流量是100Mb/s，我们的接口，一个请求大概数据包是2k，并发情况下，流量超出了限制，直接被阿里云服务器限制了访问。。。服气！</p><p>所以，压测，不止要关注服务器自己的CPU，内存，磁盘，网络连接，还要看服务器提供商的外部限制。。。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;记一次精疲力尽的无语压测经历&lt;/p&gt;
    
    </summary>
    
      <category term="性能测试" scheme="http://tokyle.com/categories/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="Linux" scheme="http://tokyle.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>JVM内存性能问题定位</title>
    <link href="http://tokyle.com/2018/11/02/JVM%E5%86%85%E5%AD%98%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D/"/>
    <id>http://tokyle.com/2018/11/02/JVM内存性能问题定位/</id>
    <published>2018-11-02T06:35:32.000Z</published>
    <updated>2018-11-02T06:36:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>JVM内存性能定位</p><p>有点乱的一篇记录，想到哪敲到哪了。。。<br><a id="more"></a></p><h3 id="堆和栈"><a href="#堆和栈" class="headerlink" title="堆和栈"></a>堆和栈</h3><p>首先，栈（stack）和堆（heap）都是Java用来在RAM中存放数据的地方。根据 JVM 规范，JVM 内存共分为java栈（虚拟机栈VM Stack）、堆（Heap）、方法区（Method Area）、程序计数器（Program Counter Register）、本地方法栈（Native Method Stack）五个部分。</p><p><strong>堆</strong>：用来存储程序中的一些对象，比如你用new关键字创建的对象，它就会被存储在堆内存中，但是这个对象在堆内存中的首地址会存储在栈中</p><p><strong>栈</strong>：在jvm中栈用来存储一些对象的引用、局部变量以及计算过程的中间数据，在方法退出后那么这些变量也会被销毁。它的存储比堆快得多，只比CPU里的寄存器慢</p><p>栈内存在JVM中默认是1M，可以通过参数进行设置：<code>-Xss</code><br>最小堆内存在JVM中默认物理内存的64分之1，最大堆内存在JVM中默认物理内存4分之一，且建议最大堆内存不大于4G，并且设置-Xms=-Xmx避免每次GC后，调整堆的大小，减少系统内存分配开销:<code>-Xms</code>、<code>-Xmx</code>.</p><h3 id="JVM堆内存与GC"><a href="#JVM堆内存与GC" class="headerlink" title="JVM堆内存与GC"></a>JVM堆内存与GC</h3><p>在JVM里的内存空间，从大的层面划分，主要有新生代空间（Young）和老年代空间（Old），其中Young空间，又有1个Egen区，和2个Survivor区</p><ol><li><p>Eden区域是用来存放使用new或者newInstance等方式创建的对象，默认都是存放在Eden区，除非这个对象太大，或者超过了设定的阈值-XX:PretenureSizeThresold,这样的对象会被直接分配到Old区域。</p></li><li><p>2个Survivor（幸存）区，一般称S0，S1，理论上他们是一样大的，解释一下，他们是如何工作的：<br>在不断创建对象的过程中，Eden区会满，这时候会开始做Young G也叫Minor GC，而Young空间的第一次GC就是找出Eden区中，幸存活着的对象，然后将这些对象，放到S0，或S1区中的其中一个， 假设第一次选择了S0，它会逐步将活着的对象拷贝到S0区域，但是如果S0区域满了，剩下活着的对象只能放old区域了，接下来要做的是，将Eden区域 清空，此时时候S1区域也是空的。</p></li></ol><p>当第二次Eden区域满的时候，就将Eden区域中活着的对象+S0区域中活着的对象，迁移到S1中，如果S1放不下，就会将剩下的部门，放到Old区域中，只是这次对象来源区域增加了S0，最后会将Eden区+S0区域，清空。</p><p>第三次和第四次依次类推，始终保证S0和S1有一个是空的，用来存储临时对象，用于交换空间的目的，反反复复多次没有被淘汰的对象，将会放入old区域中，默认是15次。具体的交换过程就和上图中的信息相似。</p><h4 id="S0和S1一般多大，靠什么参数来控制，有什么变化？"><a href="#S0和S1一般多大，靠什么参数来控制，有什么变化？" class="headerlink" title="S0和S1一般多大，靠什么参数来控制，有什么变化？"></a>S0和S1一般多大，靠什么参数来控制，有什么变化？</h4><p>一般来说很小，我们大概知道它与Young差不多相差一倍的比例，设置的的参数主要有两个：<br>-XX:SurvivorRatio=8<br>-XX:InitialSurvivorRatio=8 </p><p>第一个参数是Eden和Survivor区域比重，注意是一个Survivor的的大小，如果将其设置为8，则说明Eden区是一个Survivor区的8倍，换句话说S0或S1空间是整个Young空间的1/10，剩余的80%由Eden区域来使用。 </p><p>第二个参数是Young/S0的比值，当其设置为8时，表示s0或s1占整个Young空间的12.5%。</p><h4 id="一个对象每次Minor-Gc时，活着的对象都会在s0和s1区域转移，经过经过Minor-GC多少次后，会进入Old区域呢？"><a href="#一个对象每次Minor-Gc时，活着的对象都会在s0和s1区域转移，经过经过Minor-GC多少次后，会进入Old区域呢？" class="headerlink" title="一个对象每次Minor Gc时，活着的对象都会在s0和s1区域转移，经过经过Minor GC多少次后，会进入Old区域呢？"></a>一个对象每次Minor Gc时，活着的对象都会在s0和s1区域转移，经过经过Minor GC多少次后，会进入Old区域呢？</h4><p>默认是15次，参数设置-XX:MaxTenuringThreshold=15,计数器会在对象的头部记录它交换的次数 </p><h4 id="FULL-GC"><a href="#FULL-GC" class="headerlink" title="FULL GC"></a>FULL GC</h4><p>发生FULL GC的时候，意味着JVM会安全的暂停所有正在执行的线程（Stop The World），来回收内存空间，在这个时间段内，所有除了回收垃圾的线程外，其他有关JAVA的程序，代码都会静止，反映到系统上，就会出现系统响应大幅度变慢，卡机等状态。 </p><h3 id="内存分析"><a href="#内存分析" class="headerlink" title="内存分析"></a>内存分析</h3><h4 id="线程阻塞"><a href="#线程阻塞" class="headerlink" title="线程阻塞"></a>线程阻塞</h4><p>关于线程阻塞，在之前定位linux最耗CPU时已经有提过：<a href="http://tokyle.com/2018/10/17/Linux%E5%AE%9A%E4%BD%8D%E6%9C%80%E8%80%97CPU%E7%9A%84%E7%BA%BF%E7%A8%8B/#more">Jstack定位线程阻塞</a></p><p>这边提供一个分析工具，当使用<code>jstack pid &gt; 1.log</code>生成堆栈日志之后，使用<code>tda</code>工具进行分析</p><blockquote><p><a href="https://pan.baidu.com/s/19Gv_rTBdGrFD4Tm6F9IY5w" target="_blank" rel="noopener">tda度娘盘地址（提取码：fut9）</a></p></blockquote><h4 id="jstat查看gc"><a href="#jstat查看gc" class="headerlink" title="jstat查看gc"></a>jstat查看gc</h4><p><code>jstat -gccause pid 5000</code>，每隔5s刷新一次，查看GC信息，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@iZuf61um4k0dww403xbmgpZ ~]# jstat -gccause 1270 5000</span><br><span class="line">  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT    LGCC                 GCC                 </span><br><span class="line">  0.00   0.00  28.12  99.96  87.59  80.39    610   21.693    31   61.932   83.625 G1 Evacuation Pause  No GC               </span><br><span class="line">  0.00   0.00  28.12  99.96  87.59  80.39    610   21.693    31   61.932   83.625 G1 Evacuation Pause  No GC</span><br></pre></td></tr></table></figure></p><p>其中<code>FGC</code>代表程序启动至今的FULL GC次数</p><h4 id="jmap分析GC"><a href="#jmap分析GC" class="headerlink" title="jmap分析GC"></a>jmap分析GC</h4><p><code>jmap -heap PID</code>可以直接看到当前堆内存信息，包含各区域使用率</p><p><code>jmap -histo:live PID | head -10</code>打印当前java堆活跃的各个对象的数量、大小</p><p><code>jmap -dump:live,format=b,file=dump.hprof PID</code>生成dump文件（堆栈）<br>生成的dump文件（dump.hprof），可以用<strong>MAT</strong>（<code>MemoryAnalyzer</code>）工具进行堆栈分析</p><blockquote><p><a href="https://pan.baidu.com/s/1mF70g1IyS8wYIuXaNx7vaQ" target="_blank" rel="noopener">MAT度娘盘地址（提取码：jidc）</a></p></blockquote><h4 id="打印GC日志"><a href="#打印GC日志" class="headerlink" title="打印GC日志"></a>打印GC日志</h4><p>最后，可以通过启动应用时加上GC打印的设置，直接将GC打印到文件中进行分析：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xloggc:/root/log/gclogs</span><br></pre></td></tr></table></figure></p><p>分析用工具：<strong>gcviewer-1.36-SNAPSHOT</strong></p><blockquote><p><a href="https://pan.baidu.com/s/10JMnrTqw-82TuTw-__677w" target="_blank" rel="noopener">gcviewer度娘盘地址（提取码：cvhs）</a><br>工具启动方式：<code>java -jar gcviewer-1.36-SNAPSHOT.jar</code>(文件目录下执行)</p></blockquote><h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="https://blog.csdn.net/xingkongtianma01/article/details/80689928" target="_blank" rel="noopener">JDK8 JVM性能优化</a></p><h4 id="工具使用教程"><a href="#工具使用教程" class="headerlink" title="工具使用教程"></a>工具使用教程</h4><p><a href="https://blog.csdn.net/u011649536/article/details/50817454" target="_blank" rel="noopener">利用mat定位内存泄漏原因</a><br><a href="https://blog.csdn.net/nokiaisacat/article/details/52123904" target="_blank" rel="noopener">java GC日志查看gcviewer</a><br><a href="https://blog.csdn.net/everlasting_188/article/details/51943095" target="_blank" rel="noopener">TDA进行java线程dump分析</a><br><a href="http://www.cnblogs.com/nexiyi/p/java_thread_jstack.html" target="_blank" rel="noopener">java线程Dump分析工具–jstack</a><br><a href="https://www.cnblogs.com/qlqwjy/p/7929414.html" target="_blank" rel="noopener">Java GC日志查看</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;JVM内存性能定位&lt;/p&gt;
&lt;p&gt;有点乱的一篇记录，想到哪敲到哪了。。。&lt;br&gt;
    
    </summary>
    
      <category term="性能测试" scheme="http://tokyle.com/categories/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="JVM" scheme="http://tokyle.com/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>Linux定位最耗CPU的线程</title>
    <link href="http://tokyle.com/2018/10/17/Linux%E5%AE%9A%E4%BD%8D%E6%9C%80%E8%80%97CPU%E7%9A%84%E7%BA%BF%E7%A8%8B/"/>
    <id>http://tokyle.com/2018/10/17/Linux定位最耗CPU的线程/</id>
    <published>2018-10-18T02:35:01.000Z</published>
    <updated>2018-10-18T02:36:36.000Z</updated>
    
    <content type="html"><![CDATA[<p>定位Linux耗CPU较高的线程</p><a id="more"></a><p>压测过程，经常遇见服务器CPU非常高，只是单纯的top，也只能看到是哪个进程比较耗CPU，不能进一步定位具体的线程。</p><h3 id="Linux定位CPU瓶颈几种方式"><a href="#Linux定位CPU瓶颈几种方式" class="headerlink" title="Linux定位CPU瓶颈几种方式"></a>Linux定位CPU瓶颈几种方式</h3><h4 id="系统查看"><a href="#系统查看" class="headerlink" title="系统查看"></a>系统查看</h4><h5 id="查看物理CPU个数："><a href="#查看物理CPU个数：" class="headerlink" title="查看物理CPU个数："></a>查看物理CPU个数：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo |grep &quot;physical id&quot;|sort|uniq|wc -l</span><br></pre></td></tr></table></figure><h5 id="查看每个物理CPU中的core个数"><a href="#查看每个物理CPU中的core个数" class="headerlink" title="查看每个物理CPU中的core个数:"></a>查看每个物理CPU中的core个数:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo |grep &quot;cpu cores&quot;|wc -l</span><br></pre></td></tr></table></figure><h5 id="逻辑CPU个数"><a href="#逻辑CPU个数" class="headerlink" title="逻辑CPU个数"></a>逻辑CPU个数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/cpuinfo |grep &quot;procetestr&quot;|wc -l</span><br></pre></td></tr></table></figure><p>物理cpu个数*核数=逻辑cpu个数（不支持超线程技术的情况下）</p><h4 id="uptime"><a href="#uptime" class="headerlink" title="uptime"></a>uptime</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf6a1s9ws9726xatwn47z tools]# uptime</span><br><span class="line">10:15:33 up 54 days, 18:01,  1 user,  load average: 1.02, 0.56, 0.30</span><br></pre></td></tr></table></figure><ul><li><p>load average三值大小一般不能大于系统CPU的个数。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">系统有8个CPU,如load average三值长期大于8，说明CPU很繁忙，负载很高，可能会影响系统性能。</span><br></pre></td></tr></table></figure></li><li><p>但偶尔大于8，一般不会影响系统性能。</p></li><li>如load average输出值小于CPU个数，则表示CPU有空闲时间片，比如本例中的输出，CPU是非常空闲的</li></ul><h4 id="vmstat"><a href="#vmstat" class="headerlink" title="vmstat"></a>vmstat</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf6b0a7e5agj4lm7aj3mz ~]# vmstat 2 3</span><br><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st</span><br><span class="line"> 3  0      0 12267888 166640 1863724    0    0     1    41   72   88  3  1 96  0  0</span><br><span class="line"> 2  0      0 12267872 166640 1863724    0    0     0     0 66000 163918 15 17 68  0  0</span><br><span class="line"> 2  0      0 12267872 166640 1863724    0    0     0   158 18689 43630 40  5 55  0  0</span><br></pre></td></tr></table></figure><p>r–运行和等待cpu时间片的进程数，这个值如果长期大于系统CPU的个数，说明CPU不足，需要增加CPU<br>b–在等待资源的进程数，比如正在等待I/O、或者内存交换等。<br>CPU<br>us<br>用户进程消耗的CPU时间百分比<br>us的值比较高时，说明用户进程消耗的cpu时间多，但是如果长期大于50%，就需要考虑优化程序或算法。</p><p>sy<br>内核进程消耗的CPU时间百分比，Sy的值较高时，说明内核消耗的CPU资源很多<br>根据经验，us+sy的参考值为80%，如果大于80%可能存在CPU资源不足。</p><h4 id="sar"><a href="#sar" class="headerlink" title="sar"></a>sar</h4><p>sar对系统每个方面进行单独统计，但会增加系统开销，不过开销可以评估，对系统的统计结果不会有很大影响<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@izuf6b0a7e5agj4lm7aj3mz ~]# sar -u 3 5</span><br><span class="line">Linux 3.10.0-693.2.2.el7.x86_64 (izuf6b0a7e5agj4lm7aj3mz) 08/29/2018 _x86_64_(4 CPU)</span><br><span class="line"></span><br><span class="line">03:05:20 PM     CPU     %user     %nice   %system   %iowait    %steal     %idle</span><br><span class="line">03:05:23 PM     all      0.08      0.00      0.08      0.08      0.00     99.75</span><br><span class="line">03:05:26 PM     all      0.08      0.00      0.00      0.00      0.00     99.92</span><br><span class="line">03:05:29 PM     all      0.08      0.00      0.08      0.00      0.00     99.83</span><br><span class="line">03:05:32 PM     all      0.33      0.00      0.08      0.00      0.00     99.58</span><br><span class="line">03:05:35 PM     all      0.08      0.00      0.08      0.00      0.00     99.83</span><br><span class="line">Average:        all      0.13      0.00      0.07      0.02      0.00     99.78</span><br></pre></td></tr></table></figure></p><p>解释：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">%user列显示了用户进程消耗的CPU 时间百分比。</span><br><span class="line">%nice列显示了运行正常进程所消耗的CPU 时间百分比。</span><br><span class="line">%system列显示了系统进程消耗的CPU时间百分比。</span><br><span class="line">%iowait列显示了IO等待所占用的CPU时间百分比</span><br><span class="line">%steal列显示了在内存相对紧张的环境下pagein强制对不同的页面进行的steal操作 。</span><br><span class="line">%idle列显示了CPU处在空闲状态的时间百分比。</span><br></pre></td></tr></table></figure></p><h4 id="top"><a href="#top" class="headerlink" title="top"></a>top</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">top - 10:20:34 up 54 days, 18:06,  1 user,  load average: 0.14, 0.30, 0.26</span><br><span class="line">Tasks: 101 total,   1 running, 100 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  1.3 us,  0.5 sy,  0.0 ni, 98.2 id,  0.1 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem : 16267724 total,  3338792 free,  6439248 used,  6489684 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  9492508 avail Mem </span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br></pre></td></tr></table></figure><p>第一行为当前时间，系统运行时间，当前登录用户数，系统1/5/15分钟平均负载</p><p>第二、三行为进程和CPU的信息。当有多个CPU时，这些内容可能会超过两行。内容如下：<br>Tasks:</p><p>total   进程总数<br>running   正在运行的进程数<br>sleeping   睡眠的进程数<br>stopped   停止的进程数<br>zombie   僵尸进程数 </p><p>Cpu(s): </p><p>us   用户空间占用CPU百分比<br>sy   内核空间占用CPU百分比<br>ni   用户进程空间内改变过优先级的进程占用CPU百分比<br>id   空闲CPU百分比<br>wa   等待输入输出的CPU时间百分比<br>hi   硬中断（Hardware IRQ）占用CPU的百分比<br>si   软中断（Software Interrupts）占用CPU的百分比</p><p>st   (Steal time) 是当 hypervisor 服务另一个虚拟处理器的时候，虚拟 CPU 等待实际 CPU 的时间的百分比。</p><p>最后两行为内存信息。内容如下：<br>Mem: </p><p>total   物理内存总量<br>used   使用的物理内存总量<br>free   空闲内存总量<br>buffers   用作内核缓存的内存量 </p><p>Swap: </p><p>total   交换区总量<br>used   使用的交换区总量<br>free   空闲交换区总量<br>cached   缓冲的交换区总量。<br>内存中的内容被换出到交换区，而后又被换入到内存，但使用过的交换区尚未被覆盖，<br>该数值即为这些内容已存在于内存中的交换区的大小。<br>相应的内存再次被换出时可不必再对交换区写入。 </p><p>进程信息区<br>统计信息区域的下方显示了各个进程的详细信息。首先来认识一下各列的含义。<br>序号 列名 含义<br>PID 进程id<br>PPID 父进程id<br>RUSER Real user name<br>d UID 进程所有者的用户id<br>e USER 进程所有者的用户名<br>f GROUP 进程所有者的组名<br>g TTY 启动进程的终端名。不是从终端启动的进程则显示为 ?<br>h PR 优先级<br>i NI nice值。负值表示高优先级，正值表示低优先级<br>j P 最后使用的CPU，仅在多CPU环境下有意义<br>k %CPU 上次更新到现在的CPU时间占用百分比<br>l TIME 进程使用的CPU时间总计，单位秒<br>m TIME+ 进程使用的CPU时间总计，单位1/100秒<br>n %MEM 进程使用的物理内存百分比<br>o VIRT 进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES<br>p SWAP 进程使用的虚拟内存中，被换出的大小，单位kb。<br>q RES 进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA<br>r CODE 可执行代码占用的物理内存大小，单位kb<br>s DATA 可执行代码以外的部分(数据段+栈)占用的物理内存大小，单位kb<br>t SHR 共享内存大小，单位kb<br>u nFLT 页面错误次数<br>v nDRT 最后一次写入到现在，被修改过的页面数。<br>w S 进程状态。<br>D=不可中断的睡眠状态<br>R=运行<br>S=睡眠<br>T=跟踪/停止<br>Z=僵尸进程<br>x COMMAND 命令名/命令行<br>y WCHAN 若该进程在睡眠，则显示睡眠中的系统函数名<br>z Flags 任务标志，参考 sched.h<br>默认情况下仅显示比较重要的 PID、USER、PR、NI、VIRT、RES、SHR、S、%CPU、%MEM、TIME+、COMMAND 列。可以通过下面的快捷键来更改显示内容。<br>更改显示内容<br>通过 f 键可以选择显示的内容。按 f 键之后会显示列的列表，按 a-z 即可显示或隐藏对应的列，最后按回车键确定。<br>按 o 键可以改变列的显示顺序。按小写的 a-z 可以将相应的列向右移动，而大写的 A-Z 可以将相应的列向左移动。最后按回车键确定。<br>按大写的 F 或 O 键，然后按 a-z 可以将进程按照相应的列进行排序。而大写的 R 键可以将当前的排序倒转。</p><h3 id="定位具体线程"><a href="#定位具体线程" class="headerlink" title="定位具体线程"></a>定位具体线程</h3><h4 id="top-c"><a href="#top-c" class="headerlink" title="top -c"></a>top -c</h4><p>通过<code>top -c</code>获得当前系统资源总览，键盘输入<code>P</code>(大写)，根据对CPU消耗倒序排列，获得最耗CPU的进程PID<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Tasks: 122 total,   1 running, 121 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s): 90.3 us,  1.6 sy,  0.0 ni,  6.6 id,  0.0 wa,  0.0 hi,  1.5 si,  0.0 st</span><br><span class="line">KiB Mem : 16267200 total,  7578856 free,  6915592 used,  1772752 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  9038816 avail Mem </span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                                                                                              </span><br><span class="line"> 4209 testadmin  20   0 15.470g 5.913g  23928 S 745.5 38.1 209:33.97 /home/testadmin/jdk1.8.0_191/bin/java -D[Server:server-one] -D[pcid:499421770] -Xms7168m -Xmx13312m -server -XX:Metas+</span><br><span class="line">    9 root      20   0       0      0      0 S   0.3  0.0   0:08.16 [rcu_sched]                                                                                                          </span><br><span class="line">   18 root      20   0       0      0      0 S   0.3  0.0   0:00.06 [ksoftirqd/2]                                                                                                        </span><br><span class="line"> 1264 root      20   0 2517268  69256  10948 S   0.3  0.4   4:53.38 /usr/local/cloudmonitor/jre/bin/java -Djava.compiler=none -XX:-UseGCOverheadLimit -XX:NewRatio=1 -XX:SurvivorRatio=8+</span><br><span class="line">    1 root      20   0   43660   4076   2492 S   0.0  0.0   0:01.79 /usr/lib/systemd/systemd --switched-root --system --deserialize 21</span><br></pre></td></tr></table></figure></p><p>以上例子，最耗CPU的进程PID为<code>4209</code></p><h4 id="top-Hp-PID"><a href="#top-Hp-PID" class="headerlink" title="top -Hp PID"></a>top -Hp PID</h4><p><code>top -Hp PID</code>获得该PID的线程列表，通过大写P，倒序排列，获取最耗CPU的线程PID：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">%Cpu(s): 91.3 us,  1.9 sy,  0.0 ni,  5.5 id,  0.0 wa,  0.0 hi,  1.4 si,  0.0 st</span><br><span class="line">KiB Mem : 16267200 total,  7266940 free,  7226952 used,  1773308 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  8727236 avail Mem </span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND                                                                                                               </span><br><span class="line">10185 testadmin  20   0 15.470g 6.208g  23928 S  8.2 40.0   0:12.15 java                                                                                                                  </span><br><span class="line">10148 testadmin  20   0 15.470g 6.208g  23928 S  6.8 40.0   0:12.21 java                                                                                                                  </span><br><span class="line">10149 testadmin  20   0 15.470g 6.208g  23928 R  6.8 40.0   0:12.18 java</span><br></pre></td></tr></table></figure></p><p>例如上述例子，获得最耗CPU的线程PID为<code>10185</code></p><h4 id="printf-“-x”"><a href="#printf-“-x”" class="headerlink" title="printf “%x”"></a>printf “%x”</h4><p>通过<code>printf “%x” 线程PID</code>，将PID转换为16进制：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[testadmin@izuf6bp7m03kbyap05zr6gz themes]$ printf “%x” 10185</span><br><span class="line">“27c9”</span><br></pre></td></tr></table></figure></p><p>获得16进制的PID<code>27c9</code></p><h4 id="jstack-进程PID-grep-16进制线程PID-C5-–color"><a href="#jstack-进程PID-grep-16进制线程PID-C5-–color" class="headerlink" title="jstack 进程PID | grep 16进制线程PID -C5 –color"></a>jstack 进程PID | grep 16进制线程PID -C5 –color</h4><p>通过<code>jstack 进程PID | grep 16进制线程PID -C5 --color</code>，获得耗CPU的线程详情：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[testadmin@izuf6bp7m03kbyap05zr6gz themes]$ jstack 4209 | grep 27c9 -C5 --color</span><br><span class="line">at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)</span><br><span class="line">at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)</span><br><span class="line">at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1364)</span><br><span class="line">at java.lang.Thread.run(Thread.java:748)</span><br><span class="line"></span><br><span class="line">&quot;default task-417&quot; #605 prio=5 os_prio=0 tid=0x00000000053cf800 nid=0x27c9 waiting on condition [0x00007f19f68f6000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">- parking to wait for  &lt;0x000000048002c208&gt; (a java.util.concurrent.Semaphore$FairSync)</span><br><span class="line">at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1037)</span><br></pre></td></tr></table></figure></p><p>上述例子，可以获取最耗CPU的线程名称:<code>default task-417</code>，以及该线程执行的代码堆栈：<code>0x27c9</code></p><p>以上，完！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;定位Linux耗CPU较高的线程&lt;/p&gt;
    
    </summary>
    
      <category term="性能测试" scheme="http://tokyle.com/categories/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="linux" scheme="http://tokyle.com/tags/linux/"/>
    
      <category term="CPU" scheme="http://tokyle.com/tags/CPU/"/>
    
  </entry>
  
  <entry>
    <title>胡言乱语</title>
    <link href="http://tokyle.com/2018/10/17/%E8%83%A1%E8%A8%80%E4%B9%B1%E8%AF%AD/"/>
    <id>http://tokyle.com/2018/10/17/胡言乱语/</id>
    <published>2018-10-17T09:15:20.000Z</published>
    <updated>2018-10-17T09:16:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>有事没事一点杂念</p><a id="more"></a><h3 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h3><p>这段时间我的小破爪机不间断的给我推送“国航”和“南方航空”的优惠，挠的我都又想出去浪了；想想，今年基本没什么出行，实在是有点 人到“中年”，俗事繁多的无奈~~~<br>迎接新生命到来的日子里，胡思乱想，水平有限，脚踩西瓜皮，遛哪写哪~</p><h3 id="一个简单的测试人"><a href="#一个简单的测试人" class="headerlink" title="一个简单的测试人"></a>一个简单的测试人</h3><p>很多时候，自觉还是个比较懒的人，一个没事喜欢思绪天马行空，而不是脚踏实地的做眼前的测试工作，最近想的比较多的，还是老生常谈的测试的职业生涯发展，个人在测试这条路上怎么走下去。</p><p>说实话，测试在业内的固有看法就是入门门槛低（实际上也是这样），在体量不是很大，技术氛围不是非常成熟的企业，我想，当前的状态，很多测试的同仁或多或少是不被开发看的起的吧，“没什么技术含量”，“不必要的工种”，“随便拉个人都能做”等等，唉，没办法，一句话是“开发是先天的，测试是后天的”，很多测试小伙伴（包括我自己），都是后天转到了测试这一行，或多或少的同仁是期待这个行业相对较好的薪资以及又不像开发的那么“找段代码过一生”的职业定位才从事的软件测试职业，如果没事时候问问自己，除却生活因素，软件测试这份职业，真的是你愿意从事的工作吗？真的是你的兴趣所在吗？我想是不是会打个问号。当你自己都不确定自己是否是愿意从事这门职业，坚守测试操守，也别去指望开发看的起你了呗。</p><p>当然，测试也真的没开发看的那么的糟糕，的确，一个根本没接触过软件测试方法论的人，很可能是会点啊点的就点出一个经过N多轮测试之后的系统的BUG，但是个人觉得这是无法避免的，0 bug的系统，个人觉得是个悖论；同样的，绝对安全的系统，根本也是不存在的。那么我们低端的测试人员怎么体现自己的价值，个人觉得，最简单的，业务的通盘理解程度，刚入行时候就听过，测试做得好，比产品还要懂产品。当你作为一个测试，比产品经理还要精通产品的业务，那你在平常的即使是黑盒测试过程中，也一定能很轻松就能发现很多的缺陷，甚至是预见系统在即使是开发严格按照产品文档开发之后也会出现的逻辑上的缺陷，这点，随便街上拉个人，应该做不到吧。之前参加公司一个培训时候，领导说过一句话，大致意思是在团队中做个有标签的人，当一个测试人员在团队中被打上了“这个人对业务最熟，不懂问他/她”，那我想，至少你是一个合格的测试了，开发，没有理由看不上你的工作。</p><h3 id="是不是该学点技术了"><a href="#是不是该学点技术了" class="headerlink" title="是不是该学点技术了"></a>是不是该学点技术了</h3><p>在进行了n久的功能测试之后，很多测试同仁会去转，可能是管理，可能是产品，也可能是其他。另外的，可能就是技术方向了，性能测试，自动化测试，安全测试等等；个人见识浅薄，目前只接触过性能测试和自动化测试，身边也有做安全测试的同事，我呢，自知能力尚欠，还没接触。</p><h4 id="性能测试"><a href="#性能测试" class="headerlink" title="性能测试"></a>性能测试</h4><p>说到这四个字，是有点心累。找工作上，这四个字一输，敲个回车，就没几个职位放出来。进了企业，进行性能测试工作，我想我们这些底层的测试人员，很多也就是jmeter和loadrunner来回打转，写个脚本，测个结果，就算完成了。入门更是神奇，网上随便搜索《loadrunnerxxx入门到实践》，《Jmeterxxx实战系列》等等，教程一搜一堆，照着也是很简单就能完成一个脚本，然后就像模像样的找台压测机，点开始执行，没事到linux敲个top、vmstat或者iostat来看看资源，两只眼睛盯着聚合报告或者TPS图像，一有风吹草动就风风火火的在群里@谁谁谁，系统不行啊，并发才这么点，CPU就这么高，你这要优化啊。好一点的，还会mysql -uroot -p；show processlist;show OPEN TABLES where In_use &gt; 0;tail -f -n 300 slow.log;mysqlbinlog xxxx来看看数据库，也到头了。脸红的说，我差不多就这个层次，好不到哪去。所以有的时候，真的挺无语的，自己能力真的挺差的，作为一个性能测试人员，我能提供的最大的帮助就是定位是不是内存泄漏，是不是有慢SQL，再多也只能explain一下SQL，提供一点优化建议了。自觉，真的能力好低，对于程序出现CPU爆表，根本不能给开发提供节省他们时间的信息。</p><p>理想中的性能测试，通盘理解结构，精通语言，能大致定位到代码块，精简开发的优化时间，个人觉得，欠缺：</p><ul><li>网络知识（TCP/IP，HTTP）</li><li>操作系统底层知识（代码执行原理，CPU、内存、磁盘等配合过程）</li><li>编程语言（Java特性，JVM原理、调优）</li><li>数据库（Mysql，Redis等）</li><li>监控系统</li><li>日志系统</li></ul><p>最后，尽量不依赖工具，至少最后往不记得有工具这回事这方向走。</p><h4 id="自动化测试"><a href="#自动化测试" class="headerlink" title="自动化测试"></a>自动化测试</h4><p>国内目前的环境也还是推崇自动化，毕竟解放提升测试效率，解放人力嘛，可以理解。自动化测试的好处就不列举了，随随便便能列出一堆，但是，有的时候我们要“抬杠”，自动化测试不好的地方。最近看了篇<code>James Bach</code>的访谈，这位大仙关于自动化测试的一些观念，个人觉得，是很有道理的。摘一段：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">自动化是用某个具体的方法发现些具体的问题。而人类应该有能力去用更加开阔性的方法发现更多问题</span><br><span class="line"></span><br><span class="line">你知道，我不喜欢用“测试自动化”这个词，因为我觉得测试不能被自动化。当大家说测试自动化的时候，大家的意思其实是自动事实检查fact checking。这些用例在检查特定的事物，所以他们寻找特定事物的失败或者成功。这就是自动检查，但是它完全没有自动化任何人们所做的真正的测试。当作为一个人去做测试的时候，我们不单单的看特定的东西，我们还会看一些线索。我们会去探索一些奇怪的事物和现象。一旦，我觉得有什么蹊跷，我就会深入下去，仔细研究。然后，当然研究会让我发现一些新的在开始的时候我没曾想过的缺陷。机器永远做不到这点，只有人可以。</span><br></pre></td></tr></table></figure></p><p>大仙的意思，我个凡人揣摩的是，自动化测试的确是一个很有效的提升测试效率，尤其是在繁重的重复性测试上的效率，非常有价值，可以给企业节省出好几个劳动力去从事其他的价值。但是现在也有过分追求自动化的情况，接触过自动化测试的人应该都清楚自动化测试的原理，主要的验证方式就是断言，想想，既然可以在自动化脚本中写出了明确的断言结果，是不是也就意味着，这是你执行过不止一次的，思维定式般的测试思路；这样，如果对于测试数据也不维护，是不是就会出现一直跑着同样的结果，机械的验证着你固定的思维。自动化测试有个有名的理论“杀虫剂效应”，如果你用一种特定的方法去发现一种类型的缺陷，那就只能发现这种类型的缺陷了。</p><p>自己也做过一点点的自动化，感觉，自动化对企业是必须的工作，但是个人觉得，也不能过分的去追求自动化， 而且，自动化的从业人员，有的时候应该停下来，好好想想用例设计，好好想想自动化怎么才能更大的价值。</p><h3 id="测试理论"><a href="#测试理论" class="headerlink" title="测试理论"></a>测试理论</h3><p>也忘了是在哪边看到的一句话，测试用例设计方法，一下午就可以全部学完。看起来貌似有点道理，一般日常使用的较多的等价类、边界值、判定变、正交等等，一下午好像是学完了，发现自己是无力反驳。。。然后看到“季哥”的博客，有这么一段话：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">多次和其他公司的测试同学交流，发现很多同学说自己都说自己是工作2-3年的人，已经遇到瓶颈了，感觉测试很单调和无味。我给的建议其实很简单，那就是真正的理解和掌握所有的黑盒测试方法。怎么来验证呢？我自己就是这样：给你一个白板，你能把所有测试方法的5W2H(What、Why、When、Where、Who、How、How Much)都能非常清晰明了的演讲出来了吗？记住是不需要参考ppt或其他资料的情况下。</span><br></pre></td></tr></table></figure></p><p>对照着看，发现自己的确是懂得相当的少。我们现在所日常使用的测试方法，都是前人沉淀下来的，既然现在入门测试还需要学，那就一定有我们没有掌握的部分，用例设计方法就那么多个，背一下很简单，用起来，自问，差太远了。</p><h4 id="懒一点"><a href="#懒一点" class="headerlink" title="懒一点"></a>懒一点</h4><p>我还是想说，有的时候，需要“懒”一点，停下来，不动手，好好想想；一直的在做做做，很多时候，我们就被限制住了，忘掉了很多原本很简单，很真的想法，忘掉了真正的工作。想想怎么提升测试效率，怎么帮助团队提高产品质量，怎么优化我们的测试工作等等。</p><p>最近想过一些问题：<br><code>如果测试时间不够，是否可以只测试客户关心的比较常用的功能？</code><br><code>怎么用技术手段去提高测试效率</code><br><code>离开了工具，我还会不会测试</code><br><code>测试的初衷是什么</code></p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>人生苦短，“好好享受”，稍微“懒”一点，想尽办法去“偷懒”。另外，做个“独立”的个体，减少依赖，自带技能盔甲加身，工具只是锦上添花并不是生活必须品（的确，提升效率上功不可没）。</p><p>最后，以上，皆为胡言乱语，没有一点点参考价值，结束！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;有事没事一点杂念&lt;/p&gt;
    
    </summary>
    
      <category term="生活" scheme="http://tokyle.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="lives" scheme="http://tokyle.com/tags/lives/"/>
    
  </entry>
  
</feed>
